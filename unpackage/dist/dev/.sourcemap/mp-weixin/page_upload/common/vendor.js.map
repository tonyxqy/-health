{"version":3,"sources":["uni-app:///wxcomponents/vant/toast/toast.js","uni-app:///wxcomponents/vant/common/validator.js"],"names":["defaultOptions","type","mask","message","show","zIndex","duration","position","forbidClick","loadingType","selector","queue","currentOptions","Object","assign","parseOptions","isObj","getContext","pages","getCurrentPages","length","Toast","toastOptions","options","context","toast","selectComponent","clear","setData","onClose","push","clearTimeout","timer","setTimeout","filter","item","console","warn","createMethod","loading","success","fail","forEach","setDefaultOptions","resetDefaultOptions","isFunction","val","isPlainObject","Array","isArray","isPromise","then","catch","isDef","value","undefined","x","isNumber","test","isBoolean","IMAGE_REGEXP","VIDEO_REGEXP","isImageUrl","url","isVideoUrl"],"mappings":"4LAAA,aACMA,EAAiB,CACnBC,KAAM,OACNC,MAAM,EACNC,QAAS,GACTC,MAAM,EACNC,OAAQ,IACRC,SAAU,IACVC,SAAU,SACVC,aAAa,EACbC,YAAa,WACbC,SAAU,cAEVC,EAAQ,GACRC,EAAiBC,OAAOC,OAAO,GAAId,GACvC,SAASe,EAAaZ,GAClB,OAAO,IAAAa,OAAMb,GAAWA,EAAU,CAAEA,WAExC,SAASc,IACL,IAAMC,EAAQC,kBACd,OAAOD,EAAMA,EAAME,OAAS,GAEhC,SAASC,EAAMC,GACX,IAAMC,EAAUV,OAAOC,OAAOD,OAAOC,OAAO,GAAIF,GAAiBG,EAAaO,IACxEE,EAAUD,EAAQC,SAAWP,IAC7BQ,EAAQD,EAAQE,gBAAgBH,EAAQb,UAC9C,GAAKe,EAqBL,cAjBOF,EAAQC,eACRD,EAAQb,SACfe,EAAME,MAAQ,WACVF,EAAMG,QAAQ,CAAExB,MAAM,IAClBmB,EAAQM,SACRN,EAAQM,WAGhBlB,EAAMmB,KAAKL,GACXA,EAAMG,QAAQL,GACdQ,aAAaN,EAAMO,OACK,MAApBT,EAAQjB,UAAoBiB,EAAQjB,SAAW,IAC/CmB,EAAMO,MAAQC,YAAW,WACrBR,EAAME,QACNhB,EAAQA,EAAMuB,QAAO,SAACC,GAAD,OAAUA,IAASV,OACzCF,EAAQjB,WAERmB,EApBHW,QAAQC,KAAK,gDAsBrB,IAAMC,EAAe,SAACrC,GAAD,OAAU,SAACsB,GAAD,OAAaF,EAAMR,OAAOC,OAAO,CAAEb,QAAQc,EAAaQ,OACvFF,EAAMkB,QAAUD,EAAa,WAC7BjB,EAAMmB,QAAUF,EAAa,WAC7BjB,EAAMoB,KAAOH,EAAa,QAC1BjB,EAAMM,MAAQ,WACVhB,EAAM+B,SAAQ,SAACjB,GACXA,EAAME,WAEVhB,EAAQ,IAEZU,EAAMsB,kBAAoB,SAACpB,GACvBV,OAAOC,OAAOF,EAAgBW,IAElCF,EAAMuB,oBAAsB,WACxBhC,EAAiBC,OAAOC,OAAO,GAAId,I,MAExBqB,E,8CChER,SAASwB,EAAWC,GACvB,MAAsB,oBAARA,EAEX,SAASC,EAAcD,GAC1B,OAAe,OAARA,GAA+B,kBAARA,IAAqBE,MAAMC,QAAQH,GAE9D,SAASI,EAAUJ,GACtB,OAAOC,EAAcD,IAAQD,EAAWC,EAAIK,OAASN,EAAWC,EAAIM,OAEjE,SAASC,EAAMC,GAClB,YAAiBC,IAAVD,GAAiC,OAAVA,EAE3B,SAAStC,EAAMwC,GAClB,IAAMvD,SAAcuD,EACpB,OAAa,OAANA,IAAwB,WAATvD,GAA8B,aAATA,GAExC,SAASwD,EAASH,GACrB,MAAO,gBAAgBI,KAAKJ,GAEzB,SAASK,EAAUL,GACtB,MAAwB,mBAAVA,E,6KAElB,IAAMM,EAAe,8CACfC,EAAe,wDACd,SAASC,EAAWC,GACvB,OAAOH,EAAaF,KAAKK,GAEtB,SAASC,EAAWD,GACvB,OAAOF,EAAaH,KAAKK","file":"page_upload/common/vendor.js","sourcesContent":["import { isObj } from '../common/validator';\r\nconst defaultOptions = {\r\n    type: 'text',\r\n    mask: false,\r\n    message: '',\r\n    show: true,\r\n    zIndex: 1000,\r\n    duration: 2000,\r\n    position: 'middle',\r\n    forbidClick: false,\r\n    loadingType: 'circular',\r\n    selector: '#van-toast',\r\n};\r\nlet queue = [];\r\nlet currentOptions = Object.assign({}, defaultOptions);\r\nfunction parseOptions(message) {\r\n    return isObj(message) ? message : { message };\r\n}\r\nfunction getContext() {\r\n    const pages = getCurrentPages();\r\n    return pages[pages.length - 1];\r\n}\r\nfunction Toast(toastOptions) {\r\n    const options = Object.assign(Object.assign({}, currentOptions), parseOptions(toastOptions));\r\n    const context = options.context || getContext();\r\n    const toast = context.selectComponent(options.selector);\r\n    if (!toast) {\r\n        console.warn('未找到 van-toast 节点，请确认 selector 及 context 是否正确');\r\n        return;\r\n    }\r\n    delete options.context;\r\n    delete options.selector;\r\n    toast.clear = () => {\r\n        toast.setData({ show: false });\r\n        if (options.onClose) {\r\n            options.onClose();\r\n        }\r\n    };\r\n    queue.push(toast);\r\n    toast.setData(options);\r\n    clearTimeout(toast.timer);\r\n    if (options.duration != null && options.duration > 0) {\r\n        toast.timer = setTimeout(() => {\r\n            toast.clear();\r\n            queue = queue.filter((item) => item !== toast);\r\n        }, options.duration);\r\n    }\r\n    return toast;\r\n}\r\nconst createMethod = (type) => (options) => Toast(Object.assign({ type }, parseOptions(options)));\r\nToast.loading = createMethod('loading');\r\nToast.success = createMethod('success');\r\nToast.fail = createMethod('fail');\r\nToast.clear = () => {\r\n    queue.forEach((toast) => {\r\n        toast.clear();\r\n    });\r\n    queue = [];\r\n};\r\nToast.setDefaultOptions = (options) => {\r\n    Object.assign(currentOptions, options);\r\n};\r\nToast.resetDefaultOptions = () => {\r\n    currentOptions = Object.assign({}, defaultOptions);\r\n};\r\nexport default Toast;\r\n","// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport function isFunction(val) {\r\n    return typeof val === 'function';\r\n}\r\nexport function isPlainObject(val) {\r\n    return val !== null && typeof val === 'object' && !Array.isArray(val);\r\n}\r\nexport function isPromise(val) {\r\n    return isPlainObject(val) && isFunction(val.then) && isFunction(val.catch);\r\n}\r\nexport function isDef(value) {\r\n    return value !== undefined && value !== null;\r\n}\r\nexport function isObj(x) {\r\n    const type = typeof x;\r\n    return x !== null && (type === 'object' || type === 'function');\r\n}\r\nexport function isNumber(value) {\r\n    return /^\\d+(\\.\\d+)?$/.test(value);\r\n}\r\nexport function isBoolean(value) {\r\n    return typeof value === 'boolean';\r\n}\r\nconst IMAGE_REGEXP = /\\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;\r\nconst VIDEO_REGEXP = /\\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv)/i;\r\nexport function isImageUrl(url) {\r\n    return IMAGE_REGEXP.test(url);\r\n}\r\nexport function isVideoUrl(url) {\r\n    return VIDEO_REGEXP.test(url);\r\n}\r\n"],"sourceRoot":""}