{"version":3,"sources":["uni-app:///components/QS-SharePoster/app.js","uni-app:///components/QS-SharePoster/QS-SharePoster.js","uni-app:///components/QS-SharePoster/QRCodeAlg.js","uni-app:///components/QS-SharePoster/image-tools.js","uni-app:///components/u-charts/checker.js","uni-app:///common/geocode-utils.js","uni-app:///common/qqmap-wx-jssdk.js"],"names":["log","console","_app","t","showLoading","msg","ifmask","uni","title","mask","hideLoading","showToast","icon","getPosterUrl","objs","backgroundImage","type","formData","Promise","rs","rj","image","shareTypeListSheetArray","array","isArray","arg","Object","prototype","toString","call","isObject","isPromise","obj","then","isNull","isUndefined","undefined","isUndef","isNotNull_string","isFn","fn","getStorage","key","scb","fcb","success","res","data","fail","setStorage","JSON","stringify","setStorageSync","getStorageSync","clearStorageSync","removeStorageSync","getImageInfo","url","cb","checkMPUrl","src","err","downloadFile","downloadFile_PromiseFc","substring","tempFilePath","saveFile","downLoadAndSaveFile_PromiseFc","d_res","s_res","savedFilePath","checkFile_PromiseFc","getSavedFileList","d","fileList","index","findIndex","item","filePath","removeSavedFile","path","fileNameInPath","s","split","length","getImageInfo_PromiseFc","imgPath","previewImage","urls","actionSheet","sheetArray","i","showActionSheet","itemList","e","tapIndex","getProvider","sheet","_this","service","provider","providers","payTypeArray","name","value","img","process","module","exports","ShreUserPosterBackgroundKey","idKey","isMp","nbgScale","getSharePoster","resolve","reject","returnPromise","result1","bgScale","Number","result2","background","posterCanvasId","reserve","textArray","drawArray","qrCodeArray","imagesArray","setCanvasWH","setCanvasToTempFilePath","setDraw","Context","delayTimeScale","drawDelayTime","createCanvasContext","width","height","bgObj","getShreUserPosterBackground","params","getBgObj","setBgObj","newBgObj","n","setImage","setText","hasAllInfoCallback","drawArrayItem","allInfoCallback","newData","drawArray_copy","sort","a","b","a_serialNum","serialNum","NEGATIVE_INFINITY","b_serialNum","item_idKey","setTimeout","drawShareImage","poster","drawImage","backgroundColor","setFillStyle","fillRect","drawText","drawQrCode","drawRoundStrokeRect","drawStrokeRect","drawFillRect","drawRoundFillRect","setObj","canvasToTempFilePathFn","x","y","destWidth","destHeight","quality","fileType","toTempFilePathObj","canvasId","canvasToTempFilePath","delayTime","forEach","text","draw","setGlobalAlpha","alpha","dx","dy","setStrokeStyle","color","setLineWidth","lineWidth","strokeRect","r","beginPath","moveTo","arcTo","closePath","stroke","fill","texts","setTextFn","textItem","String","size","textAlign","textBaseline","Math","ceil","textLength","countTextLength","infoCallBackObj","infoCallBack","setFontSize","measureText","l","j","substr","countL","countStrLength","test","images","rejcet","setImageFn","base64ToPathFn","reg","imgUrl","hasinfoCallBack","imageInfo","dWidth","dHeight","newArr","lineFeed","lineNum","maxWidth","lineHeight","chr","temp","row","len","push","allNum","str","drawTexts","setFont","font","fontStyle","fontVariant","fontWeight","fontSize","fontFamily","trim","drawTextFn","setTextAlign","setTextBaseline","fillText","lineThrough","style","cap","setLineCap","mx","my","lineTo","readyDrawImageFn","circleSet","drawCircleImage","roundRectSet","drawRoundRectImage","drawImageFn","hasAlpha","sx","sy","sWidth","sHeight","save","arc","PI","fillStyle","clip","restore","qrCodeObj","qrcodeAlgObjCache","options","foreground","pdground","correctLevel","imageSize","qrCodeAlg","QRCodeAlg","getForeGround","config","col","count","getModuleCount","ratioSize","ratioImgSize","tileW","toPrecision","tileH","w","floor","h","modules","round","drawRoundedRect","ctxi","toFixed","getShreUserPosterBackgroundFc","getPosterStorage","getStorageKey","removePosterStorage","pbg","setPosterStorage","upimage","imageObj","returnObj","unicodeFormat8","code","c0","c1","c2","getUTF8Bytes","string","utf8codes","charCodeAt","utf8","errorCorrectLevel","typeNumber","moduleCount","dataCache","rsBlocks","totalDataCount","utf8bytes","make","constructor","getRightType","createData","createQrcode","makeImpl","maskPattern","Array","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","mapData","c","minLostPoint","pattern","bestModules","lostPoint","QRUtil","getLostPoint","pos","getPatternPosition","bits","getBCHTypeNumber","mod","QRErrorCorrectLevel","getBCHTypeInfo","buffer","QRBitBuffer","lengthBits","put","putBit","PAD0","PAD1","createBytes","offset","maxDcCount","maxEcCount","rsBlock","totalCount","dataCount","dcdata","ecdata","dcCount","ecCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","getLength","modPoly","modIndex","get","inc","bitIndex","byteIndex","dark","getMask","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","Error","errorCorrectLength","multiply","QRMath","gexp","qrCode","darkCount","sameCount","head","current","ratio","abs","glog","LOG_TABLE","EXP_TABLE","num","shift","tl","el","RS_BLOCK_TABLE","lengthBytes","bufIndex","bit","getLocalFilePath","indexOf","localFilePath","plus","io","convertAbsoluteFileSystem","pathToBase64","window","FileReader","xhr","XMLHttpRequest","open","responseType","onload","status","fileReader","target","result","onerror","readAsDataURL","response","send","canvas","document","createElement","c2x","getContext","Image","toDataURL","resolveLocalFileSystemURL","entry","file","error","wx","canIUse","getFileSystemManager","readFile","encoding","base64ToPath","base64","match","atob","Uint8Array","URL","webkitURL","createObjectURL","Blob","extName","fileName","Date","now","bitmap","nativeObj","Bitmap","loadBase64Data","clear","env","USER_DATA_PATH","writeFile","replace","isJSON","parse","isNumber","checkVal"],"mappings":"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AChBsW,OAAK,EAAC,EADU;AAEhB4B,QAAM,EAAG,gBAAUzP,GAAV,EAAc;AACtB,QAAI,OAAOA,GAAP,IAAc,QAAlB,EAA4B;AAC3B,UAAI;AACH,YAAIrN,GAAG,GAACkB,IAAI,CAAC6b,KAAL,CAAW1P,GAAX,CAAR;AACA,YAAG,OAAOrN,GAAP,IAAc,QAAd,IAA0BA,GAA7B,EAAkC;AACjC,iBAAO,IAAP;AACA,SAFD,MAEK;AACJ,iBAAO,KAAP;AACA;AACD,OAPD,CAOE,OAAM8D,CAAN,EAAS;AACV7F,eAAO,CAACD,GAAR,CAAY,WAASqP,GAAT,GAAa,KAAb,GAAmBvJ,CAA/B;AACA,eAAO,KAAP;AACA;AACD;AACD,GAhBe;AAiBhBkZ,UAAQ,EAAG,kBAAUC,QAAV,EAAmB;AAC7B,QAAI7Q,GAAG,GAAG,yBAAV;AACA,WAAOA,GAAG,CAACL,IAAJ,CAASkR,QAAT,CAAP;AACA,GApBe,EAAjB,C;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,I;;;;;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4B","file":"tn_components/common/vendor.js","sourcesContent":["let log = console.log; // 如果在项目的APP.vue文件中的onlaunch中设置 console.log = ()=> {} 则在此也不会有打印信息\r\n// log = ()=>{};\t// 打开注释则该插件不会打印任何信息\r\nlet _app = {\r\n\t//交互控制\r\n\tlog(t) {\r\n\t\tlog(t);\r\n\t}, // 打印控制,\r\n\tshowLoading(msg, ifmask) {\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: msg,\r\n\t\t\tmask: ifmask || false\r\n\t\t})\r\n\t},\r\n\thideLoading() {\r\n\t\tuni.hideLoading();\r\n\t},\r\n\tshowToast(msg, icon) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: msg,\r\n\t\t\ticon: icon || 'none'\r\n\t\t})\r\n\t},\r\n\tgetPosterUrl(objs) { // 后端获取背景图的url路径方法\r\n\t\tlet {\r\n\t\t\tbackgroundImage,\r\n\t\t\ttype,\r\n\t\t\tformData\r\n\t\t} = objs;\r\n\t\treturn new Promise((rs, rj) => {\r\n\t\t\tlet image;\r\n\t\t\tif (backgroundImage) {\r\n\t\t\t\timage = backgroundImage;\r\n\t\t\t}else{\r\n\t\t\t\tswitch (type) { //根据type获取背景图, 一般要改成request获取\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\timage = '';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\timage = '/static/1.png';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (image) {\r\n\t\t\t\trs(image); // resolve图片的路径\r\n\t\t\t}else{\r\n\t\t\t\trj('背景图片路径不存在');\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t//下面一般不用动他\r\n\tshareTypeListSheetArray: {\r\n\t\tarray: [0, 1, 2, 3, 4, 5]\r\n\t}, // 分享类型 0-图文链接 1-纯文字 2-纯图片 3-音乐 4-视频 5-小程序\r\n\tisArray(arg) {\r\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\r\n\t},\r\n\tisObject(arg) {\r\n\t\treturn Object.prototype.toString.call(arg) === '[object Object]';\r\n\t},\r\n\tisPromise(obj) {\r\n\t\treturn !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\r\n\t},\r\n\tisNull(arg) {\r\n\t\treturn arg === null;\r\n\t},\r\n\tisUndefined(arg) {\r\n\t\treturn arg === undefined;\r\n\t},\r\n\tisUndef(arg) {\r\n\t\treturn arg === undefined;\r\n\t},\r\n\tisNotNull_string(arg) {\r\n\t\treturn arg !== null && arg !== undefined && arg !== '';\r\n\t},\r\n\tisFn(fn) {\r\n\t\treturn fn && typeof fn === 'function';\r\n\t},\r\n\tgetStorage(key, scb, fcb) {\r\n\t\tuni.getStorage({\r\n\t\t\tkey,\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tif (res.data && res.data != \"\") {\r\n\t\t\t\t\tif (scb) scb(res.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (fcb) fcb();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function() {\r\n\t\t\t\tif (fcb) fcb();\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tsetStorage(key, data) {\r\n\t\tlog('设置缓存')\r\n\t\tlog('key：' + key)\r\n\t\tlog('data：' + JSON.stringify(data));\r\n\t\tuni.setStorage({\r\n\t\t\tkey,\r\n\t\t\tdata\r\n\t\t})\r\n\t},\r\n\tsetStorageSync(key, data) {\r\n\t\tuni.setStorageSync(key, data);\r\n\t},\r\n\tgetStorageSync(key) {\r\n\t\treturn uni.getStorageSync(key);\r\n\t},\r\n\tclearStorageSync() {\r\n\t\tuni.clearStorageSync();\r\n\t},\r\n\tremoveStorageSync(key) {\r\n\t\tuni.removeStorageSync(key);\r\n\t},\r\n\tgetImageInfo(url, cb, fcb) {\r\n\t\turl = checkMPUrl(url);\r\n\t\tuni.getImageInfo({\r\n\t\t\tsrc: url,\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tif (cb && typeof(cb) == 'function') cb(res);\r\n\t\t\t},\r\n\t\t\tfail(err) {\r\n\t\t\t\tif (fcb && typeof(fcb) == 'function') fcb(err);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tdownloadFile(url, cb) {\r\n\t\turl = checkMPUrl(url);\r\n\t\tuni.downloadFile({\r\n\t\t\turl,\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tif (cb && typeof(cb) == 'function') cb(res);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tdownloadFile_PromiseFc(url) {\r\n\t\treturn new Promise((rs, rj) => {\r\n\t\t\tif (url.substring(0, 4) !== 'http') {\r\n\t\t\t\trs(url);\r\n\t\t\t}else {\r\n\t\t\t\turl = checkMPUrl(url);\r\n\t\t\t\tlog('url:' + url);\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (res && res.tempFilePath)\r\n\t\t\t\t\t\t\trs(res.tempFilePath);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\trj('not find tempFilePath');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\trj(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tsaveFile(url) {\r\n\t\tuni.saveFile({\r\n\t\t\ttempFilePath: url,\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tlog('保存成功:' + JSON.stringify(res))\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tdownLoadAndSaveFile_PromiseFc(url) {\r\n\t\treturn new Promise((rs, rj) => {\r\n\t\t\tlog('准备下载并保存图片:' + url);\r\n\t\t\tif (url.substring(0, 4) === 'http') {\r\n\t\t\t\turl = checkMPUrl(url);\r\n\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tsuccess(d_res) {\r\n\t\t\t\t\t\tlog('下载背景图成功：' + JSON.stringify(d_res));\r\n\t\t\t\t\t\tif (d_res && d_res.tempFilePath) {\r\n\t\t\t\t\t\t\t\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\t\t\ttempFilePath: d_res.tempFilePath,\r\n\t\t\t\t\t\t\t\tsuccess(s_res) {\r\n\t\t\t\t\t\t\t\t\tlog('保存背景图成功:' + JSON.stringify(s_res));\r\n\t\t\t\t\t\t\t\t\tif (s_res && s_res.savedFilePath)\r\n\t\t\t\t\t\t\t\t\t\trs(s_res.savedFilePath);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\trs(d_res.tempFilePath);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\t\trs(d_res.tempFilePath);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trj('not find tempFilePath');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\trj(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\trs(url);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tcheckFile_PromiseFc(url) {\r\n\t\treturn new Promise((rs, rj) => {\r\n\t\t\tuni.getSavedFileList({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tlet d = res.fileList;\r\n\t\t\t\t\tlet index = d.findIndex(item => {\r\n\t\t\t\t\t\treturn item.filePath === url;\r\n\t\t\t\t\t})\r\n\t\t\t\t\trs(index);\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\trj(err);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t},\r\n\tremoveSavedFile(path) {\r\n\t\tuni.getSavedFileList({\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tlet d = res.fileList;\r\n\t\t\t\tlet index = d.findIndex(item => {\r\n\t\t\t\t\treturn item.filePath === path;\r\n\t\t\t\t});\r\n\t\t\t\tif (index >= 0)\r\n\t\t\t\t\tuni.removeSavedFile({\r\n\t\t\t\t\t\tfilePath: path\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tfileNameInPath(path) {\r\n\t\tlet s = path.split(\"/\");\r\n\t\treturn s[s.length - 1];\r\n\t},\r\n\tgetImageInfo_PromiseFc(imgPath) {\r\n\t\treturn new Promise((rs, rj) => {\r\n\t\t\tlog('准备获取图片信息:' + imgPath);\r\n\t\t\timgPath = checkMPUrl(imgPath);\r\n\t\t\tuni.getImageInfo({\r\n\t\t\t\tsrc: imgPath,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlog('获取图片信息成功:' + JSON.stringify(res));\r\n\t\t\t\t\trs(res);\r\n\t\t\t\t},\r\n\t\t\t\tfail: err => {\r\n\t\t\t\t\tlog('获取图片信息失败:' + JSON.stringify(err));\r\n\t\t\t\t\trj(err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t},\r\n\tpreviewImage(urls) {\r\n\t\tif (typeof(urls) == 'string')\r\n\t\t\turls = [urls];\r\n\t\tuni.previewImage({\r\n\t\t\turls,\r\n\t\t})\r\n\t},\r\n\tactionSheet(obj, cb) {\r\n\t\tlet sheetArray = [];\r\n\t\tfor (let i = 0; i < obj.array.length; i++) {\r\n\t\t\tswitch (obj.array[i]) {\r\n\t\t\t\tcase 'sinaweibo':\r\n\t\t\t\t\tsheetArray[i] = '新浪微博';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'qq':\r\n\t\t\t\t\tsheetArray[i] = 'QQ';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'weixin':\r\n\t\t\t\t\tsheetArray[i] = '微信';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'WXSceneSession':\r\n\t\t\t\t\tsheetArray[i] = '微信好友';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'WXSenceTimeline':\r\n\t\t\t\t\tsheetArray[i] = '微信朋友圈';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'WXSceneFavorite':\r\n\t\t\t\t\tsheetArray[i] = '微信收藏';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tsheetArray[i] = '图文链接';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tsheetArray[i] = '纯文字';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tsheetArray[i] = '纯图片';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tsheetArray[i] = '音乐';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tsheetArray[i] = '视频';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tsheetArray[i] = '小程序';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.showActionSheet(sheetArray, cb);\r\n\t},\r\n\tshowActionSheet(sheetArray, cb) {\r\n\t\tuni.showActionSheet({\r\n\t\t\titemList: sheetArray,\r\n\t\t\tsuccess: (e) => {\r\n\t\t\t\tif (cb && typeof(cb) == 'function') cb(e.tapIndex);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tgetProvider(type, cb, sheet) {\r\n\t\tlet _this = this;\r\n\t\tuni.getProvider({\r\n\t\t\tservice: type,\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tif (sheet) {\r\n\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\tobj.array = res.provider;\r\n\t\t\t\t\t_this.actionSheet(obj, function(index) {\r\n\t\t\t\t\t\tif (cb && typeof(cb) == \"function\") cb(res.provider[index]);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (type == 'payment') {\r\n\t\t\t\t\t\tlet providers = res.provider;\r\n\t\t\t\t\t\tlet payTypeArray = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < providers.length; i++) {\r\n\t\t\t\t\t\t\tif (providers[i] == 'wxpay') {\r\n\t\t\t\t\t\t\t\tpayTypeArray[i] = {\r\n\t\t\t\t\t\t\t\t\tname: '微信支付',\r\n\t\t\t\t\t\t\t\t\tvalue: providers[i],\r\n\t\t\t\t\t\t\t\t\timg: '/static/image/wei.png'\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t} else if (providers[i] == 'alipay') {\r\n\t\t\t\t\t\t\t\tpayTypeArray[i] = {\r\n\t\t\t\t\t\t\t\t\tname: \"支付宝支付\",\r\n\t\t\t\t\t\t\t\t\tvalue: providers[i],\r\n\t\t\t\t\t\t\t\t\timg: '/static/image/ali.png'\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (cb && typeof(cb) == \"function\") cb(payTypeArray);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (cb && typeof(cb) == \"function\") cb(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t})\r\n\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nfunction checkMPUrl(url) {\r\n\r\n\tif(process.env.NODE_ENV !== 'development'){\r\n\t\tif(\r\n\t\t\turl.substring(0, 4) === 'http' && \r\n\t\t\turl.substring(0, 5) !== 'https' && \r\n\t\t\turl.substring(0, 12) !== 'http://store' && \r\n\t\t\turl.substring(0, 10) !== 'http://tmp' && \r\n\t\t\turl.substring(0, 10) !== 'http://usr'\r\n\t\t) {\r\n\t\t\turl = 'https' + url.substring(4, url.length);\r\n\t\t}\r\n\t}\r\n\r\n\treturn url;\r\n}\r\n\r\nmodule.exports = _app;\r\n","import _app from './app.js';\r\nimport QRCodeAlg from './QRCodeAlg.js';\r\nimport { base64ToPath } from './image-tools.js';\r\nconst ShreUserPosterBackgroundKey = 'ShrePosterBackground_'; // 背景图片缓存名称前缀\r\nconst idKey = 'QSSHAREPOSTER_IDKEY'; //drawArray自动生成的idkey\r\nvar isMp = false;\r\n\r\nisMp = true;\r\n\r\n\r\nvar nbgScale = 1;\r\n// export default \r\nfunction getSharePoster(obj) {\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tconst result1 = await returnPromise(obj);\r\n\t\t\tresolve(result1);\r\n\t\t} catch (e) {\r\n\t\t\t//TODO handle the exception\r\n\t\t\ttry {\r\n\t\t\t\tif(obj.bgScale) {\r\n\t\t\t\t\tobj.bgScale = Number(obj.bgScale) - 0.1\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnbgScale = nbgScale - 0.1\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('------------清除缓存后, 开始第二次尝试------------');\r\n\t\t\t\tconst result2 = await returnPromise(obj);\r\n\t\t\t\tresolve(result2);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t//TODO handle the exception\r\n\t\t\t\treject(e);\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n}\r\n\r\nfunction returnPromise(obj) {\r\n\tlet {\r\n\t\ttype,\r\n\t\tformData,\r\n\t\tbackground,\r\n\t\tposterCanvasId,\r\n\t\tbackgroundImage,\r\n\t\treserve,\r\n\t\ttextArray,\r\n\t\tdrawArray,\r\n\t\tqrCodeArray,\r\n\t\timagesArray,\r\n\t\tsetCanvasWH,\r\n\t\tsetCanvasToTempFilePath,\r\n\t\tsetDraw,\r\n\t\tbgScale,\r\n\t\tContext,\r\n\t\t_this,\r\n\t\tdelayTimeScale,\r\n\t\tdrawDelayTime\r\n\t} = obj;\r\n\treturn new Promise(async (rs, rj) => {\r\n\t\ttry {\r\n\t\t\t_app.showLoading('正在准备海报数据');\r\n\t\t\tif (!Context) {\r\n\t\t\t\t_app.log('没有画布对象,创建画布对象');\r\n\t\t\t\tContext = uni.createCanvasContext(posterCanvasId, (_this || null));\r\n\t\t\t}\r\n\t\t\tlet bgObj;\r\n\t\t\tif (background && background.width && background.height) {\r\n\t\t\t\tbgObj = background;\r\n\t\t\t} else {\r\n\t\t\t\tbgObj = await getShreUserPosterBackground({\r\n\t\t\t\t\tbackgroundImage,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\tformData\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tbgScale = bgScale || nbgScale;\r\n\t\t\tbgObj.width = bgObj.width * bgScale;\r\n\t\t\tbgObj.height = bgObj.height * bgScale;\r\n\r\n\t\t\t_app.log('获取背景图信息对象成功:' + JSON.stringify(bgObj));\r\n\t\t\tconst params = {\r\n\t\t\t\tbgObj,\r\n\t\t\t\ttype,\r\n\t\t\t\tbgScale,\r\n\t\t\t\tgetBgObj: function() {\r\n\t\t\t\t\treturn params.bgObj;\r\n\t\t\t\t},\r\n\t\t\t\tsetBgObj: function(newBgObj){\r\n\t\t\t\t\tconst n = {...params.bgObj, ...newBgObj};\r\n\t\t\t\t\tparams.bgObj = n;\r\n\t\t\t\t\tbgObj = n;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (imagesArray) {\r\n\t\t\t\tif (typeof(imagesArray) == 'function')\r\n\t\t\t\t\timagesArray = imagesArray(params);\r\n\t\t\t\t_app.showLoading('正在生成需绘制图片的临时路径');\r\n\t\t\t\t_app.log('准备设置图片');\r\n\t\t\t\timagesArray = await setImage(imagesArray);\r\n\t\t\t\t_app.hideLoading();\r\n\t\t\t}\r\n\t\t\tif (textArray) {\r\n\t\t\t\tif (typeof(textArray) == 'function')\r\n\t\t\t\t\ttextArray = textArray(params);\r\n\t\t\t\ttextArray = setText(Context, textArray);\r\n\r\n\t\t\t}\r\n\t\t\tif (qrCodeArray) {\r\n\t\t\t\tif (typeof(qrCodeArray) == 'function')\r\n\t\t\t\t\tqrCodeArray = qrCodeArray(params);\r\n\t\t\t\t_app.showLoading('正在生成需绘制图片的临时路径');\r\n\t\t\t\tfor (let i = 0; i < qrCodeArray.length; i++) {\r\n\t\t\t\t\t_app.log(i);\r\n\t\t\t\t\tif (qrCodeArray[i].image)\r\n\t\t\t\t\t\tqrCodeArray[i].image = await _app.downloadFile_PromiseFc(qrCodeArray[i].image);\r\n\t\t\t\t}\r\n\t\t\t\t_app.hideLoading();\r\n\t\t\t}\r\n\t\t\tif (drawArray) {\r\n\t\t\t\tif (typeof(drawArray) == 'function') {\r\n\t\t\t\t\tdrawArray = drawArray(params);\r\n\t\t\t\t}\r\n\t\t\t\tif (_app.isPromise(drawArray)) {\r\n\t\t\t\t\tdrawArray = await drawArray;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_app.isArray(drawArray) && drawArray.length > 0) {\r\n\t\t\t\t\tlet hasAllInfoCallback = false;\r\n\t\t\t\t\tfor (let i = 0; i < drawArray.length; i++) {\r\n\t\t\t\t\t\tconst drawArrayItem = drawArray[i];\r\n\t\t\t\t\t\tif (_app.isFn(drawArrayItem.allInfoCallback) && !hasAllInfoCallback) hasAllInfoCallback = true;\r\n\t\t\t\t\t\tdrawArrayItem[idKey] = i;\r\n\t\t\t\t\t\tlet newData;\r\n\t\t\t\t\t\tswitch (drawArrayItem.type) {\r\n\t\t\t\t\t\t\tcase 'image':\r\n\t\t\t\t\t\t\t\tnewData = await setImage(drawArrayItem);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\t\tnewData = setText(Context, drawArrayItem);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'qrcode':\r\n\t\t\t\t\t\t\t\tif (drawArrayItem.image)\r\n\t\t\t\t\t\t\t\t\tnewData = {\r\n\t\t\t\t\t\t\t\t\t\timage: await _app.downloadFile_PromiseFc(drawArrayItem.image)\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'custom':\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'fillrect':\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'strokeRect':\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'roundStrokeRect':\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'roundFillRect':\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_app.log('未识别的类型');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (newData && _app.isObject(newData)) {\r\n\t\t\t\t\t\t\tdrawArray[i] = { ...drawArrayItem,\r\n\t\t\t\t\t\t\t\t...newData\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hasAllInfoCallback) {\r\n\t\t\t\t\t\t_app.log('----------------hasAllInfoCallback----------------');\r\n\t\t\t\t\t\tconst drawArray_copy = [...drawArray];\r\n\t\t\t\t\t\tdrawArray_copy.sort((a, b) => {\r\n\t\t\t\t\t\t\tconst a_serialNum = !_app.isUndef(a.serialNum) && !_app.isNull(a.serialNum) ? Number(a.serialNum) : Number.NEGATIVE_INFINITY;\r\n\t\t\t\t\t\t\tconst b_serialNum = !_app.isUndef(b.serialNum) && !_app.isNull(b.serialNum) ? Number(b.serialNum) : Number.NEGATIVE_INFINITY;\r\n\t\t\t\t\t\t\treturn a_serialNum - b_serialNum;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_app.log('开始for循环');\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < drawArray_copy.length; i++) {\r\n\t\t\t\t\t\t\tconst item = { ...drawArray_copy[i]\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (_app.isFn(item.allInfoCallback)) {\r\n\t\t\t\t\t\t\t\tlet newData = item.allInfoCallback({\r\n\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (_app.isPromise(newData)) newData = await newData;\r\n\t\t\t\t\t\t\t\tconst item_idKey = item[idKey];\r\n\t\t\t\t\t\t\t\tif (!_app.isUndef(item_idKey)) {\r\n\t\t\t\t\t\t\t\t\tdrawArray[item[idKey]] = { ...item,\r\n\t\t\t\t\t\t\t\t\t\t...newData\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log('程序错误 找不到idKey!!!\t...这不应该啊');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_app.log('for循环结束');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconsole.log('params:' + JSON.stringify(params))\r\n\t\t\tif (setCanvasWH && typeof(setCanvasWH) == 'function') {\r\n\t\t\t\tawait new Promise((resolve, reject)=>{\r\n\t\t\t\t\tsetCanvasWH(params);\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}, 50)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tconst poster = await drawShareImage({\r\n\t\t\t\tContext,\r\n\t\t\t\ttype,\r\n\t\t\t\tposterCanvasId,\r\n\t\t\t\treserve,\r\n\t\t\t\tdrawArray,\r\n\t\t\t\ttextArray,\r\n\t\t\t\timagesArray,\r\n\t\t\t\tbgObj,\r\n\t\t\t\tqrCodeArray,\r\n\t\t\t\tsetCanvasToTempFilePath,\r\n\t\t\t\tsetDraw,\r\n\t\t\t\tbgScale,\r\n\t\t\t\t_this,\r\n\t\t\t\tdelayTimeScale,\r\n\t\t\t\tdrawDelayTime\r\n\t\t\t});\r\n\t\t\t_app.hideLoading();\r\n\t\t\trs({\r\n\t\t\t\tbgObj,\r\n\t\t\t\tposter,\r\n\t\t\t\ttype\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\t//TODO handle the exception\r\n\t\t\trj(e);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction drawShareImage(obj) { //绘制海报方法\r\n\tlet {\r\n\t\tContext,\r\n\t\ttype,\r\n\t\tposterCanvasId,\r\n\t\treserve,\r\n\t\tbgObj,\r\n\t\tdrawArray,\r\n\t\ttextArray,\r\n\t\tqrCodeArray,\r\n\t\timagesArray,\r\n\t\tsetCanvasToTempFilePath,\r\n\t\tsetDraw,\r\n\t\tbgScale,\r\n\t\t_this,\r\n\t\tdelayTimeScale,\r\n\t\tdrawDelayTime\r\n\t} = obj;\r\n\tconst params = {\r\n\t\tContext,\r\n\t\tbgObj,\r\n\t\ttype,\r\n\t\tbgScale\r\n\t};\r\n\tdelayTimeScale = delayTimeScale !== undefined ? delayTimeScale : 15;\r\n\tdrawDelayTime = drawDelayTime !== undefined ? drawDelayTime : 100;\r\n\treturn new Promise((rs, rj) => {\r\n\t\ttry {\r\n\t\t\t_app.showLoading('正在绘制海报');\r\n\t\t\t_app.log('背景对象:' + JSON.stringify(bgObj));\r\n\t\t\tif (bgObj && bgObj.path) {\r\n\t\t\t\t_app.log('背景有图片路径');\r\n\t\t\t\tContext.drawImage(bgObj.path, 0, 0, bgObj.width, bgObj.height);\r\n\t\t\t} else {\r\n\t\t\t\t_app.log('背景没有图片路径');\r\n\t\t\t\tif (bgObj.backgroundColor) {\r\n\t\t\t\t\t_app.log('背景有背景颜色:' + bgObj.backgroundColor);\r\n\t\t\t\t\tContext.setFillStyle(bgObj.backgroundColor);\r\n\t\t\t\t\tContext.fillRect(0, 0, bgObj.width, bgObj.height);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_app.log('背景没有背景颜色');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_app.showLoading('绘制图片');\r\n\t\t\tif (imagesArray && imagesArray.length > 0)\r\n\t\t\t\tdrawImage(Context, imagesArray);\r\n\r\n\t\t\t_app.showLoading('绘制自定义内容');\r\n\t\t\tif (setDraw && typeof(setDraw) == 'function') setDraw(params);\r\n\r\n\t\t\t_app.showLoading('绘制文本');\r\n\t\t\tif (textArray && textArray.length > 0)\r\n\t\t\t\tdrawText(Context, textArray, bgObj);\r\n\r\n\t\t\t_app.showLoading('绘制二维码');\r\n\t\t\tif (qrCodeArray && qrCodeArray.length > 0) {\r\n\t\t\t\tfor (let i = 0; i < qrCodeArray.length; i++) {\r\n\t\t\t\t\tdrawQrCode(Context, qrCodeArray[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_app.showLoading('绘制可控层级序列');\r\n\t\t\tif (drawArray && drawArray.length > 0) {\r\n\t\t\t\tfor (let i = 0; i < drawArray.length; i++) {\r\n\t\t\t\t\tconst drawArrayItem = drawArray[i];\r\n\t\t\t\t\t_app.log('绘制可控层级序列, drawArrayItem:' + JSON.stringify(drawArrayItem));\r\n\t\t\t\t\tswitch (drawArrayItem.type) {\r\n\t\t\t\t\t\tcase 'image':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制图片');\r\n\t\t\t\t\t\t\tdrawImage(Context, drawArrayItem);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制文本');\r\n\t\t\t\t\t\t\tdrawText(Context, drawArrayItem, bgObj);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'qrcode':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制二维码');\r\n\t\t\t\t\t\t\tdrawQrCode(Context, drawArrayItem);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'custom':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制自定义内容');\r\n\t\t\t\t\t\t\tif (drawArrayItem.setDraw && typeof drawArrayItem.setDraw === 'function')\r\n\t\t\t\t\t\t\t\tdrawArrayItem.setDraw(Context);\r\n\t\t\t\t\t\t\tbreak;drawRoundStrokeRect, drawStrokeRect\r\n\t\t\t\t\t\tcase 'fillRect':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制填充直角矩形');\r\n\t\t\t\t\t\t\tdrawFillRect(Context, drawArrayItem);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'strokeRect':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制线条直角矩形');\r\n\t\t\t\t\t\t\tdrawStrokeRect(Context, drawArrayItem);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'roundStrokeRect':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制线条圆角矩形');\r\n\t\t\t\t\t\t\tdrawRoundStrokeRect(Context, drawArrayItem);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'roundFillRect':\r\n\t\t\t\t\t\t\t_app.log('绘制可控层级序列, 绘制填充圆角矩形');\r\n\t\t\t\t\t\t\tdrawRoundFillRect(Context, drawArrayItem);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t_app.log('未识别的类型');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_app.showLoading('绘制中')\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t_app.log('准备执行draw方法')\r\n\t\t\t\t_app.log('Context:' + Context);\r\n\t\t\t\tconst fn = function(){\r\n\t\t\t\t\t_app.showLoading('正在输出图片');\r\n\t\t\t\t\tlet setObj = setCanvasToTempFilePath || {};\r\n\t\t\t\t\tif (setObj && typeof(setObj) == 'function')\r\n\t\t\t\t\t\tsetObj = setCanvasToTempFilePath(bgObj, type);\r\n\t\t\t\t\tlet canvasToTempFilePathFn;\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\twidth: Number(bgObj.width),\r\n\t\t\t\t\t\theight: Number(bgObj.height),\r\n\t\t\t\t\t\tdestWidth: Number(bgObj.width), // 若H5使用这里请不要乘以二\r\n\t\t\t\t\t\tdestHeight: Number(bgObj.height), // 若H5使用这里请不要乘以二\r\n\t\t\t\t\t\tquality: .8,\r\n\t\t\t\t\t\tfileType: 'jpg',\r\n\t\t\t\t\t\t...setObj\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log('canvasToTempFilePath的data对象:' + JSON.stringify(data));\r\n\t\t\t\t\tcanvasToTempFilePathFn = function() {\r\n\t\t\t\t\t\tconst toTempFilePathObj = { //输出为图片\r\n\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\tcanvasId: posterCanvasId,\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t_app.hideLoading();\r\n\t\t\t\t\t\t\t\trs(res);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\t_app.hideLoading();\r\n\t\t\t\t\t\t\t\tconsole.log('输出图片失败');\r\n\t\t\t\t\t\t\t\t_app.log('输出图片失败:' + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\trj('输出图片失败:' + JSON.stringify(err))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.canvasToTempFilePath(toTempFilePathObj, _this || null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet delayTime = 0;\r\n\t\t\t\t\tif (qrCodeArray) {\r\n\t\t\t\t\t\tqrCodeArray.forEach(item => {\r\n\t\t\t\t\t\t\tif (item.text) {\r\n\t\t\t\t\t\t\t\tdelayTime += Number(item.text.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (imagesArray) {\r\n\t\t\t\t\t\timagesArray.forEach(() => {\r\n\t\t\t\t\t\t\tdelayTime += delayTimeScale;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (textArray) {\r\n\t\t\t\t\t\ttextArray.forEach(() => {\r\n\t\t\t\t\t\t\tdelayTime += delayTimeScale;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (drawArray) {\r\n\t\t\t\t\t\tdrawArray.forEach(item => {\r\n\t\t\t\t\t\t\tswitch (item.type) {\r\n\t\t\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\t\t\tif (item.text) {\r\n\t\t\t\t\t\t\t\t\t\tdelayTime += item.text.length;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tdelayTime += delayTimeScale;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_app.log('延时系数:' + delayTimeScale);\r\n\t\t\t\t\t_app.log('总计延时:' + delayTime);\r\n\t\t\t\t\tsetTimeout(canvasToTempFilePathFn, delayTime);\r\n\t\t\t\t}\r\n\t\t\t\tContext.draw((typeof(reserve) == 'boolean' ? reserve : false), fn);\r\n\t\t\t}, drawDelayTime);\r\n\t\t} catch (e) {\r\n\t\t\t//TODO handle the exception\r\n\t\t\t_app.hideLoading();\r\n\t\t\trj(e);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// export\r\nfunction drawFillRect(Context, drawArrayItem = {}) {\t//填充矩形\r\n\t_app.log('进入绘制填充直角矩形方法, drawArrayItem:' + JSON.stringify(drawArrayItem));\r\n\tContext.setFillStyle(drawArrayItem.backgroundColor || 'black');\r\n\tContext.setGlobalAlpha(drawArrayItem.alpha || 1);\r\n\tContext.fillRect(drawArrayItem.dx || 0, drawArrayItem.dy || 0, drawArrayItem.width || 0, drawArrayItem.height || 0);\r\n\tContext.setGlobalAlpha(1);\r\n}\r\n\r\n// export\r\nfunction drawStrokeRect(Context, drawArrayItem = {}) {\t//线条矩形\r\n\tContext.setStrokeStyle(drawArrayItem.color||'black');\r\n\tContext.setLineWidth(drawArrayItem.lineWidth || 1);\r\n\tContext.strokeRect(drawArrayItem.dx, drawArrayItem.dy, drawArrayItem.width, drawArrayItem.height);\r\n}\r\n\r\n// export\r\nfunction drawRoundStrokeRect(Context, drawArrayItem = {}) {\r\n\tlet { dx, dy, width, height, r, lineWidth, color } = drawArrayItem;\r\n\tr = r || width * .1;\r\n\r\n\tif (width < 2 * r) {\r\n\t\tr = width / 2;\r\n\t}\r\n\tif (width < 2 * r) {\r\n\t\tr = width / 2;\r\n\t}\r\n\tContext.beginPath();\r\n\tContext.moveTo(dx + r, dy);\r\n\tContext.arcTo(dx + width, dy, dx + width, dy + height, r);\r\n\tContext.arcTo(dx + width, dy + height, dx, dy + height, r);\r\n\tContext.arcTo(dx, dy + height, dx, dy, r);\r\n\tContext.arcTo(dx, dy, dx + width, dy, r);\r\n\tContext.closePath();\r\n\tContext.setLineWidth(lineWidth || 1);\r\n\tContext.setStrokeStyle(color || 'black');\r\n\tContext.stroke();\r\n}\r\n\r\n// export\r\nfunction drawRoundFillRect(Context, drawArrayItem = {}) {\r\n\tlet { dx, dy, width, height, r, backgroundColor } = drawArrayItem;\r\n\tr = r || width * .1;\r\n\r\n\tif (width < 2 * r) {\r\n\t\tr = width / 2;\r\n\t}\r\n\tif (width < 2 * r) {\r\n\t\tr = width / 2;\r\n\t}\r\n\tContext.beginPath();\r\n\tContext.moveTo(dx + r, dy);\r\n\tContext.arcTo(dx + width, dy, dx + width, dy + height, r);\r\n\tContext.arcTo(dx + width, dy + height, dx, dy + height, r);\r\n\tContext.arcTo(dx, dy + height, dx, dy, r);\r\n\tContext.arcTo(dx, dy, dx + width, dy, r);\r\n\tContext.closePath();\r\n\tContext.setFillStyle(backgroundColor);\r\n\tContext.fill();\r\n}\r\n\r\n// export \r\nfunction setText(Context, texts) { // 设置文本数据\r\n\t_app.log('进入设置文字方法, texts:' + JSON.stringify(texts));\r\n\tif (texts && _app.isArray(texts)) {\r\n\t\t_app.log('texts是数组');\r\n\t\tif (texts.length > 0) {\r\n\t\t\tfor (let i = 0; i < texts.length; i++) {\r\n\t\t\t\t_app.log('字符串信息-初始化之前:' + JSON.stringify(texts[i]));\r\n\t\t\t\ttexts[i] = setTextFn(Context, texts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\t_app.log('texts是对象');\r\n\t\ttexts = setTextFn(Context, texts);\r\n\t}\r\n\t_app.log('返回texts:' + JSON.stringify(texts));\r\n\treturn texts;\r\n}\r\n\r\nfunction setTextFn(Context, textItem) {\r\n\t_app.log('进入设置文字方法, textItem:' + JSON.stringify(textItem));\r\n\tif (_app.isNotNull_string(textItem.text)) {\r\n\t\ttextItem.text = String(textItem.text);\r\n\t\ttextItem.alpha = textItem.alpha !== undefined ? Number(textItem.alpha) : 1;\r\n\t\ttextItem.color = textItem.color || 'black';\r\n\t\ttextItem.size = textItem.size !== undefined ? Number(textItem.size) : 10;\r\n\t\ttextItem.textAlign = textItem.textAlign || 'left';\r\n\t\ttextItem.textBaseline = textItem.textBaseline || 'middle';\r\n\t\ttextItem.dx = Number(textItem.dx) || 0;\r\n\t\ttextItem.dy = Number(textItem.dy) || 0;\r\n\t\ttextItem.size = Math.ceil(Number(textItem.size));\r\n\t\t_app.log('字符串信息-初始化默认值后:' + JSON.stringify(textItem));\r\n\t\tconst textLength = countTextLength(Context, {\r\n\t\t\ttext: textItem.text,\r\n\t\t\tsize: textItem.size\r\n\t\t});\r\n\t\t_app.log('字符串信息-初始化时的文本长度:' + textLength);\r\n\t\tlet infoCallBackObj = {};\r\n\t\tif (textItem.infoCallBack && typeof(textItem.infoCallBack) === 'function') {\r\n\t\t\tinfoCallBackObj = textItem.infoCallBack(textLength);\r\n\t\t}\r\n\t\ttextItem = {\r\n\t\t\t...textItem,\r\n\t\t\ttextLength,\r\n\t\t\t...infoCallBackObj\r\n\t\t}\r\n\t\t_app.log('字符串信息-infoCallBack后:' + JSON.stringify(textItem));\r\n\t}\r\n\treturn textItem;\r\n}\r\n\r\nfunction countTextLength(Context, obj) {\r\n\t_app.log('计算文字长度, obj:' + JSON.stringify(obj));\r\n\tconst {\r\n\t\ttext,\r\n\t\tsize\r\n\t} = obj;\r\n\tContext.setFontSize(size);\r\n\tlet textLength;\r\n\ttry{\r\n\t\ttextLength = Context.measureText(text); // 官方文档说 App端自定义组件编译模式暂时不可用measureText方法\r\n\t}catch(e){\r\n\t\t//TODO handle the exception\r\n\t\ttextLength = {};\r\n\t}\r\n\ttextLength = {};\r\n\t_app.log('measureText计算文字长度, textLength:' + JSON.stringify(textLength));\r\n\ttextLength = textLength && textLength.width ? textLength.width : 0;\r\n\tif (!textLength) {\r\n\t\tlet l = 0;\r\n\t\tfor (let j = 0; j < text.length; j++) {\r\n\t\t\tlet t = text.substr(j, 1);\r\n\t\t\tconst countL = countStrLength(t);\r\n\t\t\t_app.log('计算文字宽度系数:' + countL);\r\n\t\t\tl += countL;\r\n\t\t}\r\n\t\t_app.log('文字宽度总系数:' + l);\r\n\t\ttextLength = l * size;\r\n\t}\r\n\treturn textLength;\r\n}\r\n\r\n//计算字符长度系数\r\nfunction countStrLength(t) {\r\n\tlet l;\r\n\tif (/a/.test(t)) {\r\n\t\tl = 0.552734375\r\n\t} else if (/b/.test(t)) {\r\n\t\tl = 0.638671875\r\n\t} else if (/c/.test(t)) {\r\n\t\tl = 0.50146484375\r\n\t} else if (/d/.test(t)) {\r\n\t\tl = 0.6396484375\r\n\t} else if (/e/.test(t)) {\r\n\t\tl = 0.5673828125\r\n\t} else if (/f/.test(t)) {\r\n\t\tl = 0.3466796875\r\n\t} else if (/g/.test(t)) {\r\n\t\tl = 0.6396484375\r\n\t} else if (/h/.test(t)) {\r\n\t\tl = 0.61572265625\r\n\t} else if (/i/.test(t)) {\r\n\t\tl = 0.26611328125\r\n\t} else if (/j/.test(t)) {\r\n\t\tl = 0.26708984375\r\n\t} else if (/k/.test(t)) {\r\n\t\tl = 0.54443359375\r\n\t} else if (/l/.test(t)) {\r\n\t\tl = 0.26611328125\r\n\t} else if (/m/.test(t)) {\r\n\t\tl = 0.93701171875\r\n\t} else if (/n/.test(t)) {\r\n\t\tl = 0.6162109375\r\n\t} else if (/o/.test(t)) {\r\n\t\tl = 0.6357421875\r\n\t} else if (/p/.test(t)) {\r\n\t\tl = 0.638671875\r\n\t} else if (/q/.test(t)) {\r\n\t\tl = 0.6396484375\r\n\t} else if (/r/.test(t)) {\r\n\t\tl = 0.3818359375\r\n\t} else if (/s/.test(t)) {\r\n\t\tl = 0.462890625\r\n\t} else if (/t/.test(t)) {\r\n\t\tl = 0.37255859375\r\n\t} else if (/u/.test(t)) {\r\n\t\tl = 0.6162109375\r\n\t} else if (/v/.test(t)) {\r\n\t\tl = 0.52490234375\r\n\t} else if (/w/.test(t)) {\r\n\t\tl = 0.78955078125\r\n\t} else if (/x/.test(t)) {\r\n\t\tl = 0.5068359375\r\n\t} else if (/y/.test(t)) {\r\n\t\tl = 0.529296875\r\n\t} else if (/z/.test(t)) {\r\n\t\tl = 0.49169921875\r\n\t} else if (/A/.test(t)) {\r\n\t\tl = 0.70361328125\r\n\t} else if (/B/.test(t)) {\r\n\t\tl = 0.62744140625\r\n\t} else if (/C/.test(t)) {\r\n\t\tl = 0.6689453125\r\n\t} else if (/D/.test(t)) {\r\n\t\tl = 0.76171875\r\n\t} else if (/E/.test(t)) {\r\n\t\tl = 0.5498046875\r\n\t} else if (/F/.test(t)) {\r\n\t\tl = 0.53125\r\n\t} else if (/G/.test(t)) {\r\n\t\tl = 0.74365234375\r\n\t} else if (/H/.test(t)) {\r\n\t\tl = 0.7734375\r\n\t} else if (/I/.test(t)) {\r\n\t\tl = 0.2939453125\r\n\t} else if (/J/.test(t)) {\r\n\t\tl = 0.39599609375\r\n\t} else if (/K/.test(t)) {\r\n\t\tl = 0.634765625\r\n\t} else if (/L/.test(t)) {\r\n\t\tl = 0.51318359375\r\n\t} else if (/M/.test(t)) {\r\n\t\tl = 0.97705078125\r\n\t} else if (/N/.test(t)) {\r\n\t\tl = 0.81298828125\r\n\t} else if (/O/.test(t)) {\r\n\t\tl = 0.81494140625\r\n\t} else if (/P/.test(t)) {\r\n\t\tl = 0.61181640625\r\n\t} else if (/Q/.test(t)) {\r\n\t\tl = 0.81494140625\r\n\t} else if (/R/.test(t)) {\r\n\t\tl = 0.65283203125\r\n\t} else if (/S/.test(t)) {\r\n\t\tl = 0.5771484375\r\n\t} else if (/T/.test(t)) {\r\n\t\tl = 0.5732421875\r\n\t} else if (/U/.test(t)) {\r\n\t\tl = 0.74658203125\r\n\t} else if (/V/.test(t)) {\r\n\t\tl = 0.67626953125\r\n\t} else if (/W/.test(t)) {\r\n\t\tl = 1.017578125\r\n\t} else if (/X/.test(t)) {\r\n\t\tl = 0.64501953125\r\n\t} else if (/Y/.test(t)) {\r\n\t\tl = 0.603515625\r\n\t} else if (/Z/.test(t)) {\r\n\t\tl = 0.6201171875\r\n\t} else if (/[0-9]/.test(t)) {\r\n\t\tl = 0.58642578125\r\n\t} else if (/[\\u4e00-\\u9fa5]/.test(t)) {\r\n\t\tl = 1\r\n\t} else if (/ /.test(t)) {\r\n\t\tl = 0.2958984375\r\n\t} else if (/\\`/.test(t)) {\r\n\t\tl = 0.294921875\r\n\t} else if (/\\~/.test(t)) {\r\n\t\tl = 0.74169921875\r\n\t} else if (/\\!/.test(t)) {\r\n\t\tl = 0.3125\r\n\t} else if (/\\@/.test(t)) {\r\n\t\tl = 1.03125\r\n\t} else if (/\\#/.test(t)) {\r\n\t\tl = 0.63818359375\r\n\t} else if (/\\$/.test(t)) {\r\n\t\tl = 0.58642578125\r\n\t} else if (/\\%/.test(t)) {\r\n\t\tl = 0.8896484375\r\n\t} else if (/\\^/.test(t)) {\r\n\t\tl = 0.74169921875\r\n\t} else if (/\\&/.test(t)) {\r\n\t\tl = 0.8701171875\r\n\t} else if (/\\*/.test(t)) {\r\n\t\tl = 0.455078125\r\n\t} else if (/\\(/.test(t)) {\r\n\t\tl = 0.333984375\r\n\t} else if (/\\)/.test(t)) {\r\n\t\tl = 0.333984375\r\n\t} else if (/\\_/.test(t)) {\r\n\t\tl = 0.4482421875\r\n\t} else if (/\\-/.test(t)) {\r\n\t\tl = 0.4326171875\r\n\t} else if (/\\+/.test(t)) {\r\n\t\tl = 0.74169921875\r\n\t} else if (/\\=/.test(t)) {\r\n\t\tl = 0.74169921875\r\n\t} else if (/\\|/.test(t)) {\r\n\t\tl = 0.26904296875\r\n\t} else if (/\\\\/.test(t)) {\r\n\t\tl = 0.416015625\r\n\t} else if (/\\[/.test(t)) {\r\n\t\tl = 0.333984375\r\n\t} else if (/\\]/.test(t)) {\r\n\t\tl = 0.333984375\r\n\t} else if (/\\;/.test(t)) {\r\n\t\tl = 0.24072265625\r\n\t} else if (/\\'/.test(t)) {\r\n\t\tl = 0.25634765625\r\n\t} else if (/\\,/.test(t)) {\r\n\t\tl = 0.24072265625\r\n\t} else if (/\\./.test(t)) {\r\n\t\tl = 0.24072265625\r\n\t} else if (/\\//.test(t)) {\r\n\t\tl = 0.42724609375\r\n\t} else if (/\\{/.test(t)) {\r\n\t\tl = 0.333984375\r\n\t} else if (/\\}/.test(t)) {\r\n\t\tl = 0.333984375\r\n\t} else if (/\\:/.test(t)) {\r\n\t\tl = 0.24072265625\r\n\t} else if (/\\\"/.test(t)) {\r\n\t\tl = 0.435546875\r\n\t} else if (/\\</.test(t)) {\r\n\t\tl = 0.74169921875\r\n\t} else if (/\\>/.test(t)) {\r\n\t\tl = 0.74169921875\r\n\t} else if (/\\?/.test(t)) {\r\n\t\tl = 0.48291015625\r\n\t} else {\r\n\t\tl = 1\r\n\t}\r\n\treturn l;\r\n}\r\n\r\n// export \r\nfunction setImage(images) { // 设置图片数据\r\n\t_app.log('进入设置图片数据方法');\r\n\treturn new Promise(async (resolve, rejcet) => {\r\n\t\ttry {\r\n\t\t\tif (images && _app.isArray(images)) {\r\n\t\t\t\t_app.log('images是一个数组');\r\n\t\t\t\tfor (let i = 0; i < images.length; i++) {\r\n\t\t\t\t\t_app.log('设置图片数据循环中:' + i);\r\n\t\t\t\t\timages[i] = await setImageFn(images[i]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t_app.log('images是一个对象');\r\n\t\t\t\timages = await setImageFn(images);\r\n\t\t\t}\r\n\t\t\tresolve(images);\r\n\t\t} catch (e) {\r\n\t\t\t//TODO handle the exception\r\n\t\t\trejcet(e);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction base64ToPathFn(path) {\r\n\tvar reg = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*?)\\s*$/i;\r\n\tif(!reg.test(path)){\r\n\t  return Promise.resolve(path);\r\n\t}\r\n\treturn base64ToPath(path);\r\n}\r\n\r\nfunction setImageFn(image) {\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\tif (image.url) {\r\n\t\t\timage.url = (await base64ToPathFn(image.url));\r\n\t\t\tlet imgUrl = image.url;\r\n\t\t\timgUrl = await _app.downloadFile_PromiseFc(imgUrl);\r\n\t\t\timage.url = imgUrl;\r\n\t\t\tconst hasinfoCallBack = image.infoCallBack && typeof(image.infoCallBack) === 'function';\r\n\t\t\tlet imageInfo = {};\r\n\t\t\timageInfo = await _app.getImageInfo_PromiseFc(imgUrl);\r\n\t\t\tif (hasinfoCallBack) {\r\n\t\t\t\timage = {\r\n\t\t\t\t\t...image,\r\n\t\t\t\t\t...image.infoCallBack(imageInfo)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\timage.dx = Number(image.dx) || 0;\r\n\t\t\timage.dy = Number(image.dy) || 0;\r\n\t\t\timage.dWidth = Number(image.dWidth || imageInfo.width);\r\n\t\t\timage.dHeight = Number(image.dHeight || imageInfo.height);\r\n\t\t\timage = {\r\n\t\t\t\t...image,\r\n\t\t\t\timageInfo\r\n\t\t\t}\r\n\t\t}\r\n\t\tresolve(image);\r\n\t})\r\n}\r\n\r\n// export \r\nfunction drawText(Context, textArray, bgObj) { // 先遍历换行再绘制\r\n\tif (!_app.isArray(textArray)) {\r\n\t\t_app.log('遍历文本方法, 不是数组');\r\n\t\ttextArray = [textArray];\r\n\t} else {\r\n\t\t_app.log('遍历文本方法, 是数组');\r\n\t}\r\n\t_app.log('遍历文本方法, textArray:' + JSON.stringify(textArray));\r\n\tconst newArr = [];\r\n\tif (textArray && textArray.length > 0) {\r\n\t\tfor (let j = 0; j < textArray.length; j++) {\r\n\t\t\tconst textItem = textArray[j];\r\n\t\t\tif (textItem.text && textItem.lineFeed) {\r\n\t\t\t\tlet lineNum = -1,\r\n\t\t\t\t\tmaxWidth = bgObj.width,\r\n\t\t\t\t\tlineHeight = textItem.size,\r\n\t\t\t\t\tdx = textItem.dx;\r\n\t\t\t\tif (_app.isObject(textItem.lineFeed)) {\r\n\t\t\t\t\tconst lineFeed = textItem.lineFeed;\r\n\t\t\t\t\tlineNum = (lineFeed.lineNum !== undefined && typeof(lineFeed.lineNum) === 'number') && lineFeed.lineNum >= 0 ?\r\n\t\t\t\t\t\tlineFeed.lineNum : lineNum;\r\n\t\t\t\t\tmaxWidth = (lineFeed.maxWidth !== undefined && typeof(lineFeed.maxWidth) === 'number') ? lineFeed.maxWidth :\r\n\t\t\t\t\t\tmaxWidth;\r\n\t\t\t\t\tlineHeight = (lineFeed.lineHeight !== undefined && typeof(lineFeed.lineHeight) === 'number') ? lineFeed.lineHeight :\r\n\t\t\t\t\t\tlineHeight;\r\n\t\t\t\t\tdx = (lineFeed.dx !== undefined && typeof(lineFeed.dx) === 'number') ? lineFeed.dx : dx;\r\n\t\t\t\t}\r\n\t\t\t\tconst chr = (textItem.text).split(\"\");\r\n\t\t\t\tlet temp = \"\";\r\n\t\t\t\tconst row = [];\r\n\t\t\t\t//循环出几行文字组成数组\r\n\t\t\t\tfor (let a = 0, len = chr.length; a < len; a++) {\r\n\t\t\t\t\tif (countTextLength(Context, {\r\n\t\t\t\t\t\t\ttext: temp,\r\n\t\t\t\t\t\t\tsize: textItem.size\r\n\t\t\t\t\t\t}) <= maxWidth && countTextLength(Context, {\r\n\t\t\t\t\t\t\ttext: (temp + chr[a]),\r\n\t\t\t\t\t\t\tsize: textItem.size\r\n\t\t\t\t\t\t}) <= maxWidth) {\r\n\t\t\t\t\t\ttemp += chr[a];\r\n\t\t\t\t\t\tif (a == (chr.length - 1)) {\r\n\t\t\t\t\t\t\trow.push(temp);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trow.push(temp);\r\n\t\t\t\t\t\ttemp = chr[a];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t_app.log('循环出的文本数组:' + JSON.stringify(row));\r\n\t\t\t\t//只显示几行 变量间距lineHeight  变量行数lineNum\r\n\t\t\t\tlet allNum = (lineNum >= 0 && lineNum < row.length) ? lineNum : row.length;\r\n\r\n\t\t\t\tfor (let i = 0; i < allNum; i++) {\r\n\t\t\t\t\tlet str = row[i];\r\n\t\t\t\t\tif (i == (allNum - 1) && allNum < row.length) {\r\n\t\t\t\t\t\tstr = str.substring(0, str.length - 1) + '...';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst obj = { ...textItem,\r\n\t\t\t\t\t\ttext: str,\r\n\t\t\t\t\t\tdx: i === 0 ? textItem.dx : (dx >= 0 ? dx : textItem.dx),\r\n\t\t\t\t\t\tdy: textItem.dy + (i * lineHeight),\r\n\t\t\t\t\t\ttextLength: countTextLength(Context, {\r\n\t\t\t\t\t\t\ttext: str,\r\n\t\t\t\t\t\t\tsize: textItem.size\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_app.log('重新组成的文本对象:' + JSON.stringify(obj));\r\n\t\t\t\t\tnewArr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnewArr.push(textItem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t_app.log('绘制文本新数组:' + JSON.stringify(newArr));\r\n\tdrawTexts(Context, newArr);\r\n}\r\n\r\nfunction setFont(textItem = {}) {\r\n\tif (textItem.font && typeof(textItem.font) === 'string') {\r\n\t\t_app.log(textItem.font)\r\n\t\treturn textItem.font;\r\n\t} else {\r\n\t\tlet fontStyle = 'normal';\r\n\t\tlet fontVariant = 'normal';\r\n\t\tlet fontWeight = 'normal';\r\n\t\tlet fontSize = textItem.size || 10;\r\n\t\tlet fontFamily = 'sans-serif';\r\n\t\tfontSize = Math.ceil(Number(fontSize));\r\n\t\tif (textItem.fontStyle && typeof(textItem.fontStyle) === 'string')\r\n\t\t\tfontStyle = textItem.fontStyle.trim();\r\n\t\tif (textItem.fontVariant && typeof(textItem.fontVariant) === 'string')\r\n\t\t\tfontVariant = textItem.fontVariant.trim();\r\n\t\tif (textItem.fontWeight && (typeof(textItem.fontWeight) === 'string' || typeof(textItem.fontWeight) === 'number'))\r\n\t\t\tfontWeight = textItem.fontWeight.trim();\r\n\t\tif (textItem.fontFamily && typeof(textItem.fontFamily) === 'string')\r\n\t\t\tfontFamily = textItem.fontFamily.trim();\r\n\t\treturn fontStyle + ' ' +\r\n\t\t\tfontVariant + ' ' +\r\n\t\t\tfontWeight + ' ' +\r\n\t\t\tfontSize + 'px' + ' ' +\r\n\t\t\tfontFamily;\r\n\t}\r\n}\r\n\r\nfunction drawTexts(Context, texts) { // 绘制文本\r\n\t_app.log('准备绘制文本方法, texts:' + JSON.stringify(texts));\r\n\tif (texts && _app.isArray(texts)) {\r\n\t\t_app.log('准备绘制文本方法, 是数组');\r\n\t\tif (texts.length > 0) {\r\n\t\t\tfor (let i = 0; i < texts.length; i++) {\r\n\t\t\t\tdrawTextFn(Context, texts[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\t_app.log('准备绘制文本方法, 不是数组');\r\n\t\tdrawTextFn(Context, texts);\r\n\t}\r\n}\r\n\r\nfunction drawTextFn(Context, textItem) {\r\n\t_app.log('进入绘制文本方法, textItem:' + JSON.stringify(textItem));\r\n\tif (textItem && _app.isObject(textItem) && textItem.text) {\r\n\t\tContext.font = setFont(textItem);\r\n\t\tContext.setFillStyle(textItem.color);\r\n\t\tContext.setGlobalAlpha(textItem.alpha);\r\n\t\tContext.setTextAlign(textItem.textAlign);\r\n\t\tContext.setTextBaseline(textItem.textBaseline);\r\n\t\tContext.fillText(textItem.text, textItem.dx, textItem.dy);\r\n\t\tif (textItem.lineThrough && _app.isObject(textItem.lineThrough)) {\r\n\t\t\t_app.log('有删除线');\r\n\t\t\tlet lineThrough = textItem.lineThrough;\r\n\t\t\tlineThrough.alpha = lineThrough.alpha !== undefined ? lineThrough.alpha : textItem.alpha;\r\n\t\t\tlineThrough.style = lineThrough.style || textItem.color;\r\n\t\t\tlineThrough.width = lineThrough.width !== undefined ? lineThrough.width : textItem.size / 10;\r\n\t\t\tlineThrough.cap = lineThrough.cap !== undefined ? lineThrough.cap : 'butt';\r\n\t\t\t_app.log('删除线对象:' + JSON.stringify(lineThrough));\r\n\t\t\tContext.setGlobalAlpha(lineThrough.alpha);\r\n\t\t\tContext.setStrokeStyle(lineThrough.style);\r\n\t\t\tContext.setLineWidth(lineThrough.width);\r\n\t\t\tContext.setLineCap(lineThrough.cap);\r\n\t\t\tlet mx, my;\r\n\t\t\tswitch (textItem.textAlign) {\r\n\t\t\t\tcase 'left':\r\n\t\t\t\t\tmx = textItem.dx;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'center':\r\n\t\t\t\t\tmx = textItem.dx - (textItem.textLength) / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tmx = textItem.dx - (textItem.textLength);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tswitch (textItem.textBaseline) {\r\n\t\t\t\tcase 'top':\r\n\t\t\t\t\tmy = textItem.dy + (textItem.size * .5);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'middle':\r\n\t\t\t\t\tmy = textItem.dy;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tmy = textItem.dy - (textItem.size * .5);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tContext.beginPath();\r\n\t\t\tContext.moveTo(mx, my);\r\n\t\t\tContext.lineTo(mx + textItem.textLength, my);\r\n\t\t\tContext.stroke();\r\n\t\t\tContext.closePath();\r\n\t\t\t_app.log('删除线完毕');\r\n\t\t}\r\n\t\tContext.setGlobalAlpha(1);\r\n\t\tContext.font = '10px sans-serif';\r\n\t}\r\n}\r\n// export \r\nfunction drawImage(Context, images) { // 绘制图片\r\n\t_app.log('判断图片数据类型:' + JSON.stringify(images))\r\n\tif (images && _app.isArray(images)) {\r\n\t\tif (images.length > 0) {\r\n\t\t\tfor (let i = 0; i < images.length; i++) {\r\n\t\t\t\treadyDrawImageFn(Context, images[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\treadyDrawImageFn(Context, images);\r\n\t}\r\n\r\n}\r\n\r\nfunction readyDrawImageFn(Context, img) {\r\n\t_app.log('判断绘制图片形状, img:' + JSON.stringify(img));\r\n\tif (img.url) {\r\n\t\tif (img.circleSet) {\r\n\t\t\tdrawCircleImage(Context, img);\r\n\t\t} else if (img.roundRectSet) {\r\n\t\t\tdrawRoundRectImage(Context, img);\r\n\t\t} else {\r\n\t\t\tdrawImageFn(Context, img);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction drawImageFn(Context, img) {\r\n\t_app.log('进入绘制默认图片方法, img:' + JSON.stringify(img));\r\n\tif (img.url) {\r\n\t\tconst hasAlpha = !_app.isUndef(img.alpha);\r\n\t\timg.alpha = Number(!_app.isUndef(img.alpha) ? img.alpha : 1);\r\n\t\tContext.setGlobalAlpha(img.alpha);\r\n\t\t_app.log('绘制默认图片方法, 有url');\r\n\t\tif (img.dWidth && img.dHeight && img.sx && img.sy && img.sWidth && img.sHeight) {\r\n\t\t\t_app.log('绘制默认图片方法, 绘制第一种方案');\r\n\t\t\tContext.drawImage(img.url, \r\n\t\t\tNumber(img.sx) || false, Number(img.sy) || false, \r\n\t\t\tNumber(img.sWidth) || false, Number(img.sHeight) || false,\r\n\t\t\tNumber(img.dx || 0), Number(img.dy || 0),\r\n\t\t\tNumber(img.dWidth) || false, Number(img.dHeight) || false,);\r\n\t\t} else if (img.dWidth && img.dHeight) {\r\n\t\t\t_app.log('绘制默认图片方法, 绘制第二种方案');\r\n\t\t\tContext.drawImage(img.url, Number(img.dx || 0), Number(img.dy || 0),\r\n\t\t\t\tNumber(img.dWidth) || false, Number(img.dHeight) || false);\r\n\t\t} else {\r\n\t\t\t_app.log('绘制默认图片方法, 绘制第三种方案');\r\n\t\t\tContext.drawImage(img.url, Number(img.dx || 0), Number(img.dy || 0));\r\n\t\t}\r\n\t\tif (hasAlpha) {\r\n\t\t\tContext.setGlobalAlpha(1);\r\n\t\t}\r\n\t}\r\n\t_app.log('绘制默认图片方法, 绘制完毕');\r\n}\r\n\r\nfunction drawCircleImage(Context, obj) {\r\n\t_app.log('进入绘制圆形图片方法, obj:' + JSON.stringify(obj));\r\n\tlet {\r\n\t\tdx,\r\n\t\tdy,\r\n\t\tdWidth,\r\n\t\tdHeight,\r\n\t\tcircleSet,\r\n\t\timageInfo\r\n\t} = obj;\r\n\tlet x, y, r;\r\n\tif (typeof circleSet === 'object') {\r\n\t\tx = circleSet.x;\r\n\t\ty = circleSet.y;\r\n\t\tr = circleSet.r;\r\n\t}\r\n\tif (!r) {\r\n\t\tlet d;\r\n\t\td = dWidth > dHeight ? dHeight : dWidth;\r\n\t\tr = d / 2;\r\n\t}\r\n\r\n\tx = x ? dx + x : (dx || 0) + r;\r\n\ty = y ? dy + y : (dy || 0) + r;\r\n\tContext.save();\r\n\tContext.beginPath();\r\n\tContext.arc(x, y, r, 0, 2 * Math.PI, false);\r\n\tContext.closePath();\r\n\tContext.setGlobalAlpha(0);\r\n\tContext.fillStyle = '#FFFFFF';\r\n\tContext.fill();\r\n\tContext.setGlobalAlpha(1);\r\n\tContext.clip();\r\n\tdrawImageFn(Context, obj);\r\n\t_app.log('默认图片绘制完毕');\r\n\tContext.restore();\r\n}\r\n\r\nfunction drawRoundRectImage(Context, obj) { // 绘制矩形\r\n\t_app.log('进入绘制矩形图片方法, obj:' + JSON.stringify(obj));\r\n\tContext.save();\r\n\tlet {\r\n\t\tdx,\r\n\t\tdy,\r\n\t\tdWidth,\r\n\t\tdHeight,\r\n\t\troundRectSet,\r\n\t\timageInfo\r\n\t} = obj;\r\n\tlet r;\r\n\tif (typeof roundRectSet === 'object') {\r\n\t\tr = roundRectSet.r;\r\n\t}\r\n\tr = r || dWidth * .1;\r\n\r\n\tif (dWidth < 2 * r) {\r\n\t\tr = dWidth / 2;\r\n\t}\r\n\tif (dHeight < 2 * r) {\r\n\t\tr = dHeight / 2;\r\n\t}\r\n\tContext.beginPath();\r\n\tContext.moveTo(dx + r, dy);\r\n\tContext.arcTo(dx + dWidth, dy, dx + dWidth, dy + dHeight, r);\r\n\tContext.arcTo(dx + dWidth, dy + dHeight, dx, dy + dHeight, r);\r\n\tContext.arcTo(dx, dy + dHeight, dx, dy, r);\r\n\tContext.arcTo(dx, dy, dx + dWidth, dy, r);\r\n\tContext.closePath();\r\n\tContext.setGlobalAlpha(0);\r\n\tContext.fillStyle = '#FFFFFF';\r\n\tContext.fill();\r\n\tContext.setGlobalAlpha(1);\r\n\tContext.clip();\r\n\tdrawImageFn(Context, obj);\r\n\tContext.restore();\r\n\t_app.log('进入绘制矩形图片方法, 绘制完毕');\r\n}\r\n\r\n// export \r\nfunction drawQrCode(Context, qrCodeObj) { //生成二维码方法， 参考了 诗小柒 的二维码生成器代码\r\n\t_app.log('进入绘制二维码方法')\r\n\t_app.showLoading('正在生成二维码');\r\n\tlet qrcodeAlgObjCache = [];\r\n\tlet options = {\r\n\t\ttext: String(qrCodeObj.text || '') || '', // 生成内容\r\n\t\tsize: Number(qrCodeObj.size || 0) || 200, // 二维码大小\r\n\t\tbackground: String(qrCodeObj.background || '') || '#ffffff', // 背景色\r\n\t\tforeground: String(qrCodeObj.foreground || '') || '#000000', // 前景色\r\n\t\tpdground: String(qrCodeObj.pdground || '') || '#000000', // 定位角点颜色\r\n\t\tcorrectLevel: Number(qrCodeObj.correctLevel || 0) || 3, // 容错级别\r\n\t\timage: String(qrCodeObj.image || '') || '', // 二维码图标\r\n\t\timageSize: Number(qrCodeObj.imageSize || 0) || 40, // 二维码图标大小\r\n\t\tdx: Number(qrCodeObj.dx || 0) || 0, // x轴距离\r\n\t\tdy: Number(qrCodeObj.dy || 0) || 0 // y轴距离\r\n\t}\r\n\tlet qrCodeAlg = null;\r\n\tlet d = 0;\r\n\tfor (var i = 0, l = qrcodeAlgObjCache.length; i < l; i++) {\r\n\t\td = i;\r\n\t\tif (qrcodeAlgObjCache[i].text == options.text && qrcodeAlgObjCache[i].text.correctLevel == options.correctLevel) {\r\n\t\t\tqrCodeAlg = qrcodeAlgObjCache[i].obj;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tif (d == l) {\r\n\t\tqrCodeAlg = new QRCodeAlg(options.text, options.correctLevel);\r\n\t\tqrcodeAlgObjCache.push({\r\n\t\t\ttext: options.text,\r\n\t\t\tcorrectLevel: options.correctLevel,\r\n\t\t\tobj: qrCodeAlg\r\n\t\t});\r\n\t}\r\n\tlet getForeGround = function(config) {\r\n\t\tlet options = config.options;\r\n\t\tif (options.pdground && (\r\n\t\t\t\t(config.row > 1 && config.row < 5 && config.col > 1 && config.col < 5) ||\r\n\t\t\t\t(config.row > (config.count - 6) && config.row < (config.count - 2) && config.col > 1 && config.col < 5) ||\r\n\t\t\t\t(config.row > 1 && config.row < 5 && config.col > (config.count - 6) && config.col < (config.count - 2))\r\n\t\t\t)) {\r\n\t\t\treturn options.pdground;\r\n\t\t}\r\n\t\treturn options.foreground;\r\n\t}\r\n\tlet count = qrCodeAlg.getModuleCount();\r\n\tlet ratioSize = options.size;\r\n\tlet ratioImgSize = options.imageSize;\r\n\t//计算每个点的长宽\r\n\tlet tileW = (ratioSize / count).toPrecision(4);\r\n\tlet tileH = (ratioSize / count).toPrecision(4);\r\n\t//绘制\r\n\tfor (let row = 0; row < count; row++) {\r\n\t\tfor (let col = 0; col < count; col++) {\r\n\t\t\tlet w = (Math.ceil((col + 1) * tileW) - Math.floor(col * tileW));\r\n\t\t\tlet h = (Math.ceil((row + 1) * tileW) - Math.floor(row * tileW));\r\n\t\t\tlet foreground = getForeGround({\r\n\t\t\t\trow: row,\r\n\t\t\t\tcol: col,\r\n\t\t\t\tcount: count,\r\n\t\t\t\toptions: options\r\n\t\t\t});\r\n\t\t\tContext.setFillStyle(qrCodeAlg.modules[row][col] ? foreground : options.background);\r\n\t\t\tContext.fillRect(options.dx + Math.round(col * tileW), options.dy + Math.round(row * tileH), w, h);\r\n\t\t}\r\n\t}\r\n\tif (options.image) {\r\n\t\tlet x = options.dx + Number(((ratioSize - ratioImgSize) / 2).toFixed(2));\r\n\t\tlet y = options.dy + Number(((ratioSize - ratioImgSize) / 2).toFixed(2));\r\n\t\tdrawRoundedRect(Context, x, y, ratioImgSize, ratioImgSize, 2, 6, true, true)\r\n\t\tContext.drawImage(options.image, x, y, ratioImgSize, ratioImgSize);\r\n\t\t// 画圆角矩形\r\n\t\tfunction drawRoundedRect(ctxi, x, y, width, height, r, lineWidth, fill, stroke) {\r\n\t\t\tctxi.setLineWidth(lineWidth);\r\n\t\t\tctxi.setFillStyle(options.background);\r\n\t\t\tctxi.setStrokeStyle(options.background);\r\n\t\t\tctxi.beginPath(); // draw top and top right corner \r\n\t\t\tctxi.moveTo(x + r, y);\r\n\t\t\tctxi.arcTo(x + width, y, x + width, y + r, r); // draw right side and bottom right corner \r\n\t\t\tctxi.arcTo(x + width, y + height, x + width - r, y + height, r); // draw bottom and bottom left corner \r\n\t\t\tctxi.arcTo(x, y + height, x, y + height - r, r); // draw left and top left corner \r\n\t\t\tctxi.arcTo(x, y, x + r, y, r);\r\n\t\t\tctxi.closePath();\r\n\t\t\tif (fill) {\r\n\t\t\t\tctxi.fill();\r\n\t\t\t}\r\n\t\t\tif (stroke) {\r\n\t\t\t\tctxi.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t_app.log('进入绘制二维码方法完毕')\r\n\t_app.hideLoading();\r\n}\r\n\r\n\r\nfunction getShreUserPosterBackground(objs) { //检查背景图是否存在于本地， 若存在直接返回， 否则调用getShreUserPosterBackgroundFc方法\r\n\tlet {\r\n\t\tbackgroundImage,\r\n\t\ttype\r\n\t} = objs;\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\ttry {\r\n\t\t\t_app.showLoading('正在获取海报背景图');\r\n\t\t\tconst savedFilePath = await getShreUserPosterBackgroundFc(objs)\r\n\t\t\t_app.hideLoading();\r\n\t\t\tresolve(savedFilePath);\r\n\t\t} catch (e) {\r\n\t\t\t_app.hideLoading();\r\n\t\t\t_app.showToast('获取分享用户背景图失败:' + JSON.stringify(e));\r\n\t\t\t_app.log(JSON.stringify(e));\r\n\t\t\treject(e);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction getPosterStorage(type) {\r\n\treturn _app.getStorageSync(getStorageKey(type));\r\n}\r\n\r\nfunction removePosterStorage(type) {\r\n\tconst ShreUserPosterBackgroundKey = getStorageKey(type);\r\n\tconst pbg = _app.getStorageSync(ShreUserPosterBackgroundKey);\r\n\tif (pbg && pbg.path) {\r\n\t\t_app.removeStorageSync(ShreUserPosterBackgroundKey);\r\n\t}\r\n}\r\n\r\nfunction setPosterStorage(type, data) {\r\n\t_app.setStorage(getStorageKey(type), data);\r\n}\r\n\r\nfunction getStorageKey(type) {\r\n\treturn ShreUserPosterBackgroundKey + (type || 'default');\r\n}\r\n\r\nfunction getShreUserPosterBackgroundFc(objs, upimage) { //下载并保存背景图方法\r\n\tlet {\r\n\t\tbackgroundImage,\r\n\t\ttype\r\n\t} = objs;\r\n\t_app.log('获取分享背景图, 尝试清空本地数据');\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\ttry {\r\n\t\t\t_app.showLoading('正在下载海报背景图');\r\n\t\t\t_app.log('没有从后端获取的背景图片路径, 尝试从后端获取背景图片路径');\r\n\t\t\tlet image = backgroundImage?backgroundImage:(await _app.getPosterUrl(objs));\r\n\t\t\timage = (await base64ToPathFn(image));\r\n\t\t\t_app.log('尝试下载并保存背景图:' + image);\r\n\t\t\tconst savedFilePath = await _app.downLoadAndSaveFile_PromiseFc(image);\r\n\t\t\tif (savedFilePath) {\r\n\t\t\t\t_app.log('下载并保存背景图成功:' + savedFilePath);\r\n\t\t\t\tconst imageObj = await _app.getImageInfo_PromiseFc(savedFilePath);\r\n\t\t\t\t_app.log('获取图片信息成功');\r\n\t\t\t\tconst returnObj = {\r\n\t\t\t\t\tpath: savedFilePath,\r\n\t\t\t\t\twidth: imageObj.width,\r\n\t\t\t\t\theight: imageObj.height,\r\n\t\t\t\t\tname: _app.fileNameInPath(image)\r\n\t\t\t\t}\r\n\t\t\t\t_app.log('拼接背景图信息对象成功:' + JSON.stringify(returnObj));\r\n\r\n\r\n\t\t\t\tsetPosterStorage(type, { ...returnObj\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\t_app.hideLoading();\r\n\t\t\t\t_app.log('返回背景图信息对象');\r\n\t\t\t\tresolve({ ...returnObj\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t_app.hideLoading();\r\n\t\t\t\treject('not find savedFilePath');\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//TODO handle the exception\r\n\t\t\treject(e);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tgetSharePoster,\r\n\tsetText,\r\n\tsetImage,\r\n\tdrawText,\r\n\tdrawImage,\r\n\tdrawQrCode,\r\n\tdrawFillRect,\r\n\tdrawStrokeRect,\r\n\tdrawRoundStrokeRect,\r\n\tdrawRoundFillRect\r\n}\r\n"," /**\r\n     * 获取单个字符的utf8编码\r\n     * unicode BMP平面约65535个字符\r\n     * @param {num} code\r\n     * return {array}\r\n     */\r\n    function unicodeFormat8(code) {\r\n        // 1 byte\r\n        var c0, c1, c2;\r\n        if (code < 128) {\r\n            return [code];\r\n            // 2 bytes\r\n        } else if (code < 2048) {\r\n            c0 = 192 + (code >> 6);\r\n            c1 = 128 + (code & 63);\r\n            return [c0, c1];\r\n            // 3 bytes\r\n        } else {\r\n            c0 = 224 + (code >> 12);\r\n            c1 = 128 + (code >> 6 & 63);\r\n            c2 = 128 + (code & 63);\r\n            return [c0, c1, c2];\r\n        }\r\n    }\r\n    /**\r\n     * 获取字符串的utf8编码字节串\r\n     * @param {string} string\r\n     * @return {array}\r\n     */\r\n    function getUTF8Bytes(string) {\r\n        var utf8codes = [];\r\n        for (var i = 0; i < string.length; i++) {\r\n            var code = string.charCodeAt(i);\r\n            var utf8 = unicodeFormat8(code);\r\n            for (var j = 0; j < utf8.length; j++) {\r\n                utf8codes.push(utf8[j]);\r\n            }\r\n        }\r\n        return utf8codes;\r\n    }\r\n    /**\r\n     * 二维码算法实现\r\n     * @param {string} data              要编码的信息字符串\r\n     * @param {num} errorCorrectLevel 纠错等级\r\n     */\r\n    export default function QRCodeAlg(data, errorCorrectLevel) {\r\n        this.typeNumber = -1; //版本\r\n        this.errorCorrectLevel = errorCorrectLevel;\r\n        this.modules = null; //二维矩阵，存放最终结果\r\n        this.moduleCount = 0; //矩阵大小\r\n        this.dataCache = null; //数据缓存\r\n        this.rsBlocks = null; //版本数据信息\r\n        this.totalDataCount = -1; //可使用的数据量\r\n        this.data = data;\r\n        this.utf8bytes = getUTF8Bytes(data);\r\n        this.make();\r\n    }\r\n    QRCodeAlg.prototype = {\r\n        constructor: QRCodeAlg,\r\n        /**\r\n         * 获取二维码矩阵大小\r\n         * @return {num} 矩阵大小\r\n         */\r\n        getModuleCount: function () {\r\n            return this.moduleCount;\r\n        },\r\n        /**\r\n         * 编码\r\n         */\r\n        make: function () {\r\n            this.getRightType();\r\n            this.dataCache = this.createData();\r\n            this.createQrcode();\r\n        },\r\n        /**\r\n         * 设置二位矩阵功能图形\r\n         * @param  {bool} test 表示是否在寻找最好掩膜阶段\r\n         * @param  {num} maskPattern 掩膜的版本\r\n         */\r\n        makeImpl: function (maskPattern) {\r\n            this.moduleCount = this.typeNumber * 4 + 17;\r\n            this.modules = new Array(this.moduleCount);\r\n            for (var row = 0; row < this.moduleCount; row++) {\r\n                this.modules[row] = new Array(this.moduleCount);\r\n            }\r\n            this.setupPositionProbePattern(0, 0);\r\n            this.setupPositionProbePattern(this.moduleCount - 7, 0);\r\n            this.setupPositionProbePattern(0, this.moduleCount - 7);\r\n            this.setupPositionAdjustPattern();\r\n            this.setupTimingPattern();\r\n            this.setupTypeInfo(true, maskPattern);\r\n            if (this.typeNumber >= 7) {\r\n                this.setupTypeNumber(true);\r\n            }\r\n            this.mapData(this.dataCache, maskPattern);\r\n        },\r\n        /**\r\n         * 设置二维码的位置探测图形\r\n         * @param  {num} row 探测图形的中心横坐标\r\n         * @param  {num} col 探测图形的中心纵坐标\r\n         */\r\n        setupPositionProbePattern: function (row, col) {\r\n            for (var r = -1; r <= 7; r++) {\r\n                if (row + r <= -1 || this.moduleCount <= row + r) continue;\r\n                for (var c = -1; c <= 7; c++) {\r\n                    if (col + c <= -1 || this.moduleCount <= col + c) continue;\r\n                    if ((0 <= r && r <= 6 && (c == 0 || c == 6)) || (0 <= c && c <= 6 && (r == 0 || r == 6)) || (2 <= r && r <= 4 && 2 <= c && c <= 4)) {\r\n                        this.modules[row + r][col + c] = true;\r\n                    } else {\r\n                        this.modules[row + r][col + c] = false;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 创建二维码\r\n         * @return {[type]} [description]\r\n         */\r\n        createQrcode: function () {\r\n            var minLostPoint = 0;\r\n            var pattern = 0;\r\n            var bestModules = null;\r\n            for (var i = 0; i < 8; i++) {\r\n                this.makeImpl(i);\r\n                var lostPoint = QRUtil.getLostPoint(this);\r\n                if (i == 0 || minLostPoint > lostPoint) {\r\n                    minLostPoint = lostPoint;\r\n                    pattern = i;\r\n                    bestModules = this.modules;\r\n                }\r\n            }\r\n            this.modules = bestModules;\r\n            this.setupTypeInfo(false, pattern);\r\n            if (this.typeNumber >= 7) {\r\n                this.setupTypeNumber(false);\r\n            }\r\n        },\r\n        /**\r\n         * 设置定位图形\r\n         * @return {[type]} [description]\r\n         */\r\n        setupTimingPattern: function () {\r\n            for (var r = 8; r < this.moduleCount - 8; r++) {\r\n                if (this.modules[r][6] != null) {\r\n                    continue;\r\n                }\r\n                this.modules[r][6] = (r % 2 == 0);\r\n                if (this.modules[6][r] != null) {\r\n                    continue;\r\n                }\r\n                this.modules[6][r] = (r % 2 == 0);\r\n            }\r\n        },\r\n        /**\r\n         * 设置矫正图形\r\n         * @return {[type]} [description]\r\n         */\r\n        setupPositionAdjustPattern: function () {\r\n            var pos = QRUtil.getPatternPosition(this.typeNumber);\r\n            for (var i = 0; i < pos.length; i++) {\r\n                for (var j = 0; j < pos.length; j++) {\r\n                    var row = pos[i];\r\n                    var col = pos[j];\r\n                    if (this.modules[row][col] != null) {\r\n                        continue;\r\n                    }\r\n                    for (var r = -2; r <= 2; r++) {\r\n                        for (var c = -2; c <= 2; c++) {\r\n                            if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {\r\n                                this.modules[row + r][col + c] = true;\r\n                            } else {\r\n                                this.modules[row + r][col + c] = false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 设置版本信息（7以上版本才有）\r\n         * @param  {bool} test 是否处于判断最佳掩膜阶段\r\n         * @return {[type]}      [description]\r\n         */\r\n        setupTypeNumber: function (test) {\r\n            var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\r\n            for (var i = 0; i < 18; i++) {\r\n                var mod = (!test && ((bits >> i) & 1) == 1);\r\n                this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\r\n                this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n            }\r\n        },\r\n        /**\r\n         * 设置格式信息（纠错等级和掩膜版本）\r\n         * @param  {bool} test\r\n         * @param  {num} maskPattern 掩膜版本\r\n         * @return {}\r\n         */\r\n        setupTypeInfo: function (test, maskPattern) {\r\n            var data = (QRErrorCorrectLevel[this.errorCorrectLevel] << 3) | maskPattern;\r\n            var bits = QRUtil.getBCHTypeInfo(data);\r\n            // vertical\r\n            for (var i = 0; i < 15; i++) {\r\n                var mod = (!test && ((bits >> i) & 1) == 1);\r\n                if (i < 6) {\r\n                    this.modules[i][8] = mod;\r\n                } else if (i < 8) {\r\n                    this.modules[i + 1][8] = mod;\r\n                } else {\r\n                    this.modules[this.moduleCount - 15 + i][8] = mod;\r\n                }\r\n                // horizontal\r\n                var mod = (!test && ((bits >> i) & 1) == 1);\r\n                if (i < 8) {\r\n                    this.modules[8][this.moduleCount - i - 1] = mod;\r\n                } else if (i < 9) {\r\n                    this.modules[8][15 - i - 1 + 1] = mod;\r\n                } else {\r\n                    this.modules[8][15 - i - 1] = mod;\r\n                }\r\n            }\r\n            // fixed module\r\n            this.modules[this.moduleCount - 8][8] = (!test);\r\n        },\r\n        /**\r\n         * 数据编码\r\n         * @return {[type]} [description]\r\n         */\r\n        createData: function () {\r\n            var buffer = new QRBitBuffer();\r\n            var lengthBits = this.typeNumber > 9 ? 16 : 8;\r\n            buffer.put(4, 4); //添加模式\r\n            buffer.put(this.utf8bytes.length, lengthBits);\r\n            for (var i = 0, l = this.utf8bytes.length; i < l; i++) {\r\n                buffer.put(this.utf8bytes[i], 8);\r\n            }\r\n            if (buffer.length + 4 <= this.totalDataCount * 8) {\r\n                buffer.put(0, 4);\r\n            }\r\n            // padding\r\n            while (buffer.length % 8 != 0) {\r\n                buffer.putBit(false);\r\n            }\r\n            // padding\r\n            while (true) {\r\n                if (buffer.length >= this.totalDataCount * 8) {\r\n                    break;\r\n                }\r\n                buffer.put(QRCodeAlg.PAD0, 8);\r\n                if (buffer.length >= this.totalDataCount * 8) {\r\n                    break;\r\n                }\r\n                buffer.put(QRCodeAlg.PAD1, 8);\r\n            }\r\n            return this.createBytes(buffer);\r\n        },\r\n        /**\r\n         * 纠错码编码\r\n         * @param  {buffer} buffer 数据编码\r\n         * @return {[type]}\r\n         */\r\n        createBytes: function (buffer) {\r\n            var offset = 0;\r\n            var maxDcCount = 0;\r\n            var maxEcCount = 0;\r\n            var length = this.rsBlock.length / 3;\r\n            var rsBlocks = new Array();\r\n            for (var i = 0; i < length; i++) {\r\n                var count = this.rsBlock[i * 3 + 0];\r\n                var totalCount = this.rsBlock[i * 3 + 1];\r\n                var dataCount = this.rsBlock[i * 3 + 2];\r\n                for (var j = 0; j < count; j++) {\r\n                    rsBlocks.push([dataCount, totalCount]);\r\n                }\r\n            }\r\n            var dcdata = new Array(rsBlocks.length);\r\n            var ecdata = new Array(rsBlocks.length);\r\n            for (var r = 0; r < rsBlocks.length; r++) {\r\n                var dcCount = rsBlocks[r][0];\r\n                var ecCount = rsBlocks[r][1] - dcCount;\r\n                maxDcCount = Math.max(maxDcCount, dcCount);\r\n                maxEcCount = Math.max(maxEcCount, ecCount);\r\n                dcdata[r] = new Array(dcCount);\r\n                for (var i = 0; i < dcdata[r].length; i++) {\r\n                    dcdata[r][i] = 0xff & buffer.buffer[i + offset];\r\n                }\r\n                offset += dcCount;\r\n                var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\r\n                var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\r\n                var modPoly = rawPoly.mod(rsPoly);\r\n                ecdata[r] = new Array(rsPoly.getLength() - 1);\r\n                for (var i = 0; i < ecdata[r].length; i++) {\r\n                    var modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n                    ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;\r\n                }\r\n            }\r\n            var data = new Array(this.totalDataCount);\r\n            var index = 0;\r\n            for (var i = 0; i < maxDcCount; i++) {\r\n                for (var r = 0; r < rsBlocks.length; r++) {\r\n                    if (i < dcdata[r].length) {\r\n                        data[index++] = dcdata[r][i];\r\n                    }\r\n                }\r\n            }\r\n            for (var i = 0; i < maxEcCount; i++) {\r\n                for (var r = 0; r < rsBlocks.length; r++) {\r\n                    if (i < ecdata[r].length) {\r\n                        data[index++] = ecdata[r][i];\r\n                    }\r\n                }\r\n            }\r\n            return data;\r\n\r\n        },\r\n        /**\r\n         * 布置模块，构建最终信息\r\n         * @param  {} data\r\n         * @param  {} maskPattern\r\n         * @return {}\r\n         */\r\n        mapData: function (data, maskPattern) {\r\n            var inc = -1;\r\n            var row = this.moduleCount - 1;\r\n            var bitIndex = 7;\r\n            var byteIndex = 0;\r\n            for (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n                if (col == 6) col--;\r\n                while (true) {\r\n                    for (var c = 0; c < 2; c++) {\r\n                        if (this.modules[row][col - c] == null) {\r\n                            var dark = false;\r\n                            if (byteIndex < data.length) {\r\n                                dark = (((data[byteIndex] >>> bitIndex) & 1) == 1);\r\n                            }\r\n                            var mask = QRUtil.getMask(maskPattern, row, col - c);\r\n                            if (mask) {\r\n                                dark = !dark;\r\n                            }\r\n                            this.modules[row][col - c] = dark;\r\n                            bitIndex--;\r\n                            if (bitIndex == -1) {\r\n                                byteIndex++;\r\n                                bitIndex = 7;\r\n                            }\r\n                        }\r\n                    }\r\n                    row += inc;\r\n                    if (row < 0 || this.moduleCount <= row) {\r\n                        row -= inc;\r\n                        inc = -inc;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * 填充字段\r\n     */\r\n    QRCodeAlg.PAD0 = 0xEC;\r\n    QRCodeAlg.PAD1 = 0x11;\r\n    //---------------------------------------------------------------------\r\n    // 纠错等级对应的编码\r\n    //---------------------------------------------------------------------\r\n    var QRErrorCorrectLevel = [1, 0, 3, 2];\r\n    //---------------------------------------------------------------------\r\n    // 掩膜版本\r\n    //---------------------------------------------------------------------\r\n    var QRMaskPattern = {\r\n        PATTERN000: 0,\r\n        PATTERN001: 1,\r\n        PATTERN010: 2,\r\n        PATTERN011: 3,\r\n        PATTERN100: 4,\r\n        PATTERN101: 5,\r\n        PATTERN110: 6,\r\n        PATTERN111: 7\r\n    };\r\n    //---------------------------------------------------------------------\r\n    // 工具类\r\n    //---------------------------------------------------------------------\r\n    var QRUtil = {\r\n        /*\r\n        每个版本矫正图形的位置\r\n         */\r\n        PATTERN_POSITION_TABLE: [\r\n            [],\r\n            [6, 18],\r\n            [6, 22],\r\n            [6, 26],\r\n            [6, 30],\r\n            [6, 34],\r\n            [6, 22, 38],\r\n            [6, 24, 42],\r\n            [6, 26, 46],\r\n            [6, 28, 50],\r\n            [6, 30, 54],\r\n            [6, 32, 58],\r\n            [6, 34, 62],\r\n            [6, 26, 46, 66],\r\n            [6, 26, 48, 70],\r\n            [6, 26, 50, 74],\r\n            [6, 30, 54, 78],\r\n            [6, 30, 56, 82],\r\n            [6, 30, 58, 86],\r\n            [6, 34, 62, 90],\r\n            [6, 28, 50, 72, 94],\r\n            [6, 26, 50, 74, 98],\r\n            [6, 30, 54, 78, 102],\r\n            [6, 28, 54, 80, 106],\r\n            [6, 32, 58, 84, 110],\r\n            [6, 30, 58, 86, 114],\r\n            [6, 34, 62, 90, 118],\r\n            [6, 26, 50, 74, 98, 122],\r\n            [6, 30, 54, 78, 102, 126],\r\n            [6, 26, 52, 78, 104, 130],\r\n            [6, 30, 56, 82, 108, 134],\r\n            [6, 34, 60, 86, 112, 138],\r\n            [6, 30, 58, 86, 114, 142],\r\n            [6, 34, 62, 90, 118, 146],\r\n            [6, 30, 54, 78, 102, 126, 150],\r\n            [6, 24, 50, 76, 102, 128, 154],\r\n            [6, 28, 54, 80, 106, 132, 158],\r\n            [6, 32, 58, 84, 110, 136, 162],\r\n            [6, 26, 54, 82, 110, 138, 166],\r\n            [6, 30, 58, 86, 114, 142, 170]\r\n        ],\r\n        G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\r\n        G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\r\n        G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\r\n        /*\r\n        BCH编码格式信息\r\n         */\r\n        getBCHTypeInfo: function (data) {\r\n            var d = data << 10;\r\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\r\n                d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));\r\n            }\r\n            return ((data << 10) | d) ^ QRUtil.G15_MASK;\r\n        },\r\n        /*\r\n        BCH编码版本信息\r\n         */\r\n        getBCHTypeNumber: function (data) {\r\n            var d = data << 12;\r\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\r\n                d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));\r\n            }\r\n            return (data << 12) | d;\r\n        },\r\n        /*\r\n        获取BCH位信息\r\n         */\r\n        getBCHDigit: function (data) {\r\n            var digit = 0;\r\n            while (data != 0) {\r\n                digit++;\r\n                data >>>= 1;\r\n            }\r\n            return digit;\r\n        },\r\n        /*\r\n        获取版本对应的矫正图形位置\r\n         */\r\n        getPatternPosition: function (typeNumber) {\r\n            return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\r\n        },\r\n        /*\r\n        掩膜算法\r\n         */\r\n        getMask: function (maskPattern, i, j) {\r\n            switch (maskPattern) {\r\n                case QRMaskPattern.PATTERN000:\r\n                    return (i + j) % 2 == 0;\r\n                case QRMaskPattern.PATTERN001:\r\n                    return i % 2 == 0;\r\n                case QRMaskPattern.PATTERN010:\r\n                    return j % 3 == 0;\r\n                case QRMaskPattern.PATTERN011:\r\n                    return (i + j) % 3 == 0;\r\n                case QRMaskPattern.PATTERN100:\r\n                    return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\r\n                case QRMaskPattern.PATTERN101:\r\n                    return (i * j) % 2 + (i * j) % 3 == 0;\r\n                case QRMaskPattern.PATTERN110:\r\n                    return ((i * j) % 2 + (i * j) % 3) % 2 == 0;\r\n                case QRMaskPattern.PATTERN111:\r\n                    return ((i * j) % 3 + (i + j) % 2) % 2 == 0;\r\n                default:\r\n                    throw new Error(\"bad maskPattern:\" + maskPattern);\r\n            }\r\n        },\r\n        /*\r\n        获取RS的纠错多项式\r\n         */\r\n        getErrorCorrectPolynomial: function (errorCorrectLength) {\r\n            var a = new QRPolynomial([1], 0);\r\n            for (var i = 0; i < errorCorrectLength; i++) {\r\n                a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\r\n            }\r\n            return a;\r\n        },\r\n        /*\r\n        获取评价\r\n         */\r\n        getLostPoint: function (qrCode) {\r\n            var moduleCount = qrCode.getModuleCount(),\r\n                lostPoint = 0,\r\n                darkCount = 0;\r\n            for (var row = 0; row < moduleCount; row++) {\r\n                var sameCount = 0;\r\n                var head = qrCode.modules[row][0];\r\n                for (var col = 0; col < moduleCount; col++) {\r\n                    var current = qrCode.modules[row][col];\r\n                    //level 3 评价\r\n                    if (col < moduleCount - 6) {\r\n                        if (current && !qrCode.modules[row][col + 1] && qrCode.modules[row][col + 2] && qrCode.modules[row][col + 3] && qrCode.modules[row][col + 4] && !qrCode.modules[row][col + 5] && qrCode.modules[row][col + 6]) {\r\n                            if (col < moduleCount - 10) {\r\n                                if (qrCode.modules[row][col + 7] && qrCode.modules[row][col + 8] && qrCode.modules[row][col + 9] && qrCode.modules[row][col + 10]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            } else if (col > 3) {\r\n                                if (qrCode.modules[row][col - 1] && qrCode.modules[row][col - 2] && qrCode.modules[row][col - 3] && qrCode.modules[row][col - 4]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    //level 2 评价\r\n                    if ((row < moduleCount - 1) && (col < moduleCount - 1)) {\r\n                        var count = 0;\r\n                        if (current) count++;\r\n                        if (qrCode.modules[row + 1][col]) count++;\r\n                        if (qrCode.modules[row][col + 1]) count++;\r\n                        if (qrCode.modules[row + 1][col + 1]) count++;\r\n                        if (count == 0 || count == 4) {\r\n                            lostPoint += 3;\r\n                        }\r\n                    }\r\n                    //level 1 评价\r\n                    if (head ^ current) {\r\n                        sameCount++;\r\n                    } else {\r\n                        head = current;\r\n                        if (sameCount >= 5) {\r\n                            lostPoint += (3 + sameCount - 5);\r\n                        }\r\n                        sameCount = 1;\r\n                    }\r\n                    //level 4 评价\r\n                    if (current) {\r\n                        darkCount++;\r\n                    }\r\n                }\r\n            }\r\n            for (var col = 0; col < moduleCount; col++) {\r\n                var sameCount = 0;\r\n                var head = qrCode.modules[0][col];\r\n                for (var row = 0; row < moduleCount; row++) {\r\n                    var current = qrCode.modules[row][col];\r\n                    //level 3 评价\r\n                    if (row < moduleCount - 6) {\r\n                        if (current && !qrCode.modules[row + 1][col] && qrCode.modules[row + 2][col] && qrCode.modules[row + 3][col] && qrCode.modules[row + 4][col] && !qrCode.modules[row + 5][col] && qrCode.modules[row + 6][col]) {\r\n                            if (row < moduleCount - 10) {\r\n                                if (qrCode.modules[row + 7][col] && qrCode.modules[row + 8][col] && qrCode.modules[row + 9][col] && qrCode.modules[row + 10][col]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            } else if (row > 3) {\r\n                                if (qrCode.modules[row - 1][col] && qrCode.modules[row - 2][col] && qrCode.modules[row - 3][col] && qrCode.modules[row - 4][col]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    //level 1 评价\r\n                    if (head ^ current) {\r\n                        sameCount++;\r\n                    } else {\r\n                        head = current;\r\n                        if (sameCount >= 5) {\r\n                            lostPoint += (3 + sameCount - 5);\r\n                        }\r\n                        sameCount = 1;\r\n                    }\r\n                }\r\n            }\r\n            // LEVEL4\r\n            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\r\n            lostPoint += ratio * 10;\r\n            return lostPoint;\r\n        }\r\n\r\n    };\r\n    //---------------------------------------------------------------------\r\n    // QRMath使用的数学工具\r\n    //---------------------------------------------------------------------\r\n    var QRMath = {\r\n        /*\r\n        将n转化为a^m\r\n         */\r\n        glog: function (n) {\r\n            if (n < 1) {\r\n                throw new Error(\"glog(\" + n + \")\");\r\n            }\r\n            return QRMath.LOG_TABLE[n];\r\n        },\r\n        /*\r\n        将a^m转化为n\r\n         */\r\n        gexp: function (n) {\r\n            while (n < 0) {\r\n                n += 255;\r\n            }\r\n            while (n >= 256) {\r\n                n -= 255;\r\n            }\r\n            return QRMath.EXP_TABLE[n];\r\n        },\r\n        EXP_TABLE: new Array(256),\r\n        LOG_TABLE: new Array(256)\r\n\r\n    };\r\n    for (var i = 0; i < 8; i++) {\r\n        QRMath.EXP_TABLE[i] = 1 << i;\r\n    }\r\n    for (var i = 8; i < 256; i++) {\r\n        QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];\r\n    }\r\n    for (var i = 0; i < 255; i++) {\r\n        QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\r\n    }\r\n    //---------------------------------------------------------------------\r\n    // QRPolynomial 多项式\r\n    //---------------------------------------------------------------------\r\n    /**\r\n     * 多项式类\r\n     * @param {Array} num   系数\r\n     * @param {num} shift a^shift\r\n     */\r\n    function QRPolynomial(num, shift) {\r\n        if (num.length == undefined) {\r\n            throw new Error(num.length + \"/\" + shift);\r\n        }\r\n        var offset = 0;\r\n        while (offset < num.length && num[offset] == 0) {\r\n            offset++;\r\n        }\r\n        this.num = new Array(num.length - offset + shift);\r\n        for (var i = 0; i < num.length - offset; i++) {\r\n            this.num[i] = num[i + offset];\r\n        }\r\n    }\r\n    QRPolynomial.prototype = {\r\n        get: function (index) {\r\n            return this.num[index];\r\n        },\r\n        getLength: function () {\r\n            return this.num.length;\r\n        },\r\n        /**\r\n         * 多项式乘法\r\n         * @param  {QRPolynomial} e 被乘多项式\r\n         * @return {[type]}   [description]\r\n         */\r\n        multiply: function (e) {\r\n            var num = new Array(this.getLength() + e.getLength() - 1);\r\n            for (var i = 0; i < this.getLength(); i++) {\r\n                for (var j = 0; j < e.getLength(); j++) {\r\n                    num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));\r\n                }\r\n            }\r\n            return new QRPolynomial(num, 0);\r\n        },\r\n        /**\r\n         * 多项式模运算\r\n         * @param  {QRPolynomial} e 模多项式\r\n         * @return {}\r\n         */\r\n        mod: function (e) {\r\n            var tl = this.getLength(),\r\n                el = e.getLength();\r\n            if (tl - el < 0) {\r\n                return this;\r\n            }\r\n            var num = new Array(tl);\r\n            for (var i = 0; i < tl; i++) {\r\n                num[i] = this.get(i);\r\n            }\r\n            while (num.length >= el) {\r\n                var ratio = QRMath.glog(num[0]) - QRMath.glog(e.get(0));\r\n\r\n                for (var i = 0; i < e.getLength(); i++) {\r\n                    num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\r\n                }\r\n                while (num[0] == 0) {\r\n                    num.shift();\r\n                }\r\n            }\r\n            return new QRPolynomial(num, 0);\r\n        }\r\n    };\r\n\r\n    //---------------------------------------------------------------------\r\n    // RS_BLOCK_TABLE\r\n    //---------------------------------------------------------------------\r\n    /*\r\n    二维码各个版本信息[块数, 每块中的数据块数, 每块中的信息块数]\r\n     */\r\n    var RS_BLOCK_TABLE = [\r\n        // L\r\n        // M\r\n        // Q\r\n        // H\r\n        // 1\r\n        [1, 26, 19],\r\n        [1, 26, 16],\r\n        [1, 26, 13],\r\n        [1, 26, 9],\r\n\r\n        // 2\r\n        [1, 44, 34],\r\n        [1, 44, 28],\r\n        [1, 44, 22],\r\n        [1, 44, 16],\r\n\r\n        // 3\r\n        [1, 70, 55],\r\n        [1, 70, 44],\r\n        [2, 35, 17],\r\n        [2, 35, 13],\r\n\r\n        // 4\r\n        [1, 100, 80],\r\n        [2, 50, 32],\r\n        [2, 50, 24],\r\n        [4, 25, 9],\r\n\r\n        // 5\r\n        [1, 134, 108],\r\n        [2, 67, 43],\r\n        [2, 33, 15, 2, 34, 16],\r\n        [2, 33, 11, 2, 34, 12],\r\n\r\n        // 6\r\n        [2, 86, 68],\r\n        [4, 43, 27],\r\n        [4, 43, 19],\r\n        [4, 43, 15],\r\n\r\n        // 7\r\n        [2, 98, 78],\r\n        [4, 49, 31],\r\n        [2, 32, 14, 4, 33, 15],\r\n        [4, 39, 13, 1, 40, 14],\r\n\r\n        // 8\r\n        [2, 121, 97],\r\n        [2, 60, 38, 2, 61, 39],\r\n        [4, 40, 18, 2, 41, 19],\r\n        [4, 40, 14, 2, 41, 15],\r\n\r\n        // 9\r\n        [2, 146, 116],\r\n        [3, 58, 36, 2, 59, 37],\r\n        [4, 36, 16, 4, 37, 17],\r\n        [4, 36, 12, 4, 37, 13],\r\n\r\n        // 10\r\n        [2, 86, 68, 2, 87, 69],\r\n        [4, 69, 43, 1, 70, 44],\r\n        [6, 43, 19, 2, 44, 20],\r\n        [6, 43, 15, 2, 44, 16],\r\n\r\n        // 11\r\n        [4, 101, 81],\r\n        [1, 80, 50, 4, 81, 51],\r\n        [4, 50, 22, 4, 51, 23],\r\n        [3, 36, 12, 8, 37, 13],\r\n\r\n        // 12\r\n        [2, 116, 92, 2, 117, 93],\r\n        [6, 58, 36, 2, 59, 37],\r\n        [4, 46, 20, 6, 47, 21],\r\n        [7, 42, 14, 4, 43, 15],\r\n\r\n        // 13\r\n        [4, 133, 107],\r\n        [8, 59, 37, 1, 60, 38],\r\n        [8, 44, 20, 4, 45, 21],\r\n        [12, 33, 11, 4, 34, 12],\r\n\r\n        // 14\r\n        [3, 145, 115, 1, 146, 116],\r\n        [4, 64, 40, 5, 65, 41],\r\n        [11, 36, 16, 5, 37, 17],\r\n        [11, 36, 12, 5, 37, 13],\r\n\r\n        // 15\r\n        [5, 109, 87, 1, 110, 88],\r\n        [5, 65, 41, 5, 66, 42],\r\n        [5, 54, 24, 7, 55, 25],\r\n        [11, 36, 12],\r\n\r\n        // 16\r\n        [5, 122, 98, 1, 123, 99],\r\n        [7, 73, 45, 3, 74, 46],\r\n        [15, 43, 19, 2, 44, 20],\r\n        [3, 45, 15, 13, 46, 16],\r\n\r\n        // 17\r\n        [1, 135, 107, 5, 136, 108],\r\n        [10, 74, 46, 1, 75, 47],\r\n        [1, 50, 22, 15, 51, 23],\r\n        [2, 42, 14, 17, 43, 15],\r\n\r\n        // 18\r\n        [5, 150, 120, 1, 151, 121],\r\n        [9, 69, 43, 4, 70, 44],\r\n        [17, 50, 22, 1, 51, 23],\r\n        [2, 42, 14, 19, 43, 15],\r\n\r\n        // 19\r\n        [3, 141, 113, 4, 142, 114],\r\n        [3, 70, 44, 11, 71, 45],\r\n        [17, 47, 21, 4, 48, 22],\r\n        [9, 39, 13, 16, 40, 14],\r\n\r\n        // 20\r\n        [3, 135, 107, 5, 136, 108],\r\n        [3, 67, 41, 13, 68, 42],\r\n        [15, 54, 24, 5, 55, 25],\r\n        [15, 43, 15, 10, 44, 16],\r\n\r\n        // 21\r\n        [4, 144, 116, 4, 145, 117],\r\n        [17, 68, 42],\r\n        [17, 50, 22, 6, 51, 23],\r\n        [19, 46, 16, 6, 47, 17],\r\n\r\n        // 22\r\n        [2, 139, 111, 7, 140, 112],\r\n        [17, 74, 46],\r\n        [7, 54, 24, 16, 55, 25],\r\n        [34, 37, 13],\r\n\r\n        // 23\r\n        [4, 151, 121, 5, 152, 122],\r\n        [4, 75, 47, 14, 76, 48],\r\n        [11, 54, 24, 14, 55, 25],\r\n        [16, 45, 15, 14, 46, 16],\r\n\r\n        // 24\r\n        [6, 147, 117, 4, 148, 118],\r\n        [6, 73, 45, 14, 74, 46],\r\n        [11, 54, 24, 16, 55, 25],\r\n        [30, 46, 16, 2, 47, 17],\r\n\r\n        // 25\r\n        [8, 132, 106, 4, 133, 107],\r\n        [8, 75, 47, 13, 76, 48],\r\n        [7, 54, 24, 22, 55, 25],\r\n        [22, 45, 15, 13, 46, 16],\r\n\r\n        // 26\r\n        [10, 142, 114, 2, 143, 115],\r\n        [19, 74, 46, 4, 75, 47],\r\n        [28, 50, 22, 6, 51, 23],\r\n        [33, 46, 16, 4, 47, 17],\r\n\r\n        // 27\r\n        [8, 152, 122, 4, 153, 123],\r\n        [22, 73, 45, 3, 74, 46],\r\n        [8, 53, 23, 26, 54, 24],\r\n        [12, 45, 15, 28, 46, 16],\r\n\r\n        // 28\r\n        [3, 147, 117, 10, 148, 118],\r\n        [3, 73, 45, 23, 74, 46],\r\n        [4, 54, 24, 31, 55, 25],\r\n        [11, 45, 15, 31, 46, 16],\r\n\r\n        // 29\r\n        [7, 146, 116, 7, 147, 117],\r\n        [21, 73, 45, 7, 74, 46],\r\n        [1, 53, 23, 37, 54, 24],\r\n        [19, 45, 15, 26, 46, 16],\r\n\r\n        // 30\r\n        [5, 145, 115, 10, 146, 116],\r\n        [19, 75, 47, 10, 76, 48],\r\n        [15, 54, 24, 25, 55, 25],\r\n        [23, 45, 15, 25, 46, 16],\r\n\r\n        // 31\r\n        [13, 145, 115, 3, 146, 116],\r\n        [2, 74, 46, 29, 75, 47],\r\n        [42, 54, 24, 1, 55, 25],\r\n        [23, 45, 15, 28, 46, 16],\r\n\r\n        // 32\r\n        [17, 145, 115],\r\n        [10, 74, 46, 23, 75, 47],\r\n        [10, 54, 24, 35, 55, 25],\r\n        [19, 45, 15, 35, 46, 16],\r\n\r\n        // 33\r\n        [17, 145, 115, 1, 146, 116],\r\n        [14, 74, 46, 21, 75, 47],\r\n        [29, 54, 24, 19, 55, 25],\r\n        [11, 45, 15, 46, 46, 16],\r\n\r\n        // 34\r\n        [13, 145, 115, 6, 146, 116],\r\n        [14, 74, 46, 23, 75, 47],\r\n        [44, 54, 24, 7, 55, 25],\r\n        [59, 46, 16, 1, 47, 17],\r\n\r\n        // 35\r\n        [12, 151, 121, 7, 152, 122],\r\n        [12, 75, 47, 26, 76, 48],\r\n        [39, 54, 24, 14, 55, 25],\r\n        [22, 45, 15, 41, 46, 16],\r\n\r\n        // 36\r\n        [6, 151, 121, 14, 152, 122],\r\n        [6, 75, 47, 34, 76, 48],\r\n        [46, 54, 24, 10, 55, 25],\r\n        [2, 45, 15, 64, 46, 16],\r\n\r\n        // 37\r\n        [17, 152, 122, 4, 153, 123],\r\n        [29, 74, 46, 14, 75, 47],\r\n        [49, 54, 24, 10, 55, 25],\r\n        [24, 45, 15, 46, 46, 16],\r\n\r\n        // 38\r\n        [4, 152, 122, 18, 153, 123],\r\n        [13, 74, 46, 32, 75, 47],\r\n        [48, 54, 24, 14, 55, 25],\r\n        [42, 45, 15, 32, 46, 16],\r\n\r\n        // 39\r\n        [20, 147, 117, 4, 148, 118],\r\n        [40, 75, 47, 7, 76, 48],\r\n        [43, 54, 24, 22, 55, 25],\r\n        [10, 45, 15, 67, 46, 16],\r\n\r\n        // 40\r\n        [19, 148, 118, 6, 149, 119],\r\n        [18, 75, 47, 31, 76, 48],\r\n        [34, 54, 24, 34, 55, 25],\r\n        [20, 45, 15, 61, 46, 16]\r\n    ];\r\n\r\n    /**\r\n     * 根据数据获取对应版本\r\n     * @return {[type]} [description]\r\n     */\r\n    QRCodeAlg.prototype.getRightType = function () {\r\n        for (var typeNumber = 1; typeNumber < 41; typeNumber++) {\r\n            var rsBlock = RS_BLOCK_TABLE[(typeNumber - 1) * 4 + this.errorCorrectLevel];\r\n            if (rsBlock == undefined) {\r\n                throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + this.errorCorrectLevel);\r\n            }\r\n            var length = rsBlock.length / 3;\r\n            var totalDataCount = 0;\r\n            for (var i = 0; i < length; i++) {\r\n                var count = rsBlock[i * 3 + 0];\r\n                var dataCount = rsBlock[i * 3 + 2];\r\n                totalDataCount += dataCount * count;\r\n            }\r\n            var lengthBytes = typeNumber > 9 ? 2 : 1;\r\n            if (this.utf8bytes.length + lengthBytes < totalDataCount || typeNumber == 40) {\r\n                this.typeNumber = typeNumber;\r\n                this.rsBlock = rsBlock;\r\n                this.totalDataCount = totalDataCount;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    //---------------------------------------------------------------------\r\n    // QRBitBuffer\r\n    //---------------------------------------------------------------------\r\n    function QRBitBuffer() {\r\n        this.buffer = new Array();\r\n        this.length = 0;\r\n    }\r\n    QRBitBuffer.prototype = {\r\n        get: function (index) {\r\n            var bufIndex = Math.floor(index / 8);\r\n            return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1);\r\n        },\r\n        put: function (num, length) {\r\n            for (var i = 0; i < length; i++) {\r\n                this.putBit(((num >>> (length - i - 1)) & 1));\r\n            }\r\n        },\r\n        putBit: function (bit) {\r\n            var bufIndex = Math.floor(this.length / 8);\r\n            if (this.buffer.length <= bufIndex) {\r\n                this.buffer.push(0);\r\n            }\r\n            if (bit) {\r\n                this.buffer[bufIndex] |= (0x80 >>> (this.length % 8));\r\n            }\r\n            this.length++;\r\n        }\r\n    };","function getLocalFilePath(path) {\n    if (path.indexOf('_www') === 0 || path.indexOf('_doc') === 0 || path.indexOf('_documents') === 0 || path.indexOf('_downloads') === 0) {\n        return path\n    }\n    if (path.indexOf('file://') === 0) {\n        return path\n    }\n    if (path.indexOf('/storage/emulated/0/') === 0) {\n        return path\n    }\n    if (path.indexOf('/') === 0) {\n        var localFilePath = plus.io.convertAbsoluteFileSystem(path)\n        if (localFilePath !== path) {\n            return localFilePath\n        } else {\n            path = path.substr(1)\n        }\n    }\n    return '_www/' + path\n}\n\nexport function pathToBase64(path) {\n    return new Promise(function(resolve, reject) {\n        if (typeof window === 'object' && 'document' in window) {\n            if (typeof FileReader === 'function') {\n                var xhr = new XMLHttpRequest()\n                xhr.open('GET', path, true)\n                xhr.responseType = 'blob'\n                xhr.onload = function() {\n                    if (this.status === 200) {\n                        let fileReader = new FileReader()\n                        fileReader.onload = function(e) {\n                            resolve(e.target.result)\n                        }\n                        fileReader.onerror = reject\n                        fileReader.readAsDataURL(this.response)\n                    }\n                }\n                xhr.onerror = reject\n                xhr.send()\n                return\n            }\n            var canvas = document.createElement('canvas')\n            var c2x = canvas.getContext('2d')\n            var img = new Image\n            img.onload = function() {\n                canvas.width = img.width\n                canvas.height = img.height\n                c2x.drawImage(img, 0, 0)\n                resolve(canvas.toDataURL())\n                canvas.height = canvas.width = 0\n            }\n            img.onerror = reject\n            img.src = path\n            return\n        }\n        if (typeof plus === 'object') {\n            plus.io.resolveLocalFileSystemURL(getLocalFilePath(path), function(entry) {\n                entry.file(function(file) {\n                    var fileReader = new plus.io.FileReader()\n                    fileReader.onload = function(data) {\n                        resolve(data.target.result)\n                    }\n                    fileReader.onerror = function(error) {\n                        reject(error)\n                    }\n                    fileReader.readAsDataURL(file)\n                }, function(error) {\n                    reject(error)\n                })\n            }, function(error) {\n                reject(error)\n            })\n            return\n        }\n        if (typeof wx === 'object' && wx.canIUse('getFileSystemManager')) {\n            wx.getFileSystemManager().readFile({\n                filePath: path,\n                encoding: 'base64',\n                success: function(res) {\n                    resolve('data:image/png;base64,' + res.data)\n                },\n                fail: function(error) {\n                    reject(error)\n                }\n            })\n            return\n        }\n        reject(new Error('not support'))\n    })\n}\n\nexport function base64ToPath(base64) {\n    return new Promise(function(resolve, reject) {\n        if (typeof window === 'object' && 'document' in window) {\n            base64 = base64.split(',')\n            var type = base64[0].match(/:(.*?);/)[1]\n            var str = atob(base64[1])\n            var n = str.length\n            var array = new Uint8Array(n)\n            while (n--) {\n                array[n] = str.charCodeAt(n)\n            }\n            return resolve((window.URL || window.webkitURL).createObjectURL(new Blob([array], { type: type })))\n        }\n        var extName = base64.match(/data\\:\\S+\\/(\\S+);/)\n        if (extName) {\n            extName = extName[1]\n        } else {\n            reject(new Error('base64 error'))\n        }\n        var fileName = Date.now() + '.' + extName\n        if (typeof plus === 'object') {\n            var bitmap = new plus.nativeObj.Bitmap('bitmap' + Date.now())\n            bitmap.loadBase64Data(base64, function() {\n                var filePath = '_doc/uniapp_temp/' + fileName\n                bitmap.save(filePath, {}, function() {\n                    bitmap.clear()\n                    resolve(filePath)\n                }, function(error) {\n                    bitmap.clear()\n                    reject(error)\n                })\n            }, function(error) {\n                bitmap.clear()\n                reject(error)\n            })\n            return\n        }\n        if (typeof wx === 'object' && wx.canIUse('getFileSystemManager')) {\n            var filePath = wx.env.USER_DATA_PATH + '/' + fileName\n            wx.getFileSystemManager().writeFile({\n                filePath: filePath,\n                data: base64.replace(/^data:\\S+\\/\\S+;base64,/, ''),\n                encoding: 'base64',\n                success: function() {\n                    resolve(filePath)\n                },\n                fail: function(error) {\n                    reject(error)\n                }\n            })\n            return\n        }\n        reject(new Error('not support'))\n    })\n}","module.exports = {\n\terror:'',\n\tisJSON : function (str){\n\t\tif (typeof str == 'string') {\n\t\t\ttry {\n\t\t\t\tvar obj=JSON.parse(str);\n\t\t\t\tif(typeof obj == 'object' && obj ){\n\t\t\t\t\treturn true;\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tconsole.log('error：'+str+'!!!'+e);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\tisNumber : function (checkVal){\n\t\tvar reg = /^-?[1-9][0-9]?.?[0-9]*$/;\n\t\treturn reg.test(checkVal);\n\t}\n}","// import QQMapWX from \"./qqmap-wx-jssdk.js\";\n// import AmapWX from './amap-wx.js'\n// var amapKey=\"83dd75107efbb10605ef3f89c4f76527\";\n// /** \n//  * 此方法为腾讯位置服务方法  日调用量1万次/key,并发数5次/key/秒\n//  * @param {Object} location\n//  * @param {Object} callback\n//  */\n// function tencentGeocode(lat, lon, callback) {\n// \tconst qqmapsdk = new QQMapWX({\n// \t\tkey: \"SQYBZ-GEGRF-7YJJL-JCRZJ-BYD32-2XBZV\" //自己申请的key\n// \t});\n// \tlet location = {\n// \t\tlatitude: lat,\n// \t\tlongitude: lon\n// \t}\n// \tqqmapsdk.reverseGeocoder({\n// \t\tlocation: location,\n// \t\tsuccess(addressRes) {\n// \t\t\tlet address = addressRes.result.address\n// \t\t\tcallback(address)\n// \t\t\tconsole.log('腾讯->', address)\n// \t\t},\n// \t\tfail(res) {\n// \t\t\tconsole.log('失败', res)\n// \t\t}\n// \t});\n// }\n// /** \n//  * 附近搜索\n//  * @param {Object} location\n//  * @param {Object} callback\n//  */\n// function getPoiAround(lat, lon,keywords,callback) {\n// \tconst amapPlugin = new AmapWX.AMapWX({\n// \t key: amapKey\n// \t});\n// \tlet location = '' + lon + ',' + lat + '';\n\t\n// \tamapPlugin.getPoiAround({\n// \t location: location, //location的格式为'经度,纬度'，\n// \t querykeywords:keywords,\n// \t //成功回调\n// \t success: function(data) {\n// \t  callback(data)\n// \t  //console.log(\"附近->\", data)\n// \t },\n// \t fail: function(info) {\n// \t  //失败回调\n// \t  console.log(info)\n\t  \n// \t }\n// \t})\n   \n//    }\n// /** \n//  * 此方法为高德位置服务方法  \n//  * @param {Object} location\n//  * @param {Object} callback\n//  */\n// function amapGeocode(lat, lon, callback) {\n// \tconst amapPlugin = new AmapWX.AMapWX({\n// \t\tkey: \"83dd75107efbb10605ef3f89c4f76527\"\n// \t});\n// \tlet location = '' + lon + ',' + lat + '';\n// \tamapPlugin.getRegeo({\n// \t\tlocation: location, //location的格式为'经度,纬度'\n// \t\t//成功回调\n// \t\tsuccess: function(data) {\n// \t\t\tlet address = data[0].name + data[0].desc\n// \t\t\tcallback(address)\n// \t\t\t// console.log(\"高德->\", address)\n// \t\t},\n// \t\tfail: function(info) {\n// \t\t\t//失败回调\n// \t\t\tconsole.log(info)\n// \t\t\t// 定位权限未开启，引导设置\n// \t\t\t// uni.showModal({\n// \t\t\t// \ttitle: '温馨提示',\n// \t\t\t// \tcontent: '您已拒绝定位,请开启',\n// \t\t\t// \tconfirmText: '去设置',\n// \t\t\t// \tsuccess(res) {\n// \t\t\t// \t\tif (res.confirm) {\n// \t\t\t// \t\t\t//打开授权设置\n// \t\t\t// \t\t\tthat.openSetting()\n// \t\t\t// \t\t}\n// \t\t\t// \t}\n// \t\t\t// })\n// \t\t}\n// \t})\n\n// }\n\n// export default {\n// \ttencentGeocode,\n// \tamapGeocode,\n// \tgetPoiAround\n// }\n","// /**\n//  * 微信小程序JavaScriptSDK\n//  * \n//  * @version 1.2\n//  * @date 2019-03-06\n//  * @author v_ylyue@tencent.com\n//  */\n\n// var ERROR_CONF = {\n//     KEY_ERR: 311,\n//     KEY_ERR_MSG: 'key格式错误',\n//     PARAM_ERR: 310,\n//     PARAM_ERR_MSG: '请求参数信息有误',\n//     SYSTEM_ERR: 600,\n//     SYSTEM_ERR_MSG: '系统错误',\n//     WX_ERR_CODE: 1000,\n//     WX_OK_CODE: 200\n// };\n// var BASE_URL = 'https://apis.map.qq.com/ws/';\n// var URL_SEARCH = BASE_URL + 'place/v1/search';\n// var URL_SUGGESTION = BASE_URL + 'place/v1/suggestion';\n// var URL_GET_GEOCODER = BASE_URL + 'geocoder/v1/';\n// var URL_CITY_LIST = BASE_URL + 'district/v1/list';\n// var URL_AREA_LIST = BASE_URL + 'district/v1/getchildren';\n// var URL_DISTANCE = BASE_URL + 'distance/v1/';\n// var URL_DIRECTION = BASE_URL + 'direction/v1/';\n// var MODE = {\n//   driving: 'driving',\n//   transit: 'transit'\n// };\n// var EARTH_RADIUS = 6378136.49;\n// var Utils = {\n//   /**\n//   * md5加密方法\n//   * 版权所有©2011 Sebastian Tschan，https：//blueimp.net\n//   */\n//   safeAdd(x, y) {\n//     var lsw = (x & 0xffff) + (y & 0xffff);\n//     var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n//     return (msw << 16) | (lsw & 0xffff);\n//   },\n//   bitRotateLeft(num, cnt) {\n//     return (num << cnt) | (num >>> (32 - cnt));\n//   },\n//   md5cmn(q, a, b, x, s, t) {\n//     return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(a, q), this.safeAdd(x, t)), s), b);\n//   },\n//   md5ff(a, b, c, d, x, s, t) {\n//     return this.md5cmn((b & c) | (~b & d), a, b, x, s, t);\n//   },\n//   md5gg(a, b, c, d, x, s, t) {\n//     return this.md5cmn((b & d) | (c & ~d), a, b, x, s, t);\n//   },\n//   md5hh(a, b, c, d, x, s, t) {\n//     return this.md5cmn(b ^ c ^ d, a, b, x, s, t);\n//   },\n//   md5ii(a, b, c, d, x, s, t) {\n//     return this.md5cmn(c ^ (b | ~d), a, b, x, s, t);\n//   },\n//   binlMD5(x, len) {\n//     /* append padding */\n//     x[len >> 5] |= 0x80 << (len % 32);\n//     x[((len + 64) >>> 9 << 4) + 14] = len;\n\n//     var i;\n//     var olda;\n//     var oldb;\n//     var oldc;\n//     var oldd;\n//     var a = 1732584193;\n//     var b = -271733879;\n//     var c = -1732584194;\n//     var d = 271733878;\n\n//     for (i = 0; i < x.length; i += 16) {\n//       olda = a;\n//       oldb = b;\n//       oldc = c;\n//       oldd = d;\n\n//       a = this.md5ff(a, b, c, d, x[i], 7, -680876936);\n//       d = this.md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n//       c = this.md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n//       b = this.md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n//       a = this.md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n//       d = this.md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n//       c = this.md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n//       b = this.md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n//       a = this.md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n//       d = this.md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n//       c = this.md5ff(c, d, a, b, x[i + 10], 17, -42063);\n//       b = this.md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n//       a = this.md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n//       d = this.md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n//       c = this.md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n//       b = this.md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n//       a = this.md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n//       d = this.md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n//       c = this.md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n//       b = this.md5gg(b, c, d, a, x[i], 20, -373897302);\n//       a = this.md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n//       d = this.md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n//       c = this.md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n//       b = this.md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n//       a = this.md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n//       d = this.md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n//       c = this.md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n//       b = this.md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n//       a = this.md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n//       d = this.md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n//       c = this.md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n//       b = this.md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n//       a = this.md5hh(a, b, c, d, x[i + 5], 4, -378558);\n//       d = this.md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n//       c = this.md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n//       b = this.md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n//       a = this.md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n//       d = this.md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n//       c = this.md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n//       b = this.md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n//       a = this.md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n//       d = this.md5hh(d, a, b, c, x[i], 11, -358537222);\n//       c = this.md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n//       b = this.md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n//       a = this.md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n//       d = this.md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n//       c = this.md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n//       b = this.md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n//       a = this.md5ii(a, b, c, d, x[i], 6, -198630844);\n//       d = this.md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n//       c = this.md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n//       b = this.md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n//       a = this.md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n//       d = this.md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n//       c = this.md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n//       b = this.md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n//       a = this.md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n//       d = this.md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n//       c = this.md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n//       b = this.md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n//       a = this.md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n//       d = this.md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n//       c = this.md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n//       b = this.md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n//       a = this.safeAdd(a, olda);\n//       b = this.safeAdd(b, oldb);\n//       c = this.safeAdd(c, oldc);\n//       d = this.safeAdd(d, oldd);\n//     }\n//     return [a, b, c, d];\n//   },\n//   binl2rstr(input) {\n//     var i;\n//     var output = '';\n//     var length32 = input.length * 32;\n//     for (i = 0; i < length32; i += 8) {\n//       output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xff);\n//     }\n//     return output;\n//   },\n//   rstr2binl(input) {\n//     var i;\n//     var output = [];\n//     output[(input.length >> 2) - 1] = undefined;\n//     for (i = 0; i < output.length; i += 1) {\n//       output[i] = 0;\n//     }\n//     var length8 = input.length * 8;\n//     for (i = 0; i < length8; i += 8) {\n//       output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << (i % 32);\n//     }\n//     return output;\n//   },\n//   rstrMD5(s) {\n//     return this.binl2rstr(this.binlMD5(this.rstr2binl(s), s.length * 8));\n//   },\n//   rstrHMACMD5(key, data) {\n//     var i;\n//     var bkey = this.rstr2binl(key);\n//     var ipad = [];\n//     var opad = [];\n//     var hash;\n//     ipad[15] = opad[15] = undefined;\n//     if (bkey.length > 16) {\n//       bkey = this.binlMD5(bkey, key.length * 8);\n//     }\n//     for (i = 0; i < 16; i += 1) {\n//       ipad[i] = bkey[i] ^ 0x36363636;\n//       opad[i] = bkey[i] ^ 0x5c5c5c5c;\n//     }\n//     hash = this.binlMD5(ipad.concat(this.rstr2binl(data)), 512 + data.length * 8);\n//     return this.binl2rstr(this.binlMD5(opad.concat(hash), 512 + 128));\n//   },\n//   rstr2hex(input) {\n//     var hexTab = '0123456789abcdef';\n//     var output = '';\n//     var x;\n//     var i;\n//     for (i = 0; i < input.length; i += 1) {\n//       x = input.charCodeAt(i);\n//       output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f);\n//     }\n//     return output;\n//   },\n//   str2rstrUTF8(input) {\n//     return unescape(encodeURIComponent(input));\n//   },\n//   rawMD5(s) {\n//     return this.rstrMD5(this.str2rstrUTF8(s));\n//   },\n//   hexMD5(s) {\n//     return this.rstr2hex(this.rawMD5(s));\n//   },\n//   rawHMACMD5(k, d) {\n//     return this.rstrHMACMD5(this.str2rstrUTF8(k), str2rstrUTF8(d));\n//   },\n//   hexHMACMD5(k, d) {\n//     return this.rstr2hex(this.rawHMACMD5(k, d));\n//   },\n\n//   md5(string, key, raw) {\n//     if (!key) {\n//       if (!raw) {\n//         return this.hexMD5(string);\n//       }\n//       return this.rawMD5(string);\n//     }\n//     if (!raw) {\n//       return this.hexHMACMD5(key, string);\n//     }\n//     return this.rawHMACMD5(key, string);\n//   },\n//   /**\n//    * 得到md5加密后的sig参数\n//    * @param {Object} requestParam 接口参数\n//    * @param {String} sk签名字符串\n//    * @param {String} featrue 方法名\n//    * @return 返回加密后的sig参数\n//    */\n//   getSig(requestParam, sk, feature, mode) {\n//     var sig = null;\n//     var requestArr = [];\n//     Object.keys(requestParam).sort().forEach(function(key){\n//       requestArr.push(key + '=' + requestParam[key]);\n//     });\n//     if (feature == 'search') {\n//       sig = '/ws/place/v1/search?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'suggest') {\n//       sig = '/ws/place/v1/suggestion?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'reverseGeocoder') {\n//       sig = '/ws/geocoder/v1/?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'geocoder') {\n//       sig = '/ws/geocoder/v1/?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'getCityList') {\n//       sig = '/ws/district/v1/list?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'getDistrictByCityId') {\n//       sig = '/ws/district/v1/getchildren?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'calculateDistance') {\n//       sig = '/ws/distance/v1/?' + requestArr.join('&') + sk;\n//     }\n//     if (feature == 'direction') {\n//       sig = '/ws/direction/v1/' + mode + '?' + requestArr.join('&') + sk;\n//     }\n//     sig = this.md5(sig);\n//     return sig;\n//   },\n//     /**\n//      * 得到终点query字符串\n//      * @param {Array|String} 检索数据\n//      */\n//     location2query(data) {\n//         if (typeof data == 'string') {\n//             return data;\n//         }\n//         var query = '';\n//         for (var i = 0; i < data.length; i++) {\n//             var d = data[i];\n//             if (!!query) {\n//                 query += ';';\n//             }\n//             if (d.location) {\n//                 query = query + d.location.lat + ',' + d.location.lng;\n//             }\n//             if (d.latitude && d.longitude) {\n//                 query = query + d.latitude + ',' + d.longitude;\n//             }\n//         }\n//         return query;\n//     },\n\n//     /**\n//      * 计算角度\n//      */\n//     rad(d) {\n//       return d * Math.PI / 180.0;\n//     },  \n//     /**\n//      * 处理终点location数组\n//      * @return 返回终点数组\n//      */\n//     getEndLocation(location){\n//       var to = location.split(';');\n//       var endLocation = [];\n//       for (var i = 0; i < to.length; i++) {\n//         endLocation.push({\n//           lat: parseFloat(to[i].split(',')[0]),\n//           lng: parseFloat(to[i].split(',')[1])\n//         })\n//       }\n//       return endLocation;\n//     },\n\n//     /**\n//      * 计算两点间直线距离\n//      * @param a 表示纬度差\n//      * @param b 表示经度差\n//      * @return 返回的是距离，单位m\n//      */\n//     getDistance(latFrom, lngFrom, latTo, lngTo) {\n//       var radLatFrom = this.rad(latFrom);\n//       var radLatTo = this.rad(latTo);\n//       var a = radLatFrom - radLatTo;\n//       var b = this.rad(lngFrom) - this.rad(lngTo);\n//       var distance = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(radLatFrom) * Math.cos(radLatTo) * Math.pow(Math.sin(b / 2), 2)));\n//       distance = distance * EARTH_RADIUS;\n//       distance = Math.round(distance * 10000) / 10000;\n//       return parseFloat(distance.toFixed(0));\n//     },\n//     /**\n//      * 使用微信接口进行定位\n//      */\n//     getWXLocation(success, fail, complete) {\n//         wx.getLocation({\n//             type: 'gcj02',\n//             success: success,\n//             fail: fail,\n//             complete: complete\n//         });\n//     },\n\n//     /**\n//      * 获取location参数\n//      */\n//     getLocationParam(location) {\n//         if (typeof location == 'string') {\n//             var locationArr = location.split(',');\n//             if (locationArr.length === 2) {\n//                 location = {\n//                     latitude: location.split(',')[0],\n//                     longitude: location.split(',')[1]\n//                 };\n//             } else {\n//                 location = {};\n//             }\n//         }\n//         return location;\n//     },\n\n//     /**\n//      * 回调函数默认处理\n//      */\n//     polyfillParam(param) {\n//         param.success = param.success || function () { };\n//         param.fail = param.fail || function () { };\n//         param.complete = param.complete || function () { };\n//     },\n\n//     /**\n//      * 验证param对应的key值是否为空\n//      * \n//      * @param {Object} param 接口参数\n//      * @param {String} key 对应参数的key\n//      */\n//     checkParamKeyEmpty(param, key) {\n//         if (!param[key]) {\n//             var errconf = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + key +'参数格式有误');\n//             param.fail(errconf);\n//             param.complete(errconf);\n//             return true;\n//         }\n//         return false;\n//     },\n\n//     /**\n//      * 验证参数中是否存在检索词keyword\n//      * \n//      * @param {Object} param 接口参数\n//      */\n//     checkKeyword(param){\n//         return !this.checkParamKeyEmpty(param, 'keyword');\n//     },\n\n//     /**\n//      * 验证location值\n//      * \n//      * @param {Object} param 接口参数\n//      */\n//     checkLocation(param) {\n//         var location = this.getLocationParam(param.location);\n//         if (!location || !location.latitude || !location.longitude) {\n//             var errconf = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + ' location参数格式有误');\n//             param.fail(errconf);\n//             param.complete(errconf);\n//             return false;\n//         }\n//         return true;\n//     },\n\n//     /**\n//      * 构造错误数据结构\n//      * @param {Number} errCode 错误码\n//      * @param {Number} errMsg 错误描述\n//      */\n//     buildErrorConfig(errCode, errMsg) {\n//         return {\n//             status: errCode,\n//             message: errMsg\n//         };\n//     },\n\n//     /**\n//      * \n//      * 数据处理函数\n//      * 根据传入参数不同处理不同数据\n//      * @param {String} feature 功能名称\n//      * search 地点搜索\n//      * suggest关键词提示\n//      * reverseGeocoder逆地址解析\n//      * geocoder地址解析\n//      * getCityList获取城市列表：父集\n//      * getDistrictByCityId获取区县列表：子集\n//      * calculateDistance距离计算\n//      * @param {Object} param 接口参数\n//      * @param {Object} data 数据\n//      */\n//     handleData(param,data,feature){\n//       if (feature == 'search') {\n//         var searchResult = data.data;\n//         var searchSimplify = [];\n//         for (var i = 0; i < searchResult.length; i++) {\n//           searchSimplify.push({\n//             id: searchResult[i].id || null,\n//             title: searchResult[i].title || null,\n//             latitude: searchResult[i].location && searchResult[i].location.lat || null,\n//             longitude: searchResult[i].location && searchResult[i].location.lng || null,\n//             address: searchResult[i].address || null,\n//             category: searchResult[i].category || null,\n//             tel: searchResult[i].tel || null,\n//             adcode: searchResult[i].ad_info && searchResult[i].ad_info.adcode || null,\n//             city: searchResult[i].ad_info && searchResult[i].ad_info.city || null,\n//             district: searchResult[i].ad_info && searchResult[i].ad_info.district || null,\n//             province: searchResult[i].ad_info && searchResult[i].ad_info.province || null\n//           })\n//         }\n//         param.success(data, {\n//           searchResult: searchResult,\n//           searchSimplify: searchSimplify\n//         })\n//       } else if (feature == 'suggest') {\n//         var suggestResult = data.data;\n//         var suggestSimplify = [];\n//         for (var i = 0; i < suggestResult.length; i++) {\n//           suggestSimplify.push({\n//             adcode: suggestResult[i].adcode || null,\n//             address: suggestResult[i].address || null,\n//             category: suggestResult[i].category || null,\n//             city: suggestResult[i].city || null,\n//             district: suggestResult[i].district || null,\n//             id: suggestResult[i].id || null,\n//             latitude: suggestResult[i].location && suggestResult[i].location.lat || null,\n//             longitude: suggestResult[i].location && suggestResult[i].location.lng || null,\n//             province: suggestResult[i].province || null,\n//             title: suggestResult[i].title || null,\n//             type: suggestResult[i].type || null\n//           })\n//         }\n//         param.success(data, {\n//           suggestResult: suggestResult,\n//           suggestSimplify: suggestSimplify\n//           })\n//       } else if (feature == 'reverseGeocoder') {\n//         var reverseGeocoderResult = data.result;\n//         var reverseGeocoderSimplify = {\n//           address: reverseGeocoderResult.address || null,\n//           latitude: reverseGeocoderResult.location && reverseGeocoderResult.location.lat || null,\n//           longitude: reverseGeocoderResult.location && reverseGeocoderResult.location.lng || null,\n//           adcode: reverseGeocoderResult.ad_info && reverseGeocoderResult.ad_info.adcode || null,\n//           city: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.city || null,\n//           district: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.district || null,\n//           nation: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.nation || null,\n//           province: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.province || null,\n//           street: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.street || null,\n//           street_number: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.street_number || null,\n//           recommend: reverseGeocoderResult.formatted_addresses && reverseGeocoderResult.formatted_addresses.recommend || null,\n//           rough: reverseGeocoderResult.formatted_addresses && reverseGeocoderResult.formatted_addresses.rough || null\n//         };\n//         if (reverseGeocoderResult.pois) {//判断是否返回周边poi\n//           var pois = reverseGeocoderResult.pois;\n//           var poisSimplify = [];\n//           for (var i = 0;i < pois.length;i++) {\n//             poisSimplify.push({\n//               id: pois[i].id || null,\n//               title: pois[i].title || null,\n//               latitude: pois[i].location && pois[i].location.lat || null,\n//               longitude: pois[i].location && pois[i].location.lng || null,\n//               address: pois[i].address || null,\n//               category: pois[i].category || null,\n//               adcode: pois[i].ad_info && pois[i].ad_info.adcode || null,\n//               city: pois[i].ad_info && pois[i].ad_info.city || null,\n//               district: pois[i].ad_info && pois[i].ad_info.district || null,\n//               province: pois[i].ad_info && pois[i].ad_info.province || null\n//             })\n//           }\n//           param.success(data,{\n//             reverseGeocoderResult: reverseGeocoderResult,\n//             reverseGeocoderSimplify: reverseGeocoderSimplify,\n//             pois: pois,\n//             poisSimplify: poisSimplify\n//           })\n//         } else {\n//           param.success(data, {\n//             reverseGeocoderResult: reverseGeocoderResult,\n//             reverseGeocoderSimplify: reverseGeocoderSimplify\n//           })\n//         }\n//       } else if (feature == 'geocoder') {\n//         var geocoderResult = data.result;\n//         var geocoderSimplify = {\n//           title: geocoderResult.title || null,\n//           latitude: geocoderResult.location && geocoderResult.location.lat || null,\n//           longitude: geocoderResult.location && geocoderResult.location.lng || null,\n//           adcode: geocoderResult.ad_info && geocoderResult.ad_info.adcode || null,\n//           province: geocoderResult.address_components && geocoderResult.address_components.province || null,\n//           city: geocoderResult.address_components && geocoderResult.address_components.city || null,\n//           district: geocoderResult.address_components && geocoderResult.address_components.district || null,\n//           street: geocoderResult.address_components && geocoderResult.address_components.street || null,\n//           street_number: geocoderResult.address_components && geocoderResult.address_components.street_number || null,\n//           level: geocoderResult.level || null\n//         };\n//         param.success(data,{\n//           geocoderResult: geocoderResult,\n//           geocoderSimplify: geocoderSimplify\n//         });\n//       } else if (feature == 'getCityList') {\n//         var provinceResult = data.result[0];\n//         var cityResult = data.result[1];\n//         var districtResult = data.result[2];\n//         param.success(data,{\n//           provinceResult: provinceResult,\n//           cityResult: cityResult,\n//           districtResult: districtResult\n//         });\n//       } else if (feature == 'getDistrictByCityId') {\n//         var districtByCity = data.result[0];\n//         param.success(data, districtByCity);\n//       } else if (feature == 'calculateDistance') {\n//         var calculateDistanceResult = data.result.elements;  \n//         var distance = [];\n//         for (var i = 0; i < calculateDistanceResult.length; i++){\n//           distance.push(calculateDistanceResult[i].distance);\n//         }   \n//         param.success(data, {\n//           calculateDistanceResult: calculateDistanceResult,\n//           distance: distance\n//           });\n//       } else if (feature == 'direction') {\n//         var direction = data.result.routes;\n//         param.success(data,direction);\n//       } else {\n//         param.success(data);\n//       }\n//     },\n\n//     /**\n//      * 构造微信请求参数，公共属性处理\n//      * \n//      * @param {Object} param 接口参数\n//      * @param {Object} param 配置项\n//      * @param {String} feature 方法名\n//      */\n//     buildWxRequestConfig(param, options, feature) {\n//         var that = this;\n//         options.header = { \"content-type\": \"application/json\" };\n//         options.method = 'GET';\n//         options.success = function (res) {\n//             var data = res.data;\n//             if (data.status === 0) {\n//               that.handleData(param, data, feature);\n//             } else {\n//                 param.fail(data);\n//             }\n//         };\n//         options.fail = function (res) {\n//             res.statusCode = ERROR_CONF.WX_ERR_CODE;\n//             param.fail(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\n//         };\n//         options.complete = function (res) {\n//             var statusCode = +res.statusCode;\n//             switch(statusCode) {\n//                 case ERROR_CONF.WX_ERR_CODE: {\n//                     param.complete(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\n//                     break;\n//                 }\n//                 case ERROR_CONF.WX_OK_CODE: {\n//                     var data = res.data;\n//                     if (data.status === 0) {\n//                         param.complete(data);\n//                     } else {\n//                         param.complete(that.buildErrorConfig(data.status, data.message));\n//                     }\n//                     break;\n//                 }\n//                 default:{\n//                     param.complete(that.buildErrorConfig(ERROR_CONF.SYSTEM_ERR, ERROR_CONF.SYSTEM_ERR_MSG));\n//                 }\n\n//             }\n//         };\n//         return options;\n//     },\n\n//     /**\n//      * 处理用户参数是否传入坐标进行不同的处理\n//      */\n//     locationProcess(param, locationsuccess, locationfail, locationcomplete) {\n//         var that = this;\n//         locationfail = locationfail || function (res) {\n//             res.statusCode = ERROR_CONF.WX_ERR_CODE;\n//             param.fail(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\n//         };\n//         locationcomplete = locationcomplete || function (res) {\n//             if (res.statusCode == ERROR_CONF.WX_ERR_CODE) {\n//                 param.complete(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\n//             }\n//         };\n//         if (!param.location) {\n//             that.getWXLocation(locationsuccess, locationfail, locationcomplete);\n//         } else if (that.checkLocation(param)) {\n//             var location = Utils.getLocationParam(param.location);\n//             locationsuccess(location);\n//         }\n//     }\n// };\n\n\n// class QQMapWX {\n\n//     /**\n//      * 构造函数\n//      * \n//      * @param {Object} options 接口参数,key 为必选参数\n//      */\n//     constructor(options) {\n//         if (!options.key) {\n//             throw Error('key值不能为空');\n//         }\n//         this.key = options.key;\n//     };\n\n//     /**\n//      * POI周边检索\n//      *\n//      * @param {Object} options 接口参数对象\n//      * \n//      * 参数对象结构可以参考\n//      * @see http://lbs.qq.com/webservice_v1/guide-search.html\n//      */\n//     search(options) {\n//         var that = this;\n//         options = options || {};\n\n//         Utils.polyfillParam(options);\n\n//         if (!Utils.checkKeyword(options)) {\n//             return;\n//         }\n\n//         var requestParam = {\n//             keyword: options.keyword,\n//             orderby: options.orderby || '_distance',\n//             page_size: options.page_size || 10,\n//             page_index: options.page_index || 1,\n//             output: 'json',\n//             key: that.key\n//         };\n\n//         if (options.address_format) {\n//             requestParam.address_format = options.address_format;\n//         }\n\n//         if (options.filter) {\n//             requestParam.filter = options.filter;\n//         }\n\n//         var distance = options.distance || \"1000\";\n//         var auto_extend = options.auto_extend || 1;\n//         var region = null;\n//         var rectangle = null;\n\n//         //判断城市限定参数\n//         if (options.region) {\n//           region = options.region;\n//         }\n\n//         //矩形限定坐标(暂时只支持字符串格式)\n//         if (options.rectangle) {\n//           rectangle = options.rectangle;\n//         }\n\n//         var locationsuccess = function (result) {        \n//           if (region && !rectangle) {\n//             //城市限定参数拼接\n//             requestParam.boundary = \"region(\" + region + \",\" + auto_extend + \",\" + result.latitude + \",\" + result.longitude + \")\";\n//             if (options.sig) {\n//               requestParam.sig = Utils.getSig(requestParam, options.sig, 'search');\n//             }\n//           } else if (rectangle && !region) {\n//             //矩形搜索\n//             requestParam.boundary = \"rectangle(\" + rectangle + \")\";\n//             if (options.sig) {\n//               requestParam.sig = Utils.getSig(requestParam, options.sig, 'search');\n//             }\n//             } else {\n//               requestParam.boundary = \"nearby(\" + result.latitude + \",\" + result.longitude + \",\" + distance + \",\" + auto_extend + \")\";\n//             if (options.sig) {\n//               requestParam.sig = Utils.getSig(requestParam, options.sig, 'search');\n//             }\n//             }            \n//             wx.request(Utils.buildWxRequestConfig(options, {\n//                 url: URL_SEARCH,\n//                 data: requestParam\n//             }, 'search'));\n//         };\n//         Utils.locationProcess(options, locationsuccess);\n//     };\n\n//     /**\n//      * sug模糊检索\n//      *\n//      * @param {Object} options 接口参数对象\n//      * \n//      * 参数对象结构可以参考\n//      * http://lbs.qq.com/webservice_v1/guide-suggestion.html\n//      */\n//     getSuggestion(options) {\n//         var that = this;\n//         options = options || {};\n//         Utils.polyfillParam(options);\n\n//         if (!Utils.checkKeyword(options)) {\n//             return;\n//         }\n\n//         var requestParam = {\n//             keyword: options.keyword,\n//             region: options.region || '全国',\n//             region_fix: options.region_fix || 0,\n//             policy: options.policy || 0,\n//             page_size: options.page_size || 10,//控制显示条数\n//             page_index: options.page_index || 1,//控制页数\n//             get_subpois : options.get_subpois || 0,//返回子地点\n//             output: 'json',\n//             key: that.key\n//         };\n//         //长地址\n//         if (options.address_format) {\n//           requestParam.address_format = options.address_format;\n//         }\n//         //过滤\n//         if (options.filter) {\n//           requestParam.filter = options.filter;\n//         }\n//         //排序\n//         if (options.location) {\n//           var locationsuccess = function (result) {\n//             requestParam.location = result.latitude + ',' + result.longitude;\n//             if (options.sig) {\n//               requestParam.sig = Utils.getSig(requestParam, options.sig, 'suggest');\n//             }\n//             wx.request(Utils.buildWxRequestConfig(options, {\n//               url: URL_SUGGESTION,\n//               data: requestParam\n//             }, \"suggest\"));      \n//           };\n//           Utils.locationProcess(options, locationsuccess);\n//         } else {\n//           if (options.sig) {\n//             requestParam.sig = Utils.getSig(requestParam, options.sig, 'suggest');\n//           }\n//           wx.request(Utils.buildWxRequestConfig(options, {\n//             url: URL_SUGGESTION,\n//             data: requestParam\n//           }, \"suggest\"));      \n//         }        \n//     };\n\n//     /**\n//      * 逆地址解析\n//      *\n//      * @param {Object} options 接口参数对象\n//      * \n//      * 请求参数结构可以参考\n//      * http://lbs.qq.com/webservice_v1/guide-gcoder.html\n//      */\n//     reverseGeocoder(options) {\n//         var that = this;\n//         options = options || {};\n//         Utils.polyfillParam(options);\n//         var requestParam = {\n//             coord_type: options.coord_type || 5,\n//             get_poi: options.get_poi || 0,\n//             output: 'json',\n//             key: that.key\n//         };\n//         if (options.poi_options) {\n//             requestParam.poi_options = options.poi_options\n//         }\n\n//         var locationsuccess = function (result) {\n//             requestParam.location = result.latitude + ',' + result.longitude;\n//           if (options.sig) {\n//             requestParam.sig = Utils.getSig(requestParam, options.sig, 'reverseGeocoder');\n//           }\n//             wx.request(Utils.buildWxRequestConfig(options, {\n//                 url: URL_GET_GEOCODER,\n//                 data: requestParam\n//             }, 'reverseGeocoder'));\n//         };\n//         Utils.locationProcess(options, locationsuccess);\n//     };\n\n//     /**\n//      * 地址解析\n//      *\n//      * @param {Object} options 接口参数对象\n//      * \n//      * 请求参数结构可以参考\n//      * http://lbs.qq.com/webservice_v1/guide-geocoder.html\n//      */\n//     geocoder(options) {\n//         var that = this;\n//         options = options || {};\n//         Utils.polyfillParam(options);\n\n//         if (Utils.checkParamKeyEmpty(options, 'address')) {\n//             return;\n//         }\n\n//         var requestParam = {\n//             address: options.address,\n//             output: 'json',\n//             key: that.key\n//         };\n\n//         //城市限定\n//         if (options.region) {\n//           requestParam.region = options.region;\n//         }\n\n//         if (options.sig) {\n//           requestParam.sig = Utils.getSig(requestParam, options.sig, 'geocoder');\n//         }\n\n//         wx.request(Utils.buildWxRequestConfig(options, {\n//             url: URL_GET_GEOCODER,\n//             data: requestParam\n//         },'geocoder'));\n//     };\n\n\n//     /**\n//      * 获取城市列表\n//      *\n//      * @param {Object} options 接口参数对象\n//      * \n//      * 请求参数结构可以参考\n//      * http://lbs.qq.com/webservice_v1/guide-region.html\n//      */\n//     getCityList(options) {\n//         var that = this;\n//         options = options || {};\n//         Utils.polyfillParam(options);\n//         var requestParam = {\n//             output: 'json',\n//             key: that.key\n//         };\n\n//         if (options.sig) {\n//           requestParam.sig = Utils.getSig(requestParam, options.sig, 'getCityList');\n//         }\n\n//         wx.request(Utils.buildWxRequestConfig(options, {\n//             url: URL_CITY_LIST,\n//             data: requestParam\n//         },'getCityList'));\n//     };\n\n//     /**\n//      * 获取对应城市ID的区县列表\n//      *\n//      * @param {Object} options 接口参数对象\n//      * \n//      * 请求参数结构可以参考\n//      * http://lbs.qq.com/webservice_v1/guide-region.html\n//      */\n//     getDistrictByCityId(options) {\n//         var that = this;\n//         options = options || {};\n//         Utils.polyfillParam(options);\n\n//         if (Utils.checkParamKeyEmpty(options, 'id')) {\n//             return;\n//         }\n\n//         var requestParam = {\n//             id: options.id || '',\n//             output: 'json',\n//             key: that.key\n//         };\n\n//         if (options.sig) {\n//           requestParam.sig = Utils.getSig(requestParam, options.sig, 'getDistrictByCityId');\n//         }\n\n//         wx.request(Utils.buildWxRequestConfig(options, {\n//             url: URL_AREA_LIST,\n//             data: requestParam\n//         },'getDistrictByCityId'));\n//     };\n\n//     /**\n//      * 用于单起点到多终点的路线距离(非直线距离)计算：\n//      * 支持两种距离计算方式：步行和驾车。\n//      * 起点到终点最大限制直线距离10公里。\n//      *\n//      * 新增直线距离计算。\n//      * \n//      * @param {Object} options 接口参数对象\n//      * \n//      * 请求参数结构可以参考\n//      * http://lbs.qq.com/webservice_v1/guide-distance.html\n//      */\n//     calculateDistance(options) {\n//         var that = this;\n//         options = options || {};\n//         Utils.polyfillParam(options);\n\n//         if (Utils.checkParamKeyEmpty(options, 'to')) {\n//             return;\n//         }\n\n//         var requestParam = {\n//             mode: options.mode || 'walking',\n//             to: Utils.location2query(options.to),\n//             output: 'json',\n//             key: that.key\n//         };\n\n//         if (options.from) {\n//           options.location = options.from;\n//         }\n\n//         //计算直线距离\n//         if(requestParam.mode == 'straight'){        \n//           var locationsuccess = function (result) {\n//             var locationTo = Utils.getEndLocation(requestParam.to);//处理终点坐标\n//             var data = {\n//               message:\"query ok\",\n//               result:{\n//                 elements:[]\n//               },\n//               status:0\n//             };\n//             for (var i = 0; i < locationTo.length; i++) {\n//               data.result.elements.push({//将坐标存入\n//                 distance: Utils.getDistance(result.latitude, result.longitude, locationTo[i].lat, locationTo[i].lng),\n//                 duration:0,\n//                 from:{\n//                   lat: result.latitude,\n//                   lng:result.longitude\n//                 },\n//                 to:{\n//                   lat: locationTo[i].lat,\n//                   lng: locationTo[i].lng\n//                 }\n//               });            \n//             }\n//             var calculateResult = data.result.elements;\n//             var distanceResult = [];\n//             for (var i = 0; i < calculateResult.length; i++) {\n//               distanceResult.push(calculateResult[i].distance);\n//             }  \n//             return options.success(data,{\n//               calculateResult: calculateResult,\n//               distanceResult: distanceResult\n//             });\n//           };\n          \n//           Utils.locationProcess(options, locationsuccess);\n//         } else {\n//           var locationsuccess = function (result) {\n//             requestParam.from = result.latitude + ',' + result.longitude;\n//             if (options.sig) {\n//               requestParam.sig = Utils.getSig(requestParam, options.sig, 'calculateDistance');\n//             }\n//             wx.request(Utils.buildWxRequestConfig(options, {\n//               url: URL_DISTANCE,\n//               data: requestParam\n//             },'calculateDistance'));\n//           };\n\n//           Utils.locationProcess(options, locationsuccess);\n//         }      \n//     };\n\n//   /**\n//    * 路线规划：\n//    * \n//    * @param {Object} options 接口参数对象\n//    * \n//    * 请求参数结构可以参考\n//    * https://lbs.qq.com/webservice_v1/guide-road.html\n//    */\n//   direction(options) {\n//     var that = this;\n//     options = options || {};\n//     Utils.polyfillParam(options);\n\n//     if (Utils.checkParamKeyEmpty(options, 'to')) {\n//       return;\n//     }\n\n//     var requestParam = {\n//       output: 'json',\n//       key: that.key\n//     };\n\n//     //to格式处理\n//     if (typeof options.to == 'string') {\n//       requestParam.to = options.to;\n//     } else {\n//       requestParam.to = options.to.latitude + ',' + options.to.longitude;\n//     }\n//     //初始化局部请求域名\n//     var SET_URL_DIRECTION = null;\n//     //设置默认mode属性\n//     options.mode = options.mode || MODE.driving;\n\n//     //设置请求域名\n//     SET_URL_DIRECTION = URL_DIRECTION + options.mode;\n\n//     if (options.from) {\n//       options.location = options.from;\n//     }\n\n//     if (options.mode == MODE.driving) {\n//       if (options.from_poi) {\n//         requestParam.from_poi = options.from_poi;\n//       }\n//       if (options.heading) {\n//         requestParam.heading = options.heading;\n//       }\n//       if (options.speed) {\n//         requestParam.speed = options.speed;\n//       }\n//       if (options.accuracy) {\n//         requestParam.accuracy = options.accuracy;\n//       }\n//       if (options.road_type) {\n//         requestParam.road_type = options.road_type;\n//       }\n//       if (options.to_poi) {\n//         requestParam.to_poi = options.to_poi;\n//       }\n//       if (options.from_track) {\n//         requestParam.from_track = options.from_track;\n//       }\n//       if (options.waypoints) {\n//         requestParam.waypoints = options.waypoints;\n//       }\n//       if (options.policy) {\n//         requestParam.policy = options.policy;\n//       }\n//       if (options.plate_number) {\n//         requestParam.plate_number = options.plate_number;\n//       }\n//     }\n\n//     if (options.mode == MODE.transit) {\n//       if (options.departure_time) {\n//         requestParam.departure_time = options.departure_time;\n//       }\n//       if (options.policy) {\n//         requestParam.policy = options.policy;\n//       }\n//     } \n\n//     var locationsuccess = function (result) {\n//       requestParam.from = result.latitude + ',' + result.longitude;\n//       if (options.sig) {\n//         requestParam.sig = Utils.getSig(requestParam, options.sig, 'direction',options.mode);\n//       }\n//       wx.request(Utils.buildWxRequestConfig(options, {\n//         url: SET_URL_DIRECTION,\n//         data: requestParam\n//       }, 'direction'));\n//     };\n\n//     Utils.locationProcess(options, locationsuccess);\n//   }\n// };\n\n// module.exports = QQMapWX;"],"sourceRoot":""}