(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/main"],{408:function(e,t,n){"use strict";n.r(t);var o=n(409),a=n(411);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n(413);var r,i=n(15),u=Object(i["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);u.options.__file="pages/index/main.vue",t["default"]=u.exports},409:function(e,t,n){"use strict";n.r(t);var o=n(410);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},410:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return o}));var a=function(){var e=this,t=e.$createElement;e._self._c},s=!1,r=[];a._withStripped=!0},411:function(e,t,n){"use strict";n.r(t);var o=n(412),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},412:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(214)),a=n(3);function s(e){return e&&e.__esModule?e:{default:e}}var r=getApp(),i={setup:function(){var e=(0,a.ref)(""),t=(0,a.ref)(!1),n=function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate())},o=function(o){t.value=!1,e.value=n(o)};return{date:e,show:t,onConfirm:o}},data:function(){return{userInfo:{avatarUrl:"",nickName:""},winHeight:"",hasUserInfo:!1,canIUse:e.canIUse("button.open-type.getUserInfo"),time:2003,info:{name:"yuki",gender:1,votes:8,avatar:"/static/image/detail-bg.jpg",age:0,job:"xcy",height:46,weight:155},rainArr:[],stages:1,during:100,oldest:1e3,plussNum:1,pluss:!1,movetree:!0,treemove:!1,wateroff:!0,watercss:!1,waterdom:!1,value:""}},mounted:function(){var t=e.getStorageSync("userId");t=t.toString(),console.log(t,"userId");var n=this;e.getSystemInfo({success:function(e){var t=e.windowHeight,o=e.windowWidth,a=750/o,s=t*a-280;console.log(s),n.winHeight=s}}),this.setTree(200),this.getvotes(t),this.getUserInfo(t),this.getStage(t),this.temp()},onLoad:function(){var t=this,n=this;e.getSystemInfo({success:function(e){var t=e.windowHeight,o=e.windowWidth,a=750/o,s=t*a-180;console.log(s),n.winHeight=s}}),r.globalData.userInfo?this.setData({userInfo:r.globalData.userInfo,hasUserInfo:!0}):this.canIUse?r.globalData.userInfoReadyCallback=function(e){t.setData({userInfo:e.userInfo,hasUserInfo:!0})}:e.getUserInfo({success:function(e){r.globalData.userInfo=e.userInfo,t.setData({userInfo:e.userInfo,hasUserInfo:!0})}})},methods:{getvotes:function(t){var n=this;e.request({url:"https://xuyq.xyz:3306/tree/getVotes",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e,"getvotes"),n.info.votes=e.data}})},getUserInfo:function(t){var n=this;e.request({url:"https://xuyq.xyz:3306/tree/userInfo",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e.data,"getInfo"),n.info.name=e.data.nickname,n.info.gender=e.data.gender,n.info.avatar=e.data.avatarUrl,n.info.age=e.data.age,n.info.job=e.data.job,n.info.height=e.data.height,n.info.weight=e.data.weight}})},getStage:function(t){e.request({url:"https://xuyq.xyz:3306/tree/getStages",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e,"1111111stages")}})},postPluss:function(){var t=this;console.log("12312312312312");var n=e.getStorageSync("userId");console.log(n,"userId");var o=new Date,a=o.getFullYear(),s=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,r=o.getDate()<10?"0"+o.getDate():o.getDate(),i=a+"-"+s+"-"+r;console.log(i,"dateStrdateStrdateStr");e.request({url:"https://xuyq.xyz:3306/tree/pluss",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:n,time:i},success:function(e){console.log(e,"pluss"),t.getvotes(n),t.setTree(2e3)}})},getRain:function(){var t=e.getStorageSync("userId");console.log(t,"userId");e.request({url:"https://xuyq.xyz:3306/tree/getRainTime",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e,"historyRain")}})},bindViewTap:function(){e.navigateTo({url:"../logs/logs"})},setTree:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;setTimeout((function(){e.setData({plussNum:1,pluss:!1,wateroff:!0,watercss:!1,treemove:!1}),e.during>e.info.vote&&e.setData({stages:1}),e.during<=e.info.votes&&e.oldest>e.info.votes&&e.setData({stages:2}),e.oldest<=e.info.votes&&e.setData({stages:3})}),t)},bubble:function(t){var n=this,o=new Date,a=o.getFullYear(),s=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,r=o.getDate()<10?"0"+o.getDate():o.getDate(),i=a+"-"+s+"-"+r;console.log(i,"dateStrdateStrdateStr");var u=e.getStorageSync("userId");e.request({url:"https://xuyq.xyz:3306/tree/bubble",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:u,rain:t,time:i},success:function(e){console.log(e,"bubble"),n.getvotes(u),n.temp()}})},temp:function(){var t=this,n=e.getStorageSync("userId"),a={url:"tree/templateRain",method:"get"},s={user_id:n};o.default.httpRequest(a,s).then((function(n){e.hideLoading(),200==n.statusCode&&(t.rainArr=n.data,console.log(t.rainArr,"rainArr"))}))},rainFun:function(e){var t=this;console.log(e,"e");var n=e.currentTarget.dataset,o=(n.index,n.value),a=this.info;this.bubble(o),this.temp();var s=this.rainArr;console.log(s,"ceshi"),a.votes=Number(this.info.votes)+(o-0),a.votes=Number(this.info.votes),this.setData({plussNum:o,info:a,pluss:!0,treemove:!0}),setTimeout((function(){t.setData({rainArr:s})}),55500),this.setTree(200)},tree:function(){var e=this;this.movetree&&(this.setData({treemove:!0,movetree:!1}),setTimeout((function(){e.setData({movetree:!0,treemove:!1})}),1e3))},water:function(){var e=this;this.wateroff&&(this.setData({watercss:!0,wateroff:!1}),setTimeout((function(){e.setData({waterdom:!0})}),800),setTimeout((function(){var t=e.info;e.setData({info:t,pluss:!0,treemove:!0,movetree:!1})}),1e3),setTimeout((function(){e.setData({waterdom:!1,movetree:!0})}),2500),this.postPluss())}}};t.default=i}).call(this,n(1)["default"])},413:function(e,t,n){"use strict";n.r(t);var o=n(414),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},414:function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/main.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/main-create-component',
    {
        'pages/index/main-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(408))
        })
    },
    [['pages/index/main-create-component']]
]);
