(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/main"],{322:function(e,t,n){"use strict";n.r(t);var o=n(323),a=n(325);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n(327);var r,i=n(15),u=Object(i["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);u.options.__file="pages/index/main.vue",t["default"]=u.exports},323:function(e,t,n){"use strict";n.r(t);var o=n(324);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},324:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return o}));var a=function(){var e=this,t=e.$createElement;e._self._c},s=!1,r=[];a._withStripped=!0},325:function(e,t,n){"use strict";n.r(t);var o=n(326),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},326:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3),a=getApp(),s={setup:function(){var e=(0,o.ref)(""),t=(0,o.ref)(!1),n=function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate())},a=function(o){t.value=!1,e.value=n(o)};return{date:e,show:t,onConfirm:a}},data:function(){return{userInfo:{avatarUrl:"",nickName:""},winHeight:"",hasUserInfo:!1,canIUse:e.canIUse("button.open-type.getUserInfo"),time:2003,info:{name:"yuki",gender:1,votes:8,avatar:"/static/image/detail-bg.jpg",age:0,job:"xcy",height:46,weight:155},rainArr:[28,63,5,902],stages:1,during:100,oldest:1e3,plussNum:1,pluss:!1,movetree:!0,treemove:!1,wateroff:!0,watercss:!1,waterdom:!1,value:""}},mounted:function(){var t=e.getStorageSync("userId");console.log(t,"userId");var n=this;e.getSystemInfo({success:function(e){var t=e.windowHeight,o=e.windowWidth,a=750/o,s=t*a-280;console.log(s),n.winHeight=s}}),this.getvotes(t),this.getUserInfo(t),this.getStage(t),this.getRain(t),this.getPluss(t)},onLoad:function(){var t=this,n=this;e.getSystemInfo({success:function(e){var t=e.windowHeight,o=e.windowWidth,a=750/o,s=t*a-180;console.log(s),n.winHeight=s}}),a.globalData.userInfo?this.setData({userInfo:a.globalData.userInfo,hasUserInfo:!0}):this.canIUse?a.globalData.userInfoReadyCallback=function(e){t.setData({userInfo:e.userInfo,hasUserInfo:!0})}:e.getUserInfo({success:function(e){a.globalData.userInfo=e.userInfo,t.setData({userInfo:e.userInfo,hasUserInfo:!0})}})},methods:{getvotes:function(t){var n=this;e.request({url:"https://47.102.203.108:3306/tree/getVotes",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e),n.info.votes=e.data}})},getUserInfo:function(t){var n=this;e.request({url:"https://47.102.203.108:3306/tree/userInfo",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e.data,"getInfo"),n.info.name=e.data.nickname,n.info.gender=e.data.gender,n.info.avatar=e.data.avatarUrl,n.info.age=e.data.age,n.info.job=e.data.job,n.info.height=e.data.height,n.info.weight=e.data.weight}})},getStage:function(t){e.request({url:"https://47.102.203.108:3306/tree/getStages",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e,"1111111stages")}})},getPluss:function(t){var n=new Date,o=n.getFullYear(),a=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,s=n.getDate()<10?"0"+n.getDate():n.getDate(),r=o+"-"+a+"-"+s;console.log(r,"dateStrdateStrdateStr");e.request({url:"https://47.102.203.108:3306/tree/pluss",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t,time:r},success:function(e){console.log(e,"pluss")}})},getRain:function(t){e.request({url:"https://47.102.203.108:3306/tree/getRainTime",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{user_id:t},success:function(e){console.log(e,"getRain")}})},bindViewTap:function(){e.navigateTo({url:"../logs/logs"})},setTree:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;setTimeout((function(){e.setData({plussNum:1,pluss:!1,wateroff:!0,watercss:!1,treemove:!1}),e.during>e.info.vote&&e.setData({stages:1}),e.during<=e.info.votes&&e.oldest>e.info.votes&&e.setData({stages:2}),e.oldest<=e.info.votes&&e.setData({stages:3})}),t)},rainFun:function(e){var t=this,n=e.currentTarget.dataset,o=n.index,a=n.value,s=this.info,r=this.rainArr;s.votes=Number(this.info.votes)+(a-0),r.splice(o,1),this.setData({plussNum:a,info:s,pluss:!0,treemove:!0}),setTimeout((function(){t.setData({rainArr:r})}),1e3),this.setTree(2e3)},tree:function(){var e=this;this.movetree&&(this.setData({treemove:!0,movetree:!1}),setTimeout((function(){e.setData({movetree:!0,treemove:!1})}),1e3))},water:function(){var e=this;this.wateroff&&(this.setData({watercss:!0,wateroff:!1}),setTimeout((function(){e.setData({waterdom:!0})}),1500),setTimeout((function(){var t=e.info;t.votes=Number(e.info.votes)+1,e.setData({info:t,pluss:!0,treemove:!0,movetree:!1})}),2e3),setTimeout((function(){e.setData({waterdom:!1,movetree:!0})}),3500),this.setTree())}}};t.default=s}).call(this,n(1)["default"])},327:function(e,t,n){"use strict";n.r(t);var o=n(328),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},328:function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/main.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/main-create-component',
    {
        'pages/index/main-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(322))
        })
    },
    [['pages/index/main-create-component']]
]);
