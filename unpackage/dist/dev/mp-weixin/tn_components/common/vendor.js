(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["tn_components/common/vendor"],{125:function(e,t,r){(function(t){var r=console.log,n={log:function(e){r(e)},showLoading:function(e,r){t.showLoading({title:e,mask:r||!1})},hideLoading:function(){t.hideLoading()},showToast:function(e,r){t.showToast({title:e,icon:r||"none"})},getPosterUrl:function(e){var t=e.backgroundImage,r=e.type;e.formData;return new Promise((function(e,n){var a;if(t)a=t;else switch(r){case 1:a="";break;default:a="/static/1.png";break}a?e(a):n("背景图片路径不存在")}))},shareTypeListSheetArray:{array:[0,1,2,3,4,5]},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isPromise:function(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isUndef:function(e){return void 0===e},isNotNull_string:function(e){return null!==e&&void 0!==e&&""!==e},isFn:function(e){return e&&"function"===typeof e},getStorage:function(e,r,n){t.getStorage({key:e,success:function(e){e.data&&""!=e.data?r&&r(e.data):n&&n()},fail:function(){n&&n()}})},setStorage:function(e,n){r("设置缓存"),r("key："+e),r("data："+JSON.stringify(n)),t.setStorage({key:e,data:n})},setStorageSync:function(e,r){t.setStorageSync(e,r)},getStorageSync:function(e){return t.getStorageSync(e)},clearStorageSync:function(){t.clearStorageSync()},removeStorageSync:function(e){t.removeStorageSync(e)},getImageInfo:function(e,r,n){e=a(e),t.getImageInfo({src:e,success:function(e){r&&"function"==typeof r&&r(e)},fail:function(e){n&&"function"==typeof n&&n(e)}})},downloadFile:function(e,r){e=a(e),t.downloadFile({url:e,success:function(e){r&&"function"==typeof r&&r(e)}})},downloadFile_PromiseFc:function(e){return new Promise((function(n,o){"http"!==e.substring(0,4)?n(e):(e=a(e),r("url:"+e),t.downloadFile({url:e,success:function(e){e&&e.tempFilePath?n(e.tempFilePath):o("not find tempFilePath")},fail:function(e){o(e)}}))}))},saveFile:function(e){t.saveFile({tempFilePath:e,success:function(e){r("保存成功:"+JSON.stringify(e))}})},downLoadAndSaveFile_PromiseFc:function(e){return new Promise((function(n,o){r("准备下载并保存图片:"+e),"http"===e.substring(0,4)?(e=a(e),t.downloadFile({url:e,success:function(e){r("下载背景图成功："+JSON.stringify(e)),e&&e.tempFilePath?t.saveFile({tempFilePath:e.tempFilePath,success:function(t){r("保存背景图成功:"+JSON.stringify(t)),t&&t.savedFilePath?n(t.savedFilePath):n(e.tempFilePath)},fail:function(t){n(e.tempFilePath)}}):o("not find tempFilePath")},fail:function(e){o(e)}})):n(e)}))},checkFile_PromiseFc:function(e){return new Promise((function(r,n){t.getSavedFileList({success:function(t){var n=t.fileList,a=n.findIndex((function(t){return t.filePath===e}));r(a)},fail:function(e){n(e)}})}))},removeSavedFile:function(e){t.getSavedFileList({success:function(r){var n=r.fileList,a=n.findIndex((function(t){return t.filePath===e}));a>=0&&t.removeSavedFile({filePath:e})}})},fileNameInPath:function(e){var t=e.split("/");return t[t.length-1]},getImageInfo_PromiseFc:function(e){return new Promise((function(n,o){r("准备获取图片信息:"+e),e=a(e),t.getImageInfo({src:e,success:function(e){r("获取图片信息成功:"+JSON.stringify(e)),n(e)},fail:function(e){r("获取图片信息失败:"+JSON.stringify(e)),o(e)}})}))},previewImage:function(e){"string"==typeof e&&(e=[e]),t.previewImage({urls:e})},actionSheet:function(e,t){for(var r=[],n=0;n<e.array.length;n++)switch(e.array[n]){case"sinaweibo":r[n]="新浪微博";break;case"qq":r[n]="QQ";break;case"weixin":r[n]="微信";break;case"WXSceneSession":r[n]="微信好友";break;case"WXSenceTimeline":r[n]="微信朋友圈";break;case"WXSceneFavorite":r[n]="微信收藏";break;case 0:r[n]="图文链接";break;case 1:r[n]="纯文字";break;case 2:r[n]="纯图片";break;case 3:r[n]="音乐";break;case 4:r[n]="视频";break;case 5:r[n]="小程序";break;default:break}this.showActionSheet(r,t)},showActionSheet:function(e,r){t.showActionSheet({itemList:e,success:function(e){r&&"function"==typeof r&&r(e.tapIndex)}})},getProvider:function(e,r,n){var a=this;t.getProvider({service:e,success:function(t){if(n){var o={};o.array=t.provider,a.actionSheet(o,(function(e){r&&"function"==typeof r&&r(t.provider[e])}))}else if("payment"==e){for(var i=t.provider,s=[],l=0;l<i.length;l++)"wxpay"==i[l]?s[l]={name:"微信支付",value:i[l],img:"/static/image/wei.png"}:"alipay"==i[l]&&(s[l]={name:"支付宝支付",value:i[l],img:"/static/image/ali.png"});r&&"function"==typeof r&&r(s)}else r&&"function"==typeof r&&r(t)}})}};function a(e){return e}e.exports=n}).call(this,r(1)["default"])},126:function(e,t,r){"use strict";(function(t){var n=s(r(27)),a=s(r(125)),o=s(r(127)),i=r(128);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return d(e)||c(e)||f(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function c(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(u){return void r(u)}s.done?t(l):Promise.resolve(l).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){b(o,n,a,i,s,"next",e)}function s(e){b(o,n,a,i,s,"throw",e)}i(void 0)}))}}var v="ShrePosterBackground_",w="QSSHAREPOSTER_IDKEY";var x=1;function k(e){return new Promise(function(){var t=y(n.default.mark((function t(r,a){var o,i;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P(e);case 3:o=t.sent,r(o),t.next=21;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.prev=9,e.bgScale?e.bgScale=Number(e.bgScale)-.1:x-=.1,console.log("------------清除缓存后, 开始第二次尝试------------"),t.next=14,P(e);case 14:i=t.sent,r(i),t.next=21;break;case 18:t.prev=18,t.t1=t["catch"](9),a(t.t1);case 21:case"end":return t.stop()}}),t,null,[[0,7],[9,18]])})));return function(e,r){return t.apply(this,arguments)}}())}function P(e){var r=e.type,o=e.formData,i=e.background,s=e.posterCanvasId,u=e.backgroundImage,f=e.reserve,c=e.textArray,d=e.drawArray,g=e.qrCodeArray,h=e.imagesArray,p=e.setCanvasWH,b=e.setCanvasToTempFilePath,v=e.setDraw,k=e.bgScale,P=e.Context,N=e._this,T=e.delayTimeScale,A=e.drawDelayTime;return new Promise(function(){var e=y(n.default.mark((function e(y,L){var F,C,I,j,B,_,R,D,J,M,z,H,W;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a.default.showLoading("正在准备海报数据"),P||(a.default.log("没有画布对象,创建画布对象"),P=t.createCanvasContext(s,N||null)),!(i&&i.width&&i.height)){e.next=7;break}F=i,e.next=10;break;case 7:return e.next=9,X({backgroundImage:u,type:r,formData:o});case 9:F=e.sent;case 10:if(k=k||x,F.width=F.width*k,F.height=F.height*k,a.default.log("获取背景图信息对象成功:"+JSON.stringify(F)),C={bgObj:F,type:r,bgScale:k,getBgObj:function(){return C.bgObj},setBgObj:function(e){var t=m(m({},C.bgObj),e);C.bgObj=t,F=t}},!h){e.next=23;break}return"function"==typeof h&&(h=h(C)),a.default.showLoading("正在生成需绘制图片的临时路径"),a.default.log("准备设置图片"),e.next=21,E(h);case 21:h=e.sent,a.default.hideLoading();case 23:if(c&&("function"==typeof c&&(c=c(C)),c=O(P,c)),!g){e.next=38;break}"function"==typeof g&&(g=g(C)),a.default.showLoading("正在生成需绘制图片的临时路径"),I=0;case 28:if(!(I<g.length)){e.next=37;break}if(a.default.log(I),!g[I].image){e.next=34;break}return e.next=33,a.default.downloadFile_PromiseFc(g[I].image);case 33:g[I].image=e.sent;case 34:I++,e.next=28;break;case 37:a.default.hideLoading();case 38:if(!d){e.next=99;break}if("function"==typeof d&&(d=d(C)),!a.default.isPromise(d)){e.next=44;break}return e.next=43,d;case 43:d=e.sent;case 44:if(!(a.default.isArray(d)&&d.length>0)){e.next=99;break}j=!1,B=0;case 47:if(!(B<d.length)){e.next=79;break}_=d[B],a.default.isFn(_.allInfoCallback)&&!j&&(j=!0),_[w]=B,R=void 0,e.t0=_.type,e.next="image"===e.t0?55:"text"===e.t0?59:"qrcode"===e.t0?61:"custom"===e.t0?67:"fillrect"===e.t0?68:"strokeRect"===e.t0?69:"roundStrokeRect"===e.t0?70:"roundFillRect"===e.t0?71:72;break;case 55:return e.next=57,E(_);case 57:return R=e.sent,e.abrupt("break",74);case 59:return R=O(P,_),e.abrupt("break",74);case 61:if(!_.image){e.next=66;break}return e.next=64,a.default.downloadFile_PromiseFc(_.image);case 64:e.t1=e.sent,R={image:e.t1};case 66:return e.abrupt("break",74);case 67:return e.abrupt("break",74);case 68:return e.abrupt("break",74);case 69:return e.abrupt("break",74);case 70:return e.abrupt("break",74);case 71:return e.abrupt("break",74);case 72:return a.default.log("未识别的类型"),e.abrupt("break",74);case 74:R&&a.default.isObject(R)&&(d[B]=m(m({},_),R));case 76:B++,e.next=47;break;case 79:if(!j){e.next=99;break}a.default.log("----------------hasAllInfoCallback----------------"),D=l(d),D.sort((function(e,t){var r=a.default.isUndef(e.serialNum)||a.default.isNull(e.serialNum)?Number.NEGATIVE_INFINITY:Number(e.serialNum),n=a.default.isUndef(t.serialNum)||a.default.isNull(t.serialNum)?Number.NEGATIVE_INFINITY:Number(t.serialNum);return r-n})),a.default.log("开始for循环"),J=0;case 85:if(!(J<D.length)){e.next=98;break}if(M=m({},D[J]),!a.default.isFn(M.allInfoCallback)){e.next=95;break}if(z=M.allInfoCallback({drawArray:d}),!a.default.isPromise(z)){e.next=93;break}return e.next=92,z;case 92:z=e.sent;case 93:H=M[w],a.default.isUndef(H)?console.log("程序错误 找不到idKey!!!\t...这不应该啊"):d[M[w]]=m(m({},M),z);case 95:J++,e.next=85;break;case 98:a.default.log("for循环结束");case 99:if(console.log("params:"+JSON.stringify(C)),!p||"function"!=typeof p){e.next=103;break}return e.next=103,new Promise((function(e,t){p(C),setTimeout((function(){e()}),50)}));case 103:return e.next=105,S({Context:P,type:r,posterCanvasId:s,reserve:f,drawArray:d,textArray:c,imagesArray:h,bgObj:F,qrCodeArray:g,setCanvasToTempFilePath:b,setDraw:v,bgScale:k,_this:N,delayTimeScale:T,drawDelayTime:A});case 105:W=e.sent,a.default.hideLoading(),y({bgObj:F,poster:W,type:r}),e.next=113;break;case 110:e.prev=110,e.t2=e["catch"](0),L(e.t2);case 113:case"end":return e.stop()}}),e,null,[[0,110]])})));return function(t,r){return e.apply(this,arguments)}}())}function S(e){var r=e.Context,n=e.type,o=e.posterCanvasId,i=e.reserve,s=e.bgObj,l=e.drawArray,u=e.textArray,f=e.qrCodeArray,c=e.imagesArray,d=e.setCanvasToTempFilePath,g=e.setDraw,h=e.bgScale,p=e._this,b=e.delayTimeScale,y=e.drawDelayTime,v={Context:r,bgObj:s,type:n,bgScale:h};return b=void 0!==b?b:15,y=void 0!==y?y:100,new Promise((function(e,h){try{if(a.default.showLoading("正在绘制海报"),a.default.log("背景对象:"+JSON.stringify(s)),s&&s.path?(a.default.log("背景有图片路径"),r.drawImage(s.path,0,0,s.width,s.height)):(a.default.log("背景没有图片路径"),s.backgroundColor?(a.default.log("背景有背景颜色:"+s.backgroundColor),r.setFillStyle(s.backgroundColor),r.fillRect(0,0,s.width,s.height)):a.default.log("背景没有背景颜色")),a.default.showLoading("绘制图片"),c&&c.length>0&&M(r,c),a.default.showLoading("绘制自定义内容"),g&&"function"==typeof g&&g(v),a.default.showLoading("绘制文本"),u&&u.length>0&&_(r,u,s),a.default.showLoading("绘制二维码"),f&&f.length>0)for(var w=0;w<f.length;w++)U(r,f[w]);if(a.default.showLoading("绘制可控层级序列"),l&&l.length>0)for(var x=0;x<l.length;x++){var k=l[x];switch(a.default.log("绘制可控层级序列, drawArrayItem:"+JSON.stringify(k)),k.type){case"image":a.default.log("绘制可控层级序列, 绘制图片"),M(r,k);break;case"text":a.default.log("绘制可控层级序列, 绘制文本"),_(r,k,s);break;case"qrcode":a.default.log("绘制可控层级序列, 绘制二维码"),U(r,k);break;case"custom":a.default.log("绘制可控层级序列, 绘制自定义内容"),k.setDraw&&"function"===typeof k.setDraw&&k.setDraw(r);break;case"fillRect":a.default.log("绘制可控层级序列, 绘制填充直角矩形"),N(r,k);break;case"strokeRect":a.default.log("绘制可控层级序列, 绘制线条直角矩形"),T(r,k);break;case"roundStrokeRect":a.default.log("绘制可控层级序列, 绘制线条圆角矩形"),A(r,k);break;case"roundFillRect":a.default.log("绘制可控层级序列, 绘制填充圆角矩形"),L(r,k);break;default:a.default.log("未识别的类型");break}}a.default.showLoading("绘制中"),setTimeout((function(){a.default.log("准备执行draw方法"),a.default.log("Context:"+r);var g=function(){a.default.showLoading("正在输出图片");var r,i=d||{};i&&"function"==typeof i&&(i=d(s,n));var g=m({x:0,y:0,width:Number(s.width),height:Number(s.height),destWidth:Number(s.width),destHeight:Number(s.height),quality:.8,fileType:"jpg"},i);console.log("canvasToTempFilePath的data对象:"+JSON.stringify(g)),r=function(){var r=m(m({},g),{},{canvasId:o,success:function(t){a.default.hideLoading(),e(t)},fail:function(e){a.default.hideLoading(),console.log("输出图片失败"),a.default.log("输出图片失败:"+JSON.stringify(e)),h("输出图片失败:"+JSON.stringify(e))}});t.canvasToTempFilePath(r,p||null)};var y=0;f&&f.forEach((function(e){e.text&&(y+=Number(e.text.length))})),c&&c.forEach((function(){y+=b})),u&&u.forEach((function(){y+=b})),l&&l.forEach((function(e){switch(e.type){case"text":e.text&&(y+=e.text.length);break;default:y+=b;break}})),a.default.log("延时系数:"+b),a.default.log("总计延时:"+y),setTimeout(r,y)};r.draw("boolean"==typeof i&&i,g)}),y)}catch(P){a.default.hideLoading(),h(P)}}))}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.default.log("进入绘制填充直角矩形方法, drawArrayItem:"+JSON.stringify(t)),e.setFillStyle(t.backgroundColor||"black"),e.setGlobalAlpha(t.alpha||1),e.fillRect(t.dx||0,t.dy||0,t.width||0,t.height||0),e.setGlobalAlpha(1)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.setStrokeStyle(t.color||"black"),e.setLineWidth(t.lineWidth||1),e.strokeRect(t.dx,t.dy,t.width,t.height)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.dx,n=t.dy,a=t.width,o=t.height,i=t.r,s=t.lineWidth,l=t.color;i=i||.1*a,a<2*i&&(i=a/2),a<2*i&&(i=a/2),e.beginPath(),e.moveTo(r+i,n),e.arcTo(r+a,n,r+a,n+o,i),e.arcTo(r+a,n+o,r,n+o,i),e.arcTo(r,n+o,r,n,i),e.arcTo(r,n,r+a,n,i),e.closePath(),e.setLineWidth(s||1),e.setStrokeStyle(l||"black"),e.stroke()}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.dx,n=t.dy,a=t.width,o=t.height,i=t.r,s=t.backgroundColor;i=i||.1*a,a<2*i&&(i=a/2),a<2*i&&(i=a/2),e.beginPath(),e.moveTo(r+i,n),e.arcTo(r+a,n,r+a,n+o,i),e.arcTo(r+a,n+o,r,n+o,i),e.arcTo(r,n+o,r,n,i),e.arcTo(r,n,r+a,n,i),e.closePath(),e.setFillStyle(s),e.fill()}function O(e,t){if(a.default.log("进入设置文字方法, texts:"+JSON.stringify(t)),t&&a.default.isArray(t)){if(a.default.log("texts是数组"),t.length>0)for(var r=0;r<t.length;r++)a.default.log("字符串信息-初始化之前:"+JSON.stringify(t[r])),t[r]=F(e,t[r])}else a.default.log("texts是对象"),t=F(e,t);return a.default.log("返回texts:"+JSON.stringify(t)),t}function F(e,t){if(a.default.log("进入设置文字方法, textItem:"+JSON.stringify(t)),a.default.isNotNull_string(t.text)){t.text=String(t.text),t.alpha=void 0!==t.alpha?Number(t.alpha):1,t.color=t.color||"black",t.size=void 0!==t.size?Number(t.size):10,t.textAlign=t.textAlign||"left",t.textBaseline=t.textBaseline||"middle",t.dx=Number(t.dx)||0,t.dy=Number(t.dy)||0,t.size=Math.ceil(Number(t.size)),a.default.log("字符串信息-初始化默认值后:"+JSON.stringify(t));var r=C(e,{text:t.text,size:t.size});a.default.log("字符串信息-初始化时的文本长度:"+r);var n={};t.infoCallBack&&"function"===typeof t.infoCallBack&&(n=t.infoCallBack(r)),t=m(m({},t),{},{textLength:r},n),a.default.log("字符串信息-infoCallBack后:"+JSON.stringify(t))}return t}function C(e,t){a.default.log("计算文字长度, obj:"+JSON.stringify(t));var r,n=t.text,o=t.size;e.setFontSize(o);try{r=e.measureText(n)}catch(f){r={}}if(r={},a.default.log("measureText计算文字长度, textLength:"+JSON.stringify(r)),r=r&&r.width?r.width:0,!r){for(var i=0,s=0;s<n.length;s++){var l=n.substr(s,1),u=I(l);a.default.log("计算文字宽度系数:"+u),i+=u}a.default.log("文字宽度总系数:"+i),r=i*o}return r}function I(e){var t;return t=/a/.test(e)?.552734375:/b/.test(e)?.638671875:/c/.test(e)?.50146484375:/d/.test(e)?.6396484375:/e/.test(e)?.5673828125:/f/.test(e)?.3466796875:/g/.test(e)?.6396484375:/h/.test(e)?.61572265625:/i/.test(e)?.26611328125:/j/.test(e)?.26708984375:/k/.test(e)?.54443359375:/l/.test(e)?.26611328125:/m/.test(e)?.93701171875:/n/.test(e)?.6162109375:/o/.test(e)?.6357421875:/p/.test(e)?.638671875:/q/.test(e)?.6396484375:/r/.test(e)?.3818359375:/s/.test(e)?.462890625:/t/.test(e)?.37255859375:/u/.test(e)?.6162109375:/v/.test(e)?.52490234375:/w/.test(e)?.78955078125:/x/.test(e)?.5068359375:/y/.test(e)?.529296875:/z/.test(e)?.49169921875:/A/.test(e)?.70361328125:/B/.test(e)?.62744140625:/C/.test(e)?.6689453125:/D/.test(e)?.76171875:/E/.test(e)?.5498046875:/F/.test(e)?.53125:/G/.test(e)?.74365234375:/H/.test(e)?.7734375:/I/.test(e)?.2939453125:/J/.test(e)?.39599609375:/K/.test(e)?.634765625:/L/.test(e)?.51318359375:/M/.test(e)?.97705078125:/N/.test(e)?.81298828125:/O/.test(e)?.81494140625:/P/.test(e)?.61181640625:/Q/.test(e)?.81494140625:/R/.test(e)?.65283203125:/S/.test(e)?.5771484375:/T/.test(e)?.5732421875:/U/.test(e)?.74658203125:/V/.test(e)?.67626953125:/W/.test(e)?1.017578125:/X/.test(e)?.64501953125:/Y/.test(e)?.603515625:/Z/.test(e)?.6201171875:/[0-9]/.test(e)?.58642578125:/[\u4e00-\u9fa5]/.test(e)?1:/ /.test(e)?.2958984375:/\`/.test(e)?.294921875:/\~/.test(e)?.74169921875:/\!/.test(e)?.3125:/\@/.test(e)?1.03125:/\#/.test(e)?.63818359375:/\$/.test(e)?.58642578125:/\%/.test(e)?.8896484375:/\^/.test(e)?.74169921875:/\&/.test(e)?.8701171875:/\*/.test(e)?.455078125:/\(/.test(e)||/\)/.test(e)?.333984375:/\_/.test(e)?.4482421875:/\-/.test(e)?.4326171875:/\+/.test(e)||/\=/.test(e)?.74169921875:/\|/.test(e)?.26904296875:/\\/.test(e)?.416015625:/\[/.test(e)||/\]/.test(e)?.333984375:/\;/.test(e)?.24072265625:/\'/.test(e)?.25634765625:/\,/.test(e)||/\./.test(e)?.24072265625:/\//.test(e)?.42724609375:/\{/.test(e)||/\}/.test(e)?.333984375:/\:/.test(e)?.24072265625:/\"/.test(e)?.435546875:/\</.test(e)||/\>/.test(e)?.74169921875:/\?/.test(e)?.48291015625:1,t}function E(e){return a.default.log("进入设置图片数据方法"),new Promise(function(){var t=y(n.default.mark((function t(r,o){var i;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e||!a.default.isArray(e)){t.next=14;break}a.default.log("images是一个数组"),i=0;case 4:if(!(i<e.length)){t.next=12;break}return a.default.log("设置图片数据循环中:"+i),t.next=8,B(e[i]);case 8:e[i]=t.sent;case 9:i++,t.next=4;break;case 12:t.next=18;break;case 14:return a.default.log("images是一个对象"),t.next=17,B(e);case 17:e=t.sent;case 18:r(e),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),o(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e,r){return t.apply(this,arguments)}}())}function j(e){var t=/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)\s*$/i;return t.test(e)?(0,i.base64ToPath)(e):Promise.resolve(e)}function B(e){return new Promise(function(){var t=y(n.default.mark((function t(r,o){var i,s,l;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.url){t.next=20;break}return t.next=3,j(e.url);case 3:return e.url=t.sent,i=e.url,t.next=7,a.default.downloadFile_PromiseFc(i);case 7:return i=t.sent,e.url=i,s=e.infoCallBack&&"function"===typeof e.infoCallBack,l={},t.next=13,a.default.getImageInfo_PromiseFc(i);case 13:l=t.sent,s&&(e=m(m({},e),e.infoCallBack(l))),e.dx=Number(e.dx)||0,e.dy=Number(e.dy)||0,e.dWidth=Number(e.dWidth||l.width),e.dHeight=Number(e.dHeight||l.height),e=m(m({},e),{},{imageInfo:l});case 20:r(e);case 21:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}function _(e,t,r){a.default.isArray(t)?a.default.log("遍历文本方法, 是数组"):(a.default.log("遍历文本方法, 不是数组"),t=[t]),a.default.log("遍历文本方法, textArray:"+JSON.stringify(t));var n=[];if(t&&t.length>0)for(var o=0;o<t.length;o++){var i=t[o];if(i.text&&i.lineFeed){var s=-1,l=r.width,u=i.size,f=i.dx;if(a.default.isObject(i.lineFeed)){var c=i.lineFeed;s=void 0!==c.lineNum&&"number"===typeof c.lineNum&&c.lineNum>=0?c.lineNum:s,l=void 0!==c.maxWidth&&"number"===typeof c.maxWidth?c.maxWidth:l,u=void 0!==c.lineHeight&&"number"===typeof c.lineHeight?c.lineHeight:u,f=void 0!==c.dx&&"number"===typeof c.dx?c.dx:f}for(var d=i.text.split(""),g="",h=[],p=0,b=d.length;p<b;p++)C(e,{text:g,size:i.size})<=l&&C(e,{text:g+d[p],size:i.size})<=l?(g+=d[p],p==d.length-1&&h.push(g)):(h.push(g),g=d[p]);a.default.log("循环出的文本数组:"+JSON.stringify(h));for(var y=s>=0&&s<h.length?s:h.length,v=0;v<y;v++){var w=h[v];v==y-1&&y<h.length&&(w=w.substring(0,w.length-1)+"...");var x=m(m({},i),{},{text:w,dx:0===v?i.dx:f>=0?f:i.dx,dy:i.dy+v*u,textLength:C(e,{text:w,size:i.size})});a.default.log("重新组成的文本对象:"+JSON.stringify(x)),n.push(x)}}else n.push(i)}a.default.log("绘制文本新数组:"+JSON.stringify(n)),D(e,n)}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.font&&"string"===typeof e.font)return a.default.log(e.font),e.font;var t="normal",r="normal",n="normal",o=e.size||10,i="sans-serif";return o=Math.ceil(Number(o)),e.fontStyle&&"string"===typeof e.fontStyle&&(t=e.fontStyle.trim()),e.fontVariant&&"string"===typeof e.fontVariant&&(r=e.fontVariant.trim()),!e.fontWeight||"string"!==typeof e.fontWeight&&"number"!==typeof e.fontWeight||(n=e.fontWeight.trim()),e.fontFamily&&"string"===typeof e.fontFamily&&(i=e.fontFamily.trim()),t+" "+r+" "+n+" "+o+"px "+i}function D(e,t){if(a.default.log("准备绘制文本方法, texts:"+JSON.stringify(t)),t&&a.default.isArray(t)){if(a.default.log("准备绘制文本方法, 是数组"),t.length>0)for(var r=0;r<t.length;r++)J(e,t[r])}else a.default.log("准备绘制文本方法, 不是数组"),J(e,t)}function J(e,t){if(a.default.log("进入绘制文本方法, textItem:"+JSON.stringify(t)),t&&a.default.isObject(t)&&t.text){if(e.font=R(t),e.setFillStyle(t.color),e.setGlobalAlpha(t.alpha),e.setTextAlign(t.textAlign),e.setTextBaseline(t.textBaseline),e.fillText(t.text,t.dx,t.dy),t.lineThrough&&a.default.isObject(t.lineThrough)){a.default.log("有删除线");var r,n,o=t.lineThrough;switch(o.alpha=void 0!==o.alpha?o.alpha:t.alpha,o.style=o.style||t.color,o.width=void 0!==o.width?o.width:t.size/10,o.cap=void 0!==o.cap?o.cap:"butt",a.default.log("删除线对象:"+JSON.stringify(o)),e.setGlobalAlpha(o.alpha),e.setStrokeStyle(o.style),e.setLineWidth(o.width),e.setLineCap(o.cap),t.textAlign){case"left":r=t.dx;break;case"center":r=t.dx-t.textLength/2;break;default:r=t.dx-t.textLength;break}switch(t.textBaseline){case"top":n=t.dy+.5*t.size;break;case"middle":n=t.dy;break;default:n=t.dy-.5*t.size;break}e.beginPath(),e.moveTo(r,n),e.lineTo(r+t.textLength,n),e.stroke(),e.closePath(),a.default.log("删除线完毕")}e.setGlobalAlpha(1),e.font="10px sans-serif"}}function M(e,t){if(a.default.log("判断图片数据类型:"+JSON.stringify(t)),t&&a.default.isArray(t)){if(t.length>0)for(var r=0;r<t.length;r++)z(e,t[r])}else z(e,t)}function z(e,t){a.default.log("判断绘制图片形状, img:"+JSON.stringify(t)),t.url&&(t.circleSet?W(e,t):t.roundRectSet?G(e,t):H(e,t))}function H(e,t){if(a.default.log("进入绘制默认图片方法, img:"+JSON.stringify(t)),t.url){var r=!a.default.isUndef(t.alpha);t.alpha=Number(a.default.isUndef(t.alpha)?1:t.alpha),e.setGlobalAlpha(t.alpha),a.default.log("绘制默认图片方法, 有url"),t.dWidth&&t.dHeight&&t.sx&&t.sy&&t.sWidth&&t.sHeight?(a.default.log("绘制默认图片方法, 绘制第一种方案"),e.drawImage(t.url,Number(t.sx)||!1,Number(t.sy)||!1,Number(t.sWidth)||!1,Number(t.sHeight)||!1,Number(t.dx||0),Number(t.dy||0),Number(t.dWidth)||!1,Number(t.dHeight)||!1)):t.dWidth&&t.dHeight?(a.default.log("绘制默认图片方法, 绘制第二种方案"),e.drawImage(t.url,Number(t.dx||0),Number(t.dy||0),Number(t.dWidth)||!1,Number(t.dHeight)||!1)):(a.default.log("绘制默认图片方法, 绘制第三种方案"),e.drawImage(t.url,Number(t.dx||0),Number(t.dy||0))),r&&e.setGlobalAlpha(1)}a.default.log("绘制默认图片方法, 绘制完毕")}function W(e,t){a.default.log("进入绘制圆形图片方法, obj:"+JSON.stringify(t));var r,n,o,i,s=t.dx,l=t.dy,u=t.dWidth,f=t.dHeight,c=t.circleSet;t.imageInfo;("object"===typeof c&&(r=c.x,n=c.y,o=c.r),o)||(i=u>f?f:u,o=i/2);r=r?s+r:(s||0)+o,n=n?l+n:(l||0)+o,e.save(),e.beginPath(),e.arc(r,n,o,0,2*Math.PI,!1),e.closePath(),e.setGlobalAlpha(0),e.fillStyle="#FFFFFF",e.fill(),e.setGlobalAlpha(1),e.clip(),H(e,t),a.default.log("默认图片绘制完毕"),e.restore()}function G(e,t){a.default.log("进入绘制矩形图片方法, obj:"+JSON.stringify(t)),e.save();var r,n=t.dx,o=t.dy,i=t.dWidth,s=t.dHeight,l=t.roundRectSet;t.imageInfo;"object"===typeof l&&(r=l.r),r=r||.1*i,i<2*r&&(r=i/2),s<2*r&&(r=s/2),e.beginPath(),e.moveTo(n+r,o),e.arcTo(n+i,o,n+i,o+s,r),e.arcTo(n+i,o+s,n,o+s,r),e.arcTo(n,o+s,n,o,r),e.arcTo(n,o,n+i,o,r),e.closePath(),e.setGlobalAlpha(0),e.fillStyle="#FFFFFF",e.fill(),e.setGlobalAlpha(1),e.clip(),H(e,t),e.restore(),a.default.log("进入绘制矩形图片方法, 绘制完毕")}function U(e,t){a.default.log("进入绘制二维码方法"),a.default.showLoading("正在生成二维码");for(var r=[],n={text:String(t.text||"")||"",size:Number(t.size||0)||200,background:String(t.background||"")||"#ffffff",foreground:String(t.foreground||"")||"#000000",pdground:String(t.pdground||"")||"#000000",correctLevel:Number(t.correctLevel||0)||3,image:String(t.image||"")||"",imageSize:Number(t.imageSize||0)||40,dx:Number(t.dx||0)||0,dy:Number(t.dy||0)||0},i=null,s=0,l=0,u=r.length;l<u;l++)if(s=l,r[l].text==n.text&&r[l].text.correctLevel==n.correctLevel){i=r[l].obj;break}s==u&&(i=new o.default(n.text,n.correctLevel),r.push({text:n.text,correctLevel:n.correctLevel,obj:i}));for(var f=function(e){var t=e.options;return t.pdground&&(e.row>1&&e.row<5&&e.col>1&&e.col<5||e.row>e.count-6&&e.row<e.count-2&&e.col>1&&e.col<5||e.row>1&&e.row<5&&e.col>e.count-6&&e.col<e.count-2)?t.pdground:t.foreground},c=i.getModuleCount(),d=n.size,g=n.imageSize,h=(d/c).toPrecision(4),m=(d/c).toPrecision(4),p=0;p<c;p++)for(var b=0;b<c;b++){var y=Math.ceil((b+1)*h)-Math.floor(b*h),v=Math.ceil((p+1)*h)-Math.floor(p*h),w=f({row:p,col:b,count:c,options:n});e.setFillStyle(i.modules[p][b]?w:n.background),e.fillRect(n.dx+Math.round(b*h),n.dy+Math.round(p*m),y,v)}if(n.image){var x=function(e,t,r,a,o,i,s,l,u){e.setLineWidth(s),e.setFillStyle(n.background),e.setStrokeStyle(n.background),e.beginPath(),e.moveTo(t+i,r),e.arcTo(t+a,r,t+a,r+i,i),e.arcTo(t+a,r+o,t+a-i,r+o,i),e.arcTo(t,r+o,t,r+o-i,i),e.arcTo(t,r,t+i,r,i),e.closePath(),l&&e.fill(),u&&e.stroke()},k=n.dx+Number(((d-g)/2).toFixed(2)),P=n.dy+Number(((d-g)/2).toFixed(2));x(e,k,P,g,g,2,6,!0,!0),e.drawImage(n.image,k,P,g,g)}a.default.log("进入绘制二维码方法完毕"),a.default.hideLoading()}function X(e){e.backgroundImage,e.type;return new Promise(function(){var t=y(n.default.mark((function t(r,o){var i;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a.default.showLoading("正在获取海报背景图"),t.next=4,V(e);case 4:i=t.sent,a.default.hideLoading(),r(i),t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](0),a.default.hideLoading(),a.default.showToast("获取分享用户背景图失败:"+JSON.stringify(t.t0)),a.default.log(JSON.stringify(t.t0)),o(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}())}function q(e,t){a.default.setStorage(Q(e),t)}function Q(e){return v+(e||"default")}function V(e,t){var r=e.backgroundImage,o=e.type;return a.default.log("获取分享背景图, 尝试清空本地数据"),new Promise(function(){var t=y(n.default.mark((function t(i,s){var l,u,f,c;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a.default.showLoading("正在下载海报背景图"),a.default.log("没有从后端获取的背景图片路径, 尝试从后端获取背景图片路径"),!r){t.next=7;break}t.t0=r,t.next=10;break;case 7:return t.next=9,a.default.getPosterUrl(e);case 9:t.t0=t.sent;case 10:return l=t.t0,t.next=13,j(l);case 13:return l=t.sent,a.default.log("尝试下载并保存背景图:"+l),t.next=17,a.default.downLoadAndSaveFile_PromiseFc(l);case 17:if(u=t.sent,!u){t.next=32;break}return a.default.log("下载并保存背景图成功:"+u),t.next=22,a.default.getImageInfo_PromiseFc(u);case 22:f=t.sent,a.default.log("获取图片信息成功"),c={path:u,width:f.width,height:f.height,name:a.default.fileNameInPath(l)},a.default.log("拼接背景图信息对象成功:"+JSON.stringify(c)),q(o,m({},c)),a.default.hideLoading(),a.default.log("返回背景图信息对象"),i(m({},c)),t.next=34;break;case 32:a.default.hideLoading(),s("not find savedFilePath");case 34:t.next=39;break;case 36:t.prev=36,t.t1=t["catch"](0),s(t.t1);case 39:case"end":return t.stop()}}),t,null,[[0,36]])})));return function(e,r){return t.apply(this,arguments)}}())}e.exports={getSharePoster:k,setText:O,setImage:E,drawText:_,drawImage:M,drawQrCode:U,drawFillRect:N,drawStrokeRect:T,drawRoundStrokeRect:A,drawRoundFillRect:L}}).call(this,r(1)["default"])},127:function(e,t,r){"use strict";function n(e){var t,r,n;return e<128?[e]:e<2048?(t=192+(e>>6),r=128+(63&e),[t,r]):(t=224+(e>>12),r=128+(e>>6&63),n=128+(63&e),[t,r,n])}function a(e){for(var t=[],r=0;r<e.length;r++)for(var a=e.charCodeAt(r),o=n(a),i=0;i<o.length;i++)t.push(o[i]);return t}function o(e,t){this.typeNumber=-1,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=e,this.utf8bytes=a(e),this.make()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,o.prototype={constructor:o,getModuleCount:function(){return this.moduleCount},make:function(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl:function(e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[t]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,e),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+r][t+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},createQrcode:function(){for(var e=0,t=0,r=null,n=0;n<8;n++){this.makeImpl(n);var a=l.getLostPoint(this);(0==n||e>a)&&(e=a,t=n,r=this.modules)}this.modules=r,this.setupTypeInfo(!1,t),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0,null==this.modules[6][e]&&(this.modules[6][e]=e%2==0))},setupPositionAdjustPattern:function(){for(var e=l.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],a=e[r];if(null==this.modules[n][a])for(var o=-2;o<=2;o++)for(var i=-2;i<=2;i++)this.modules[n+o][a+i]=-2==o||2==o||-2==i||2==i||0==o&&0==i}},setupTypeNumber:function(e){for(var t=l.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n,this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},setupTypeInfo:function(e,t){for(var r=i[this.errorCorrectLevel]<<3|t,n=l.getBCHTypeInfo(r),a=0;a<15;a++){var o=!e&&1==(n>>a&1);a<6?this.modules[a][8]=o:a<8?this.modules[a+1][8]=o:this.modules[this.moduleCount-15+a][8]=o;o=!e&&1==(n>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=o:a<9?this.modules[8][15-a-1+1]=o:this.modules[8][15-a-1]=o}this.modules[this.moduleCount-8][8]=!e},createData:function(){var e=new g,t=this.typeNumber>9?16:8;e.put(4,4),e.put(this.utf8bytes.length,t);for(var r=0,n=this.utf8bytes.length;r<n;r++)e.put(this.utf8bytes[r],8);e.length+4<=8*this.totalDataCount&&e.put(0,4);while(e.length%8!=0)e.putBit(!1);while(1){if(e.length>=8*this.totalDataCount)break;if(e.put(o.PAD0,8),e.length>=8*this.totalDataCount)break;e.put(o.PAD1,8)}return this.createBytes(e)},createBytes:function(e){for(var t=0,r=0,n=0,a=this.rsBlock.length/3,o=new Array,i=0;i<a;i++)for(var s=this.rsBlock[3*i+0],u=this.rsBlock[3*i+1],f=this.rsBlock[3*i+2],d=0;d<s;d++)o.push([f,u]);for(var g=new Array(o.length),h=new Array(o.length),m=0;m<o.length;m++){var p=o[m][0],b=o[m][1]-p;r=Math.max(r,p),n=Math.max(n,b),g[m]=new Array(p);for(i=0;i<g[m].length;i++)g[m][i]=255&e.buffer[i+t];t+=p;var y=l.getErrorCorrectPolynomial(b),v=new c(g[m],y.getLength()-1),w=v.mod(y);h[m]=new Array(y.getLength()-1);for(i=0;i<h[m].length;i++){var x=i+w.getLength()-h[m].length;h[m][i]=x>=0?w.get(x):0}}var k=new Array(this.totalDataCount),P=0;for(i=0;i<r;i++)for(m=0;m<o.length;m++)i<g[m].length&&(k[P++]=g[m][i]);for(i=0;i<n;i++)for(m=0;m<o.length;m++)i<h[m].length&&(k[P++]=h[m][i]);return k},mapData:function(e,t){for(var r=-1,n=this.moduleCount-1,a=7,o=0,i=this.moduleCount-1;i>0;i-=2){6==i&&i--;while(1){for(var s=0;s<2;s++)if(null==this.modules[n][i-s]){var u=!1;o<e.length&&(u=1==(e[o]>>>a&1));var f=l.getMask(t,n,i-s);f&&(u=!u),this.modules[n][i-s]=u,a--,-1==a&&(o++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}}},o.PAD0=236,o.PAD1=17;for(var i=[1,0,3,2],s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){var t=e<<10;while(l.getBCHDigit(t)-l.getBCHDigit(l.G15)>=0)t^=l.G15<<l.getBCHDigit(t)-l.getBCHDigit(l.G15);return(e<<10|t)^l.G15_MASK},getBCHTypeNumber:function(e){var t=e<<12;while(l.getBCHDigit(t)-l.getBCHDigit(l.G18)>=0)t^=l.G18<<l.getBCHDigit(t)-l.getBCHDigit(l.G18);return e<<12|t},getBCHDigit:function(e){var t=0;while(0!=e)t++,e>>>=1;return t},getPatternPosition:function(e){return l.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case s.PATTERN000:return(t+r)%2==0;case s.PATTERN001:return t%2==0;case s.PATTERN010:return r%3==0;case s.PATTERN011:return(t+r)%3==0;case s.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case s.PATTERN101:return t*r%2+t*r%3==0;case s.PATTERN110:return(t*r%2+t*r%3)%2==0;case s.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new c([1],0),r=0;r<e;r++)t=t.multiply(new c([1,u.gexp(r)],0));return t},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0,a=0;a<t;a++)for(var o=0,i=e.modules[a][0],s=0;s<t;s++){var l=e.modules[a][s];if(s<t-6&&l&&!e.modules[a][s+1]&&e.modules[a][s+2]&&e.modules[a][s+3]&&e.modules[a][s+4]&&!e.modules[a][s+5]&&e.modules[a][s+6]&&(s<t-10?e.modules[a][s+7]&&e.modules[a][s+8]&&e.modules[a][s+9]&&e.modules[a][s+10]&&(r+=40):s>3&&e.modules[a][s-1]&&e.modules[a][s-2]&&e.modules[a][s-3]&&e.modules[a][s-4]&&(r+=40)),a<t-1&&s<t-1){var u=0;l&&u++,e.modules[a+1][s]&&u++,e.modules[a][s+1]&&u++,e.modules[a+1][s+1]&&u++,0!=u&&4!=u||(r+=3)}i^l?o++:(i=l,o>=5&&(r+=3+o-5),o=1),l&&n++}for(s=0;s<t;s++)for(o=0,i=e.modules[0][s],a=0;a<t;a++){l=e.modules[a][s];a<t-6&&l&&!e.modules[a+1][s]&&e.modules[a+2][s]&&e.modules[a+3][s]&&e.modules[a+4][s]&&!e.modules[a+5][s]&&e.modules[a+6][s]&&(a<t-10?e.modules[a+7][s]&&e.modules[a+8][s]&&e.modules[a+9][s]&&e.modules[a+10][s]&&(r+=40):a>3&&e.modules[a-1][s]&&e.modules[a-2][s]&&e.modules[a-3][s]&&e.modules[a-4][s]&&(r+=40)),i^l?o++:(i=l,o>=5&&(r+=3+o-5),o=1)}var f=Math.abs(100*n/t/t-50)/5;return r+=10*f,r}},u={glog:function(e){if(e<1)throw new Error("glog("+e+")");return u.LOG_TABLE[e]},gexp:function(e){while(e<0)e+=255;while(e>=256)e-=255;return u.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;f<8;f++)u.EXP_TABLE[f]=1<<f;for(f=8;f<256;f++)u.EXP_TABLE[f]=u.EXP_TABLE[f-4]^u.EXP_TABLE[f-5]^u.EXP_TABLE[f-6]^u.EXP_TABLE[f-8];for(f=0;f<255;f++)u.LOG_TABLE[u.EXP_TABLE[f]]=f;function c(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);var r=0;while(r<e.length&&0==e[r])r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}c.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=u.gexp(u.glog(this.get(r))+u.glog(e.get(n)));return new c(t,0)},mod:function(e){var t=this.getLength(),r=e.getLength();if(t-r<0)return this;for(var n=new Array(t),a=0;a<t;a++)n[a]=this.get(a);while(n.length>=r){var o=u.glog(n[0])-u.glog(e.get(0));for(a=0;a<e.getLength();a++)n[a]^=u.gexp(u.glog(e.get(a))+o);while(0==n[0])n.shift()}return new c(n,0)}};var d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];function g(){this.buffer=new Array,this.length=0}o.prototype.getRightType=function(){for(var e=1;e<41;e++){var t=d[4*(e-1)+this.errorCorrectLevel];if(void 0==t)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+this.errorCorrectLevel);for(var r=t.length/3,n=0,a=0;a<r;a++){var o=t[3*a+0],i=t[3*a+2];n+=i*o}var s=e>9?2:1;if(this.utf8bytes.length+s<n||40==e){this.typeNumber=e,this.rsBlock=t,this.totalDataCount=n;break}}},g.prototype={get:function(e){var t=Math.floor(e/8);return this.buffer[t]>>>7-e%8&1},put:function(e,t){for(var r=0;r<t;r++)this.putBit(e>>>t-r-1&1)},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}}},128:function(e,t,r){"use strict";function n(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}function a(e){return new Promise((function(t,r){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var a=new XMLHttpRequest;return a.open("GET",e,!0),a.responseType="blob",a.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=r,e.readAsDataURL(this.response)}},a.onerror=r,void a.send()}var o=document.createElement("canvas"),i=o.getContext("2d"),s=new Image;return s.onload=function(){o.width=s.width,o.height=s.height,i.drawImage(s,0,0),t(o.toDataURL()),o.height=o.width=0},s.onerror=r,void(s.src=e)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){r(e)}}):r(new Error("not support")):plus.io.resolveLocalFileSystemURL(n(e),(function(e){e.file((function(e){var n=new plus.io.FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e)},n.readAsDataURL(e)}),(function(e){r(e)}))}),(function(e){r(e)}))}))}function o(e){return new Promise((function(t,r){if("object"===typeof window&&"document"in window){e=e.split(",");var n=e[0].match(/:(.*?);/)[1],a=atob(e[1]),o=a.length,i=new Uint8Array(o);while(o--)i[o]=a.charCodeAt(o);return t((window.URL||window.webkitURL).createObjectURL(new Blob([i],{type:n})))}var s=e.match(/data\:\S+\/(\S+);/);s?s=s[1]:r(new Error("base64 error"));var l=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+l;wx.getFileSystemManager().writeFile({filePath:u,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){t(u)},fail:function(e){r(e)}})}else r(new Error("not support"));else{var f=new plus.nativeObj.Bitmap("bitmap"+Date.now());f.loadBase64Data(e,(function(){var e="_doc/uniapp_temp/"+l;f.save(e,{},(function(){f.clear(),t(e)}),(function(e){f.clear(),r(e)}))}),(function(e){f.clear(),r(e)}))}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=a,t.base64ToPath=o},145:function(e,t){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/tn_components/common/vendor.js.map